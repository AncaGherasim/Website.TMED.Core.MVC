function init(){NAcou=$("#countryNA").val();NAplc=$("#placeNA").val();var n={Id:plcID};$.ajax({type:"POST",url:SiteName+"/Api/Hotels/AllHotelsByPlace/",data:JSON.stringify(n),contentType:"application/json; charset=UTF-8",success:function(n){hotObj=n;initHotObj=hotObj;createPagination();builtHotelList()},error:function(n){console.log(n.responseText)}})}function getFacilities(){var n={Id:plcID};$.ajax({type:"POST",url:SiteName+"/Api/Hotels/GetHotelsFacilities/",data:JSON.stringify(n),contentType:"application/json; charset=UTF-8",success:function(n){buildFacilities(n)},error:function(n){console.log(n.responseText)}})}function gethotelsidsbyfacilid(n,t,i,r,u){var f,e=n.join(),o={FacilID:e,PlcID:t,TypeId:i};$.ajax({type:"POST",url:SiteName+"/Api/Hotels/GetHotelsByFacilityID/",data:JSON.stringify(o),contentType:"application/json; charset=utf-8",dataType:"html",success:function(n){var e=JSON.parse(n),i,t;f=e[0].name;r!="none"?(t=[],t=hotObj,t=$.grep(t,function(n){return f.match(new RegExp(n.pdlid))}),i='<p class="pMHOsrtfilLabel">'+t.length+' properties match "'+r+'"<\/p>'):(t=[],t=u,t=$.grep(t,function(n){return f.match(new RegExp(n.pdlid))}),i='<p class="pMHOsrtfilLabel"> '+t.length+" properties match sort & filter criteria <\/p>");hotObj=t;$(".header").html(i);createPagination();builtHotelList();delete t;$("#filterSort").modal("hide")},error:function(n){console.log(n.responseText)}})}function builtHotelList(){$(".hotelist").html("");var t=page*10,n="",i=prevInt*nxtPg*10,r=hotObj.slice(i,t);$.each(r,function(){var r,u;n=n+"<div class='row mx-auto bg-white mb-2'><div class='col-12 pl-1 pr-1 dvHotelTitle'>"+this.pdL_Title+"<\/div><div class='col-12 pl-1 pr-1 pb-2 dvHotelArea'>"+this.cityZone+"<\/div><div class='col-12'><div class='row'><div class='col-4 pl-1 pr-0'><img class='img-fluid' src='https://pictures.tripmasters.com"+this.imG_Path_URL.toLowerCase()+"?growid="+this.giphid+"'/><\/div><div class='col-8 pr-1 '><div class='row mx-auto'>";r="";switch(!0){case/Stars|Lodge|Cruise/g.test(this.gipH_TNTournetRating):r="Stars_"+this.gipH_TNTournetRating.replace(/\s/g,"_");break;case!/Stars|Lodge|Cruise/g.test(this.gipH_TNTournetRating):r=this.gipH_TNTournetRating.replace(/\s/g,"_").toLowerCase()}if(u=/Stars/g.test(this.gipH_TNTournetRating)?this.gipH_TNTournetRating:"",n=n+"<div><img class='img-fluid align-middle' src='https://pictures.tripmasters.com/siteassets/d/"+r.replace(/\+/g,"_Plus")+".gif'/><span class='pl-1 align-middle'>"+u+"<\/span>",this.pdL_SequenceNo>49&&this.pdL_SequenceNo<60&&(n=n+"<img class='img-fluid align-middle pl-2' src='https://pictures.tripmasters.com/siteassets/d/favorite.gif' />"),n=n+"<\/div>",this.ghS_FinalScore!=0){var t="",i="",f=this.ghS_FinalScore,e=expediaNoRange(this.ghS_FinalScore);switch(e){case"EX":t="Excellent";i="EX";break;case"VG":t="Very Good";i="VG";break;case"GD":t="Good";i="GD";break;case"FR":t="Fair";i="FR";break;case"PO":t="Poor";i="PO";break;case"NA":t="No Review available";i="NA";f="NA"}n=n+"<div><span><b>"+f+"/5 <\/b>"+t+"<\/span> ";n=this.ghS_ExpediaReviewCount!=0?n+'<a href="#" class="getReview" id="'+this.pdlid+'" data-title="'+this.pdL_Title+'"><span>('+this.ghS_ExpediaReviewCount+" reviews)<\/span><\/a><\/div>":n+"<\/div>"}n=n+"<\/div><\/div>";this.gipH_TNHighlights!=""&&(n=n+"<div class='col-12'><img src='https://pictures.tripmasters.com/siteassets/d/bluetag.gif'/> "+this.gipH_TNHighlights+"<\/div>");n=n+"";n=n+"<div class='col-12 pt-3 pb-2 pr-1'><a href='"+SiteName+"/"+NAcou.replace(/\s/g,"_").toLowerCase()+"/"+NAplc.replace(/\s/g,"_").toLowerCase()+"/"+this.pdL_Title.replace(/\s/g,"_").replace("&","and").toLowerCase()+"/hotel-"+this.pdlid+"' role='button' class='btn btn-primary float-right aDet'>Details, photos, map<\/a><\/div>";n=n+"<\/div><\/div><\/div>";$(".getReview").click(function(n){n.preventDefault();getTrustRev(this)})});$(".hotelist .loader").remove();$(".hotelist").append(n)}function buildFacilities(n){var o=[],r,u,t,f,e,i;o=n;r=$.grep(o,function(n){return n.facilityStrType.match(new RegExp("Room","i"))});u=0;facilRoomC=r.length;r.length>0&&(t="",$.each(r,function(){roomType=this.sourceNA;t=t+"<div class='col-12 pl-0 pr-0 clearfix'><input type='checkbox' class='rom' id='chkroom"+this.facilID+"' value='"+this.facilID+"' checked='checked'/><label for='chkroom"+this.facilID+"' class='css-label rev elegant float-left'>"+this.facilityName+"<\/label><button type='button' class='btn btn-link float-right pt-0 pb-0 aOnly' id='rom|chkroom"+this.facilID+"|"+this.sourceNA+"|"+this.facilityName+"'><u>only<\/u><\/button><\/div>";u++;u==5?t=t+"<button class='btn btn-link btnRoomFacil' data-toggle='collapse' data-target='#dvRoomFacil' aria-expanded='false'>show more<\/button><div class='collapse' id='dvRoomFacil'>":""}),u>5?t=t+"<button class='btn btn-link' data-toggle='collapse' data-target='#dvRoomFacil'>hide more facilities<\/button><\/div>":"");$(".dvFac").append(t);f=$.grep(o,function(n){return n.facilityStrType=="Facilities"||n.facilityStrType=="Property"});e=0;facilPropC=f.length;f.length>0&&(i="",$.each(f,function(){propType=this.sourceNA;i=i+"<div class='col-12 pl-0 pr-0 clearfix'><input type='checkbox' class='pro' id='chkprop"+this.facilID+"' value='"+this.facilID+"' checked='checked'/><label for='chkprop"+this.facilID+"' class='css-label pro elegant float-left'>"+this.facilityName+"<\/label><button type='button' class='btn btn-link float-right pt-0 pb-0 aOnly' id='pro|chkprop"+this.facilID+"|"+this.sourceNA+"|"+this.facilityName+"'><u>only<\/u><\/button><\/div>";e++;e==5?i=i+"<button class='btn btn-link btnHotelFacil' data-toggle='collapse' data-target='#dvHotelFacil' aria-expanded='false'>show more<\/button><div class='collapse' id='dvHotelFacil'>":""}),e>5?i=i+"<button class='btn btn-link' data-toggle='collapse' data-target='#dvHotelFacil'>hide more facilities<\/button><\/div>":"");$(".dvHotelFacil").append(i)}function getTrustRev(n){$.ajax({type:"POST",url:SiteName+"/Api/AWSExpediaReviewHotel",data:JSON.stringify({Id:parseInt(n.id)}),dataType:"json",crossDomain:!0,contentType:"application/json; charset=utf-8",success:function(t){var i=t,r,u,f,e,o,s,h,c,l,a;$(".dvExpediaRev").append('<p class="pMHOhotrevtitle">'+n.dataset.title+"<\/p>");i.propertyRatings==null?(r=$('<div><img src = "https://pictures.tripmasters.com/siteassets/d/no-review-icon.png" alt = "NoReview"><\/div>'),$(".dvExpediaRev").append(r)):($(".dvExpediaRev").append('<div class="dvHotRevScores row"><\/div>'),$(".dvExpediaRev").append('<div class="dvHotRevFeedbacks row"><\/div>'),u=i.propertyRatings.guestReviews.overall>=4.5?"Excelent":i.propertyRatings.guestReviews.overall>=4?"Very good":i.propertyRatings.guestReviews.overall>=3.5?"Good":"Okay",f=$('<div class="review_comment_overall col-12"><span>'+i.propertyRatings.guestReviews.overall+"/5 "+u+"<\/span><span>"+i.propertyRatings.guestReviews.count+" reviews<\/span><\/div>"),$(".dvHotRevScores").append(f),i.propertyRatings.guestReviews.cleanliness!=undefined&&(e=$('<div class="prop-pbar col-12"><div class="scRating"><span>Cleanliness<\/span><span>'+i.propertyRatings.guestReviews.cleanliness+'/5<\/span><\/div><progress id="clean" class="pbar" max="5" value="'+i.propertyRatings.guestReviews.cleanliness+'"><\/progress><\/div>'),$(".dvHotRevScores").append(e)),i.propertyRatings.guestReviews.service!=undefined&&(o=$('<div class="prop-pbar col-12"><div class="scRating"><span>Service<\/span>'+i.propertyRatings.guestReviews.service+'/5<\/span><\/div><progress id="service" class="pbar" max="5" value="'+i.propertyRatings.guestReviews.service+'"><\/progress><\/div>'),$(".dvHotRevScores").append(o)),i.propertyRatings.guestReviews.comfort!=undefined&&(s=$('<div class="prop-pbar col-12"><div class="scRating"><span>Comfort<\/span>'+i.propertyRatings.guestReviews.comfort+'/5<\/span><\/div><progress id="confort" class="pbar" max="5" value="'+i.propertyRatings.guestReviews.comfort+'"><\/progress><\/div>'),$(".dvHotRevScores").append(s)),i.propertyRatings.guestReviews.condition!=undefined&&(h=$('<div class="prop-pbar col-12"><div class="scRating"><span>Condition<\/span>'+i.propertyRatings.guestReviews.condition+'/5<\/span><\/div><progress id="condition" class="pbar" max="5" value="'+i.propertyRatings.guestReviews.condition+'"><\/progress><\/div>'),$(".dvHotRevScores").append(h)),i.propertyRatings.guestReviews.location!=undefined&&(c=$('<div class="prop-pbar col-12"><div class="scRating"><span>Location<\/span>'+i.propertyRatings.guestReviews.location+'/5<\/span><\/div><progress id="location" class="pbar" max="5" value="'+i.propertyRatings.guestReviews.location+'"><\/progress><\/div>'),$(".dvHotRevScores").append(c)),i.propertyRatings.guestReviews.neighborhood!=undefined&&(l=$('<div class="prop-pbar col-12"><div class="scRating"><span>Neighborhood<\/span>'+i.propertyRatings.guestReviews.neighborhood+'/5<\/span><\/div><progress id="neighborhood" class="pbar" max="5" value="'+i.propertyRatings.guestReviews.neighborhood+'"><\/progress><\/div>'),$(".dvHotRevScores").append(l)),i.propertyRatings.guestReviews.amenities!=undefined&&(a=$('<div class="prop-pbar col-12"><div class="scRating"><span>Amenities<\/span>'+i.propertyRatings.guestReviews.amenities+'/5<\/span><\/div><progress id="amenities" class="pbar" max="5" value="'+i.propertyRatings.guestReviews.amenities+'"><\/progress><\/div>'),$(".dvHotRevScores").append(a)),ExpediaFeedbacks=i.guestReviews,expediaFeedbacks(1))},fail:function(n,t,i){console.log("something wrong: "+n+" | "+t+" | "+i)},error:function(n,t,i){console.log("something wrong: "+n.responseJSON+" | "+t+" | "+i)}});$("#revTrustYou").modal("toggle")}function expediaFeedbacks(n){var u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=ExpediaFeedbacks,i=(n-1)*10,r=i+9,f=n+1,e=ExpediaFeedbacks.length,o;r>t.length?r=t.length:"";o=Math.ceil(t.length/10);t=t.slice(i,r+1);t.length>0&&$.each(t,function(){var o=this.rating==undefined?"0":this.rating,s=this.rating==undefined?"":parseInt(this.rating)==5?"Excellent":parseInt(this.rating)==4?"Good":parseInt(this.rating)==3?"Okay":parseInt(this.rating)==2?"Poor":"Terrible",t=this.verification_source==undefined?"":this.verification_source.indexOf("Hotels.com")>=0?"https://pictures.tripmasters.com/siteassets/d/Hotels_Logo_Horizontal_RED_RGB_TM.png":this.verification_source.indexOf("Expedia")>=0?"https://pictures.tripmasters.com/siteassets/d/ExpediaLogo_Color.png":"https://pictures.tripmasters.com/siteassets/d/VRBO_Logo_Blue.png",h=this.reviewer_name=="Verified traveler"?' style="display: none;">':">",c=this.title==undefined?' style = "display: none;"> ':">",l=this.trip_reason==undefined?' style="display: none;">':">",a=this.travel_companion==undefined?' style = "display: none;" > ':">",n=new Date(this.date_submitted),v=n.getMonth(),y=n.getDate(),p=n.getFullYear(),w=this.text==undefined?"No review available":this.text,b=$('<div class="review_comment col-12"><div class="review_rating"><div><span>'+parseInt(o)+"/5 <\/span><span>"+s+'<\/span><\/div><div><img src="'+t+'" alt="'+t+'" /><\/div><\/div><div class="review_comment_name"'+h+this.reviewer_name+'<\/div><div class="review_comment_title"'+c+'"'+this.title+'"<\/div><div class="review_comment_date">'+u[v]+" "+y+", "+p+'<\/div><div class="review_comment_reason"'+l+this.trip_reason+'<\/div><div class="review_comment_companion"'+a+" Travel with: <span>"+this.travel_companion+'<\/span><\/div><div class="review_comment_text">'+w+"<\/div><\/div>"),r;$("#dshowmore").remove();$(".dvHotRevFeedbacks").append(b);i+9<e&&(r=$('<div id="dshowmore" class="review__comments-button col-12"><button type = "button" id = "show_more-comments" onclick="expediaFeedbacks('+f+');" class= "show_more-button">Show more reviews<\/button ><\/div>'),$(".dvHotRevFeedbacks").append(r))})}function createPagination(){prevInt=0;totPag=Math.ceil(hotObj.length/10);$(".totPag").text("Total: "+totPag);var n="";for(i=1;i<=totPag;i++)n=n+'<option value="'+i+'">'+i+"<\/option>";$(".selPage").html(n);$(".Page").removeClass("d-none").removeAttr("style");$(".pagePrev").parent().addClass("disabled");totPag==1?$(".pageNext").parent().addClass("disabled"):$(".pageNext").parent().removeClass("disabled")}function pagination(n,t){var i,r,u;if($(".pagePrev").parent().removeClass("disabled"),$(".pageNext").parent().removeClass("disabled"),i=t.value,n===undefined)prevInt=i-1,page=i,i==1&&$(".pagePrev").parent().addClass("disabled"),i==totPag&&$(".pageNext").parent().addClass("disabled"),$(".selPage option").each(function(){$(this).val()!=i?$(this).removeAttr("selected"):$(this).val()==i&&$(this).prop("selected","selected")});else if(i=parseInt($(".selPage").val()),n.id==="pagePrev"){if(i===0)return;r=i-1;page=r;prevInt=page-1;r==1&&$(".pagePrev").parent().addClass("disabled");$(".selPage option").each(function(){$(this).val()==i?$(this).removeAttr("selected"):$(this).val()==r&&$(this).prop("selected","selected")})}else n.id==="pageNext"&&($(".pagePrev").parent().removeClass("disabled"),page=i+1,prevInt=page-1,u=page-2,page==totPag&&$(".pageNext").parent().addClass("disabled"),$(".selPage option").each(function(){$(this).val()==i?$(this).removeAttr("selected"):$(this).val()==page&&$(this).prop("selected","selected")}));builtHotelList()}function numberRange(n){return n.between(86,100)?"EX":n.between(80,85)?"VG":n.between(75,79)?"GD":n.between(68,74)?"FR":n.between(0,67)?"NA":void 0}function expediaNoRange(n){return n.between(4.5,5)?"EX":n.between(4,4.49)?"VG":n.between(3.5,3.99)?"GD":n.between(3,3.49)?"FR":n.between(0,2.99)?"PO":void 0}function sortBy(n){sortList=hotObj;switch(!0){case/Name/i.test(n):sortList=sortList.sort(function(n,t){return t.pdL_Title<n.pdL_Title?1:t.pdL_Title>n.pdL_Title?-1:0});break;case/Rating/i.test(n):sortList=sortList.sort(function(n,t){return n.gipH_TNTournetRating<t.gipH_TNTournetRating?1:n.gipH_TNTournetRating>t.gipH_TNTournetRating?-1:0});break;case/Score/i.test(n):sortList=sortList.sort(function(n,t){return n.ghS_FinalScore<t.ghS_FinalScore?1:n.ghS_FinalScore>t.ghS_FinalScore?-1:0})}hotObj=sortList;builtHotelList();delete sortList;$("#filterSort").modal("hide")}function resetFilters(){$("#selZone").val(0);$("#hotContain").val("");$(".rat:checkbox, .rev:checkbox, .rom:checkbox, .pro:checkbox").prop("checked",!0);$(".fav:checkbox").prop("checked",!1);hotObj=initHotObj;$(".header").html("");createPagination();builtHotelList();$("#filterSort").modal("hide")}function filteronly(n){var i,e,t,u,o,f,r;n.id==="selZone"?(e="zon|"+$("#"+n.id+"").val()+"|"+$("#"+n.id+">option:selected").text(),i=e.split("|")):n.id==="butGO"?(e="nam|"+$("#hotContain").val()+"|"+$("#hotContain").val(),i=e.split("|")):i=n.id.split("|");$(".rat:checkbox, .rev:checkbox, .fav:checkbox, .rom:checkbox, .pro:checkbox").prop("checked",!1);$("#"+i[1]+"").prop("checked",!0);t=[];t=initHotObj;u="";switch(i[0]){case"rat":o={chkStar:"",_:" "};r=i[1].replace(/chkStar|_/gi,function(n){return o[n]});t=$.grep(t,function(n){return new RegExp(r).test(n.gipH_TNTournetRating.replace(/\+/g,"plus"))});u='<p class="pMHOsrtfilLabel">'+t.length+' properties match "'+r.replace("plus","+")+'"<\/p>';break;case"rev":r=i[1].replace(/chkRevw/i,"");f="";r==4.5?(t=$.grep(t,function(n){return n.ghS_FinalScore>=4.5}),f="Excellent"):"";r==4?(t=$.grep(t,function(n){return n.ghS_FinalScore.between(4,4.49)}),f="Very Good"):"";r==3.5?(t=$.grep(t,function(n){return n.ghS_FinalScore.between(3.5,3.99)}),f="Good"):"";r==3?(t=$.grep(t,function(n){return n.ghS_FinalScore.between(3,3.49)}),f="Fair"):"";r==0?(t=$.grep(t,function(n){return n.ghS_FinalScore.between(0,2.99)}),f="Poor"):"";u='<p class="pMHOsrtfilLabel">'+t.length+' properties match "'+f+'"<\/p>';break;case"fav":r=i[1];t=$.grep(t,function(n){return n.pdL_SequenceNo>49&&n.pdL_SequenceNo<60});u='<p class="pMHOsrtfilLabel">'+t.length+' properties match "Favorite"<\/p>';break;case"rom":return r=i[1].replace(/chkroom/i,""),gethotelsidsbyfacilid(r,plcID,i[2],i[3]),!1;case"pro":return r=i[1].replace(/chkprop/i,""),gethotelsidsbyfacilid(r,plcID,i[2],i[3]),!1;case"zon":r=i[1];i[1]==="0"?"":(t=$.grep(t,function(n){return i[1].match(new RegExp(n.gipH_TNZoneID))}),u='<p class="pMHOsrtfilLabel">'+t.length+' properties match "'+i[2]+'"<\/p>');break;case"nam":r=i[1];/Type/.test(i[2])?"":(t=$.grep(t,function(n){return compareAccent(n.pdL_Title).match(new RegExp(compareAccent(i[2]),"i"))}),u='<p class="pMHOsrtfilLabel">'+t.length+' properties match "'+i[2]+'"<\/p>')}hotObj=t;$(".header").html(u);createPagination();builtHotelList();delete t;$("#filterSort").modal("hide")}function applyFilters(){var f,a,v,y,p,w,t,i,d,r,g,n,k,u,b;$(".btnSortby").each(function(){$(this).attr("class")==="btn-primary"?f=this.textContent:""});switch(!0){case/Name/i.test(f):sortList="A";break;case/Rating/i.test(f):sortList="R";break;case/Score/i.test(f):sortList="S"}a=$("#selZone").val();v=[];$(".rat:checkbox").each(function(){this.checked?v.push(this.value):""});y=v.join("|");p=0;$(".fav:checkbox").is(":checked")?p=1:"";w=[];$(".rev:checkbox").each(function(){this.checked?w.push(this.value):""});t=w.join("|");i=[];$(".pro:checkbox").each(function(){this.checked?i.push(this.value):""});d=i.join("|");r=[];$(".rom:checkbox").each(function(){this.checked?r.push(this.value):""});g=r.join("|");n=[];n=hotObj;a==="0"?"":n=$.grep(n,function(n){return a.match(new RegExp(n.gipH_TNZoneID))});y===""?"":n=$.grep(n,function(n){return new RegExp(y).test(n.gipH_TNTournetRating.replace(/\s/g,"_").replace(/\+/g,"plus"))});p===0?"":n=$.grep(n,function(n){return n.pdL_SequenceNo>49&&n.pdL_SequenceNo<60});var e=[],o=[],s=[],h=[],c=[],l=[];/4.5/.test(t.replace("_","."))?(e=n,e=$.grep(e,function(n){return n.ghS_FinalScore>=4.5})):"";/4/.test(t.replace("_","."))?(o=n,o=$.grep(o,function(n){return n.ghS_FinalScore.between(4,4.49)})):"";/3.5/.test(t.replace("_","."))?(s=n,s=$.grep(s,function(n){return n.ghS_FinalScore.between(3.5,3.99)})):"";/3/.test(t.replace("_","."))?(h=n,h=$.grep(h,function(n){return n.ghS_FinalScore.between(3,3.49)})):"";/0/.test(t.replace("_","."))?(c=n,c=$.grep(c,function(n){return n.ghS_FinalScore.between(0,2.99)})):"";l=[].concat.apply([],[e,o,s,h,c]);k=[];k=l.filter(function(n,t,i){return t===i.indexOf(n)});l.length>0?n=l:"";u=[];i.length<facilPropC&&(r.length<facilRoomC?(u=[].concat.apply([],[i,r]),b=roomType):(u=i,b=propType));createPagination();u.length>0?(gethotelsidsbyfacilid(u,plcID,b,"none",n),delete n):(hotObj=n,builtHotelList(),delete n);$("#filterSort").modal("hide")}function initMap(){NAplc=$("#plcNA").val();IDplc=$("#plcID").val();var n=new google.maps.Geocoder;n.geocode({address:""+NAplc+""},function(n,t){var u,f;if(t==google.maps.GeocoderStatus.OK)ctyLatLong=n[0].geometry.location.lat()+"|"+n[0].geometry.location.lng(),objHotels=hotObj,buildBigMap(0);else{objHotels=pageHotels;var e=0,i=[],r=[];jQuery.each(objHotels,function(){i.push(Number(this.gipH_Latitude));r.push(Number(this.gipH_Longitude));e++});u=(Math.max.apply(Math,i)-Math.min.apply(Math,i))/2+Math.min.apply(Math,i);f=(Math.max.apply(Math,r)-Math.min.apply(Math,r))/2+Math.min.apply(Math,r);delete distLats;distLats=getDistanceFromLatLonInKm(Math.max.apply(Math,i),Math.max.apply(Math,r),Math.min.apply(Math,i),Math.min.apply(Math,r));delete ctyLatLong;ctyLatLong=Number(u)+"|"+Number(f);buildBigMap(0)}})}function buildBigMap(n){var c,l,a,v,i,y,t,p;if(map=null,n==0){var f=ctyLatLong.split("|"),e=f[0],o=f[1],s=new google.maps.LatLng(e,o),i=13;if(distLats!="")switch(!0){case distLats<50:i=11;break;case distLats>50&&distLats<150:i=10;break;case distLats>150:i=9}}else{var w=0,h=[],b,k,d,g,r=[],u=[];jQuery.each(objHotels,function(){r.push(Number(this.gipH_Latitude));u.push(Number(this.gipH_Longitude));w++});c=(Math.max.apply(Math,r)-Math.min.apply(Math,r))/2+Math.min.apply(Math,r);l=(Math.max.apply(Math,u)-Math.min.apply(Math,u))/2+Math.min.apply(Math,u);delete distLats;distLats=getDistanceFromLatLonInKm(Math.max.apply(Math,r),Math.max.apply(Math,u),Math.min.apply(Math,r),Math.min.apply(Math,u));delete ctyLatLong;ctyLatLong=Number(c)+"|"+Number(l);f=ctyLatLong.split("|");e=f[0];o=f[1];s=new google.maps.LatLng(e,o);a=Math.max.apply(Math,h);v=Math.min.apply(Math,h);jQuery.each([],function(n,t){bPrt=t.split("|");(bPrt[0]=v)&&(b=bPrt[1],d=bPrt[0]);(bPrt[0]=a)&&(k=bPrt[1],g=bPrt[0]);delete bPrt});i=13;switch(!0){case distLats<50:i=15;break;case distLats>50&&distLats<150:i=14;break;case distLats>150:i=13}}y={zoom:i,center:s,mapTypeControl:!0,panControl:!0,zoomControl:!0,scaleControl:!0,streetViewControl:!0,overviewMapControl:!0,rotateControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("dvMHOMap"),y);t=document.createElement("div");p=new StyleMapControl(t,""+objHotels.length+" Hotels");map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(t);t=document.createElement("div");p=new StyleMapControl(t,"Show Hotels");t.index=1;map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(t);google.maps.event.addDomListener(t,"mouseover",function(){$(this).addClass("dvHover")});google.maps.event.addDomListener(t,"mouseout",function(){$(this).removeClass("dvHover")});google.maps.event.addDomListener(t,"click",function(){$(".poi:checkbox").prop("checked",!0);buildPois()});buildHotel()}function StyleMapControl(n,t){var i=document.createElement("div"),r;i.style.backgroundColor="#fff";i.style.border="1px solid #fff";i.style.borderRadius="5px";i.style.boxShadow="0 2px 6px rgba(0,0,0,.3)";i.style.cursor="pointer";i.style.marginBottom="10px";i.style.marginRight="5px";i.style.textAlign="center";i.title=""+t+"";i.style.width="93px";n.appendChild(i);r=document.createElement("div");r.style.color="#333";r.style.fontFamily="Roboto,Arial,sans-serif";r.style.fontSize="12px";r.style.lineHeight="22px";r.style.paddingLeft="5px";r.style.paddingRight="5px";r.innerHTML=t;i.appendChild(r)}function buildHotel(){var n=0,t=[],i=$("#plcNA").val(),r=new google.maps.LatLngBounds;jQuery.each(objHotels,function(){var h,s,r,e,v,o,a,y;n++;var p=this.gipH_Latitude,w=this.gipH_Longitude,c=this.gipH_TNTournetRating.match(isNumber);c===null?c=this.gipH_TNTournetRating:"";h="";s="";switch(!0){case/Stars|Lodge|Cruise/g.test(this.gipH_TNTournetRating):s="Stars_"+this.gipH_TNTournetRating.replace(/\s/g,"_");break;case!/Stars|Lodge|Cruise/g.test(this.gipH_TNTournetRating):s=this.gipH_TNTournetRating.replace(/\s/g,"_").toLowerCase()}h='<img src="https://pictures.tripmasters.com/siteassets/d/'+s+'.gif" align="absmiddle" />';var k=new google.maps.Point(25,42),b=this.ghS_TrustYouScore,u='<div class="mapBubb">';if(u=u+h,r='<div class="dvaddHot">',r=r+"<div><b>"+this.pdL_Title+"<\/b><\/div>"+h,r=r+'<div class="jsO">',b<68){var f="",l=this.ghS_SolarToursScore,e=numberRange(this.ghS_SolarToursScore);switch(e){case"EX":f="Excellent";break;case"VG":f="Very Good";break;case"GD":f="Good";break;case"FR":f="Fair";break;case"PO":f="Poor";break;case"NA":f="No Review available";l="NA"}r=r+'<div class="jsO'+e+'"><span>'+l+"<\/span><\/div>";r=r+'<div class="jsO'+e+'txt">'+f+"<\/div>";r=r+'<br style="clear:both" />';u=u+'<div class="jsO'+e+'"><span>'+this.ghS_SolarToursScore+"<\/span><\/div>";u=u+'<br style="clear:both" />'}else{e=numberRange(this.ghS_TrustYouScore);switch(e){case"EX":f="Excellent";break;case"VG":f="Very Good";break;case"GD":f="Good";break;case"FR":f="Fair";break;case"PO":f="Poor";break;case"NA":f="No Review available";l="NA"}r=r+'<div class="jsR'+e+'"><span>'+this.ghS_TrustYouScore+"<\/span><\/div>";r=r+'<div class="jsR'+e+'txt">'+f+"<\/div>";r=r+'<br style="clear:both" />';u=u+"<div>";this.pdl_SequenceNo>49&&this.pdl_SequenceNo<60&&(u=u+'<span class="spFav">&nbsp;<\/span>');u=u+'<span class="jsS'+e+'">'+this.ghs_TrustYouScore+'<\/span><br style="clear:both" /><\/div>'}r=r+"<\/div>";this.pdl_SequenceNo>49&&this.pdl_SequenceNo<60&&(r=r+'<p class="fF"><\/p>');r=r+'<a id="'+this.pdlid+'" class="mrDet" href="/'+i+"/Hotel/"+this.pdlid+"/"+this.pdL_Title.replace(/\s/g,"_").replace("&","and")+'">more details<\/a>';r=r+"<\/div>";u=u+"<\/div>";v=/Stars|Lodge|Cruise/g.test(s)===!1?"https://pictures.tripmasters.com/siteassets/d/hotel_0star_BG.png":"https://pictures.tripmasters.com/siteassets/d/HotelStars/hotel_"+c+"stars.png";o=new google.maps.Marker({position:new google.maps.LatLng(p,w),map:map,icon:v,draggable:!1,raiseOnDrag:!0,zIndex:8998});t.push(o);a=new google.maps.InfoWindow({content:r});y=new google.maps.InfoWindow({content:r});google.maps.event.addListener(o,"mouseover",function(){a.open(map,o)});google.maps.event.addListener(o,"mouseout",function(){a.close(map,o)});google.maps.event.addListener(o,"click",function(){y.open(map,o);map.setCenter(o.getPosition())})})}var $loader="<div class='loader'><\/div>",hotObj,page=1,prevInt=0,nxtPg=1,initHotObj,facilPropC=0,facilRoomC=0,roomType="",propType="",map,distLats,isNumber=/[0-9]+/g,totPag,plcID=$("#plcID").val();$(document).ready(function(){$(".Page").hide();$(".hotelist").html($loader);init();getFacilities();$(document).on("click",".getReview",function(n){n.preventDefault();getTrustRev(this)});$(document).on("click",".pageNext, .pagePrev",function(n){n.preventDefault();pagination(this,this)});$(".selPage").change(function(){pagination(this.val,this)});$(document).on("show.bs.collapse","#dvMHOMap",function(){$("#dvMHOMap").html()==""?initMap():""});$(document).on("show.bs.collapse","#dvRoomFacil",function(){$(".btnRoomFacil").hide()});$(document).on("hidden.bs.collapse","#dvRoomFacil",function(){$(".btnRoomFacil").show()});$(document).on("show.bs.collapse","#dvHotelFacil",function(){$(".btnHotelFacil").hide()});$(document).on("hidden.bs.collapse","#dvHotelFacil",function(){$(".btnHotelFacil").show()});$(document).on("hidden.bs.modal","#revTrustYou",function(){$(".dvExpediaRev").html("")});$(document).on("click",".btnSortby",function(){$(".btnSortby").removeClass("btn-primary").addClass("btn-secondary");$(this).removeClass("btn-secondary").addClass("btn-primary");sortBy(this.textContent)});$(document).on("change","#selZone",function(){filteronly(this)});$(document).on("click",".aOnly",function(){filteronly(this)});$(document).on("click","#butGO",function(){filteronly(this)});$(document).on("click",".btnReset",function(){resetFilters()});$(document).on("click",".btnApply",function(){applyFilters()})});Number.prototype.between=function(n,t){return n<t?this>=n&&this<=t:this>=t&&this<=n};compareAccent=function(){var n=/[¹²³áàâãäåaaaÀÁÂÃÄÅAAAÆccç©CCÇÐÐèéê?ëeeeeeÈÊË?EEEEE€gGiìíîïìiiiÌÍÎÏ?ÌIIIlLnnñNNÑòóôõöoooøÒÓÔÕÖOOOØŒr®Ršs?ßŠS?ùúûüuuuuÙÚÛÜUUUUýÿÝŸžzzŽZZ]/g,t={"¹":"1","²":"2","³":"3","á":"a","à":"a","â":"a","ã":"a","ä":"a","å":"a",a:"a",a:"a",a:"a","À":"a","Á":"a","Â":"a","Ã":"a","Ä":"a","Å":"a",A:"a",A:"a",A:"a","Æ":"a",c:"c",c:"c","ç":"c","©":"c",C:"c",C:"c","Ç":"c","Ð":"d","Ð":"d","è":"e","é":"e","ê":"e","?":"e","ë":"e",e:"e",e:"e",e:"e",e:"e",e:"e","È":"e","Ê":"e","Ë":"e","?":"e",E:"e",E:"e",E:"e",E:"e",E:"e","€":"e",g:"g",G:"g",i:"i","ì":"i","í":"i","î":"i","ï":"i","ì":"i",i:"i",i:"i",i:"i","Ì":"i","Í":"i","Î":"i","Ï":"i","?":"i","Ì":"i",I:"i",I:"i",I:"i",l:"l",L:"l",n:"n",n:"n","ñ":"n",N:"n",N:"n","Ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o",o:"o",o:"o",o:"o","ø":"o","Ò":"o","Ó":"o","Ô":"o","Õ":"o","Ö":"o",O:"o",O:"o",O:"o","Ø":"o","Œ":"o",r:"r","®":"r",R:"r","š":"s",s:"s","?":"s","ß":"s","Š":"s",S:"s","?":"s","ù":"u","ú":"u","û":"u","ü":"u",u:"u",u:"u",u:"u",u:"u","Ù":"u","Ú":"u","Û":"u","Ü":"u",U:"u",U:"u",U:"u",U:"u","ý":"y","ÿ":"y","Ý":"y","Ÿ":"y","ž":"z",z:"z",z:"z","Ž":"z",Z:"z",Z:"z"};return function(i){return i.replace(n,function(n){return t[n]})}}();