function initialize(n,t){var i='<iframe style="border: 0" src = "https://www.google.com/maps/embed/v1/place?key=AIzaSyAd8S1lOSNhEy2FUzkGT34S1KCvadNLkz8&q='+n+","+t+'&zoom=14" width = "100%" height = "100%" frameborder = "0" ><\/iframe >';$("#map_canvas").html(i)}function gotoMap(){var n=$("#map_canvas").offset();n=n.top-150;$("body,html").animate({scrollTop:n},500)}function toggleClassMoreDetails(n){$("body").toggleClass("modal-pack-info-open");$("#fti-"+n+"-modal").toggleClass("is-hidden")}function otherMoreDetails(n,t){switch(t){case 2:goTo=-1}if(goTo==-1)return!1;$(".secPackInfo").each(function(){var i=$(this).attr("id"),t=i.match(isNumber);t==n?$(this).is(":visible")?($(this).slideUp(),$('p[id="down'+t+'"]').slideUp(),$('p[id="p'+t+'"]').find("span").css({transform:"rotate(45deg)",margin:"5px 10px"})):($(this).slideDown(),$('p[id="down'+t+'"]').slideDown(),$('p[id="p'+t+'"]').find("span").css({transform:"rotate(-135deg)",margin:"7px 10px"})):($(this).slideUp(),$('p[id="down'+t+'"]').slideUp(),$('p[id="p'+t+'"]').find("span").css({transform:"rotate(45deg)",margin:"5px 10px"}))});t===1?relPackCallt4(n):""}function relPackCallt4(n){var t="",r="",u="dvCom"+n,f="dvpkInf"+n,e="dvRel"+n;$.ajax({type:"GET",url:SiteName+"/Api/Packages/sqlRelPacks/"+n,contentType:"application/json; charset=utf-8",dataType:"text",success:function(o){if(msg=o,msg!==""){for(t='<div class="txt_grayLight11" style="padding:5px 3px;">Related Package<\/div><div style="padding:2px 2px;" align="left">',r='<div class="txt_11" style="padding:3px 3px 5px 3px;"><b>For more choices, combine cities found in this itinerary:<\/b><\/div><div style="padding:2px 2px;" align="left">',strPrts=msg.split("@"),i=0;i<=strPrts.length-1;i++)echP=strPrts[i].split("|"),t=t+'<span style="float:left; margin-right:5px; margin-bottom:3px;">',t=t+'<a href="'+SiteName+"/"+echP[0].replace(/\s/g,"_").toLowerCase()+'/vacations" style="margin-right:10px">',t=t+'<span class="txt_grayLight11">',t=t+"<u>"+echP[0]+" ("+echP[1]+")<\/u>",t=t+"<\/span><\/a><\/span>",echP[2]!=5&&(r=r+'<span style="float:left; margin-right:5px; margin-bottom:3px;"><a style="cursor:pointer;" class="falsecheckdop" id="falsedop'+echP[3]+'" >'+echP[0]+"<\/a>",r=r+'<input type="checkbox" name="dop'+echP[3]+'" id="dop'+echP[3]+'" style="display:none" value="'+echP[3]+"|"+echP[0]+'"/>',r=r+"<\/span>");t=t+'<br style="clear:both"/><\/div>';r=r+'<br style="clear:both"/><\/div>';$("#"+e+"").html(t);$("#"+u+"").html(r);$("#dvWait"+n+"").hide();$("#dvWait"+n+"").html("");$("#"+f+"").slideDown();activeCckBx("frm"+n)}},error:function(t){$("#dvWait"+n+"").html(t.responseText)}})}function activeCckBx(n){$("#"+n+" input:checkbox").each(function(){this.checked?$("#false"+this.id+"").addClass("falsecheckeddop"):$("#false"+this.id+"").removeClass("falsecheckeddop")});var t;$("#"+n+" .falsecheckdop").click(function(){return this.id.indexOf("falsedot")>-1?t=this.id.replace("falsedot",""):this.id.indexOf("false")>-1?t=this.id.replace("false",""):"",$(this).hasClass("falsecheckeddop")?($(this).removeClass("falsecheckeddop"),$("#"+t+"").removeAttr("checked")):($(this).addClass("falsecheckeddop"),$("#"+t+"").attr("checked",!0)),$(this.hash).trigger("click"),!1})}function getProdImg(n){var r=[],t="",i;$(".dvhotelImgs").append('<div id="dvImgLoad" class="dvImgLoad"><img src="https://pictures.tripmasters.com/siteassets/d/ajax-loader.gif"/><br/>loading ...<br/><\/div>');i={};i.url=SiteName+"/Api/Hotel/ImagesByProdID/"+n;i.type="GET";i.contentType="application/json; charset=utf-8";i.dataType="json";i.success=function(n){r=n;t='<ul class="pgwSlideshow">';jQuery.each(r,function(){var n=this.imG_Title,i;console.log(n);i=n.split("-").join(" ");t=t+" <li>";t=t+' <img src="https://pictures.tripmasters.com'+this.imG_Path_URL.toLowerCase()+'" data-description="'+i+'">';t=t+" <\/li>"});t=t+"<\/ul>";$("#dvImgLoad").remove();$(".dvhotelImgs").append(t);photos()};i.error=function(n){console.log(n)};$.ajax(i)}function photos(){$(".pgwSlideshow").pgwSlideshow({displayList:!0,autoSlide:!1,maxheight:500,adaptiveHeight:!1,verticalCentering:!0})}function openMask(){var n=$(document).height(),t=$(window).width();mskdisplay==!1?($(".dvMask").css({width:t,height:n}),$(".dvMask").fadeIn(100),$(".dvMask").fadeTo("fast",.7),mskdisplay=!0):($(".dvMask").css({width:0,height:0}),$(".dvMask").fadeOut(100),$(".dvMask").fadeTo("fast",0),mskdisplay=!1)}function getReview(n){openModal();$.ajax({type:"POST",url:SiteName+"/Api/AWSExpediaReviewHotel",data:JSON.stringify({Id:parseInt(n.id)}),dataType:"json",crossDomain:!0,contentType:"application/json; charset=utf-8",success:function(t){var i=t,r,u,f;if($(".modal__container").html(`<h2 class="modal__title"></h2>
                                         <div class="modal__flex">
                                             <div class="modal__left"></div>
                                             <div class="modal__right"></div>
                                         </div>`),i.propertyRatings==null)r='<img src = "https://pictures.tripmasters.com/siteassets/d/no-review-icon.png" alt = "NoReview"><\/div>',$(".modal__title").html(r);else{$(".modal__title").html(n.pdL_Title);u=i.propertyRatings.guestReviews.overall>=4.5?"Excellent":i.propertyRatings.guestReviews.overall>=4?"Very good":i.propertyRatings.guestReviews.overall>=3.5?"Good":"Okay";f=$('<div style="display: inline-flex;"><div class="GuestRevOverAllMark">'+i.propertyRatings.guestReviews.overall+'<\/div><div style="margin-left:5px;"><div class="GuestRevOverAllText">'+u+'<\/div><div class="GuestRevOverAllNo">'+i.propertyRatings.guestReviews.count+" reviews<\/div><\/div><\/div>");$(".modal__left").append(f);const{cleanliness:t,service:r,comfort:e,condition:o,location:s,neighborhood:h,amenities:c}=i.propertyRatings.guestReviews,l=[{value:t,name:"Cleanliness"},{value:r,name:"Service"},{value:e,name:"Comfort"},{value:o,name:"Condition"},{value:s,name:"Location"},{value:h,name:"Neighborhood"},{value:c,name:"Amenities"}],a=l.map(function({value:t,name:n}){if(t){const i=Math.round(t*20);return`<div>
                                    <div style="display: flex;justify-content: space-between;">
                                        <div>${n}</div>
                                        <div>${t}/5</div>
                                    </div>
                                    <div class="meter"><span style="width:${i}%;"></span></div>
                               </div>`}}).join("");$(".modal__left").append(a);ExpediaFeedbacks=i.guestReviews;expediaFeedbacks(1)}},fail:function(n,t,i){console.log("something wrong: "+n+" | "+t+" | "+i)},error:function(n,t,i){console.log("something wrong: "+n.responseJSON+" | "+t+" | "+i)}});$("#revTrustYou").modal("toggle")}function expediaFeedbacks(n){var u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=ExpediaFeedbacks,i=(n-1)*10,r=i+9,f=n+1,e=ExpediaFeedbacks.length,o;r>t.length?r=t.length:"";o=Math.ceil(t.length/10);t=t.slice(i,r+1);t.length>0&&$.each(t,function(){var o=this.rating==undefined?"0":this.rating,s=this.rating==undefined?"":parseInt(this.rating)==5?"Excellent":parseInt(this.rating)==4?"Good":parseInt(this.rating)==3?"Okay":parseInt(this.rating)==2?"Poor":"Terrible",t=this.verification_source==undefined?"":this.verification_source.indexOf("Hotels.com")>=0?"https://pictures.tripmasters.com/siteassets/d/Hotels_Logo_Horizontal_RED_RGB_TM.png":this.verification_source.indexOf("Expedia")>=0?"https://pictures.tripmasters.com/siteassets/d/ExpediaLogo_Color.png":"https://pictures.tripmasters.com/siteassets/d/VRBO_Logo_Blue.png",h=this.reviewer_name=="Verified traveler"?' style="display: none;">':">",c=this.title==undefined?' style = "display: none;"> ':">",l=this.trip_reason==undefined?' style="display: none;">':">",a=this.travel_companion==undefined?' style = "display: none;" > ':">",n=new Date(this.date_submitted),v=n.getMonth(),y=n.getDate(),p=n.getFullYear(),w=this.text==undefined?"No review available":this.text,b=$('<div class="review_comment col-12"><div class="review_rating"><div><span>'+parseInt(o)+"/5 <\/span><span>"+s+'<\/span><\/div><div><img src="'+t+'" alt="'+t+'" /><\/div><\/div><div class="review_comment_name"'+h+this.reviewer_name+'<\/div><div class="review_comment_title"'+c+'"'+this.title+'"<\/div><div class="review_comment_date">'+u[v]+" "+y+", "+p+'<\/div><div class="review_comment_reason"'+l+this.trip_reason+'<\/div><div class="review_comment_companion"'+a+" Travel with: <span>"+this.travel_companion+'<\/span><\/div><div class="review_comment_text">'+w+"<\/div><\/div>"),r;$("#dshowmore").remove();$(".modal__right").append(b);i+9<e&&(r=$('<div id="dshowmore" class="review__comments-button col-12"><button type = "button" id = "show_more-comments" onclick="expediaFeedbacks('+f+');" class= "show_more-button">Show more reviews<\/button ><\/div>'),$(".modal__right").append(r))})}function openModal(){$(".modal__container").html('<div style="padding:15px 15px;text-align:center;"><img src="https://pictures.tripmasters.com/siteassets/d/wait.gif"><\/div>');$("#modal").removeClass("is-hidden");$("body").addClass("modal-open")}function closeModal(){$("#modal").addClass("is-hidden");$("body").removeClass("modal-open")}function findPackst4(n){var h,t,o,s,r,c,u,f,e;for($("#"+n+" #allID").val()!=""&&$("#"+n+" #allID").val(""),$("#"+n+" #allNA").val()!=""&&$("#"+n+" #allNA").val(""),h=n,t=$("#"+h+"").serialize(),t=t.substring(0,t.indexOf("&__RequestVerificationToken")),c="",e=0,t=t.replace(/\+/g," "),t=t.replace(/\%7C/g,"|"),o=t.split("&"),i=0;i<o.length;i++)s=o[i].split("="),s[1]!=""&&(e=e+1,r=s[1].split("|"),e>1?(u=u+","+r[0],f=f+"_-_"+r[1].replace(/\s/g,"-")):(u=r[0],f=r[1].replace(/\s/g,"-")));if(u==undefined){alert("Please check at least one box. Thanks!");return}$("#allID").val(u);$("#allNA").val(f);window.location.href=SiteName+"/"+f.toLowerCase()+"/find-packages"}var mycarousel_itemList=[],goTo,mskdisplay;$(document).ready(function(){document.getElementById("map_canvas")!=null&&initialize(Latitude,Longitude);getProdImg(hotelID);$(".dvRevClose").click(function(){$(".dvReviewInfo").html("");$("#dvRevContainer").toggle();openMask()});$(".locateMap").click(function(){gotoMap()});$(".modal__close").click(function(){closeModal()});$(document).on("hidden.bs.modal","#revTrustYou",function(){$(".dvExpediaRev").html("")})});goTo=0;mskdisplay=!1,function(n){n.fn.pgwSlider=function(t){var o={mainClassName:"pgwSlider",listPosition:"right",selectionMode:"click",transitionEffect:"fading",autoSlide:!0,displayList:!0,displayControls:!1,touchControls:!0,verticalCentering:!1,adaptiveHeight:!1,maxHeight:null,beforeSlide:null,afterSlide:null,adaptiveDuration:200,transitionDuration:500,intervalDuration:3e3},i;if(this.length==0)return this;if(this.length>1)return this.each(function(){n(this).pgwSlider(t)}),this;i=this;i.plugin=this;i.data=[];i.config={};i.currentSlide=0;i.slideCount=0;i.resizeEvent=null;i.intervalEvent=null;i.touchFirstPosition=null;i.transitionInProgress=!1;i.window=n(window);var c=function(){return i.config=n.extend({},o,t),h(),i.config.autoSlide&&u(),!0},l=function(n){var t={},s=n.find("a").attr("href"),r,u,f,i,e,o;return typeof s!="undefined"&&s!=""&&(t.link=s,r=n.find("a").attr("target"),typeof r!="undefined"&&r!=""&&(t.linkTarget=r)),u=n.find("img").attr("src"),typeof u!="undefined"&&u!=""&&(t.thumbnail=u),f=n.find("img").attr("data-large-src"),typeof f!="undefined"&&f!=""&&(t.image=f),i=n.find("span").text(),typeof i!="undefined"&&i!=""&&i!=null?t.title=i:(e=n.find("img").attr("alt"),typeof e!="undefined"&&e!=""&&(t.title=e)),o=n.find("img").attr("data-description"),typeof o!="undefined"&&o!=""&&(t.description=o),t},f=function(t,r){return i.config.maxHeight&&(i.plugin.width()>480&&t>i.config.maxHeight?t=i.config.maxHeight:i.plugin.width()<=480&&t+i.plugin.find(".ps-list").height()>i.config.maxHeight&&(t=i.config.maxHeight-i.plugin.find(".ps-list").height())),clearTimeout(i.resizeEvent),i.resizeEvent=setTimeout(function(){var u=(t-(i.slideCount-1)*6)/i.slideCount,f=100/i.slideCount;i.plugin.find(".ps-list > li").css({width:f+"%"});typeof r!="undefined"&&r&&i.config.maxHeight==null?typeof i.plugin.find(".ps-current").animate=="function"?i.plugin.find(".ps-current").animate({height:t},i.config.adaptiveDuration,function(){i.plugin.find(".ps-list > li").animate({height:u},i.config.adaptiveDuration)}):(i.plugin.find(".ps-current").css("height",t),i.plugin.find(".ps-list > li").css("height",u)):(i.plugin.find(".ps-current").css("height",t),i.plugin.find(".ps-list > li").css("height",u));i.config.verticalCentering&&(i.plugin.find(".ps-list > li").each(function(){var t;u>50&&n(this).find("img").height()>u?(t=Math.round((n(this).find("img").height()-u)/2),n(this).find("img").css("margin-top",-t)):n(this).find("img").height()<u?(t=Math.round((u-n(this).find("img").height())/2),n(this).find("img").css("margin-top",t)):n(this).find("img").css("margin-top","")}),i.plugin.find(".ps-current > ul > li").each(function(){var r=n(this).css("display")=="none"?!1:!0,i;r||n(this).show();n(this).show().find("img").height()>t?(i=Math.round((n(this).find("img").height()-t)/2),n(this).find("img").css("margin-top",-i)):n(this).show().find("img").height()<t?(i=Math.round((t-n(this).find("img").height())/2),n(this).find("img").css("margin-top",i)):n(this).find("img").css("margin-top","");r||n(this).hide()}))},100),!0},s=function(){return i.plugin.width()<=480?i.plugin.addClass("narrow").removeClass("wide"):i.plugin.addClass("wide").removeClass("narrow"),!0},h=function(){if(i.plugin.removeClass(i.config.mainClassName).addClass("ps-list"),i.plugin.wrap('<div class="'+i.config.mainClassName+'"><\/div>'),i.plugin=i.plugin.parent(),i.plugin.prepend('<div class="ps-current"><ul><\/ul><span class="ps-caption"><\/span><\/div>'),i.slideCount=i.plugin.find(".ps-list > li").length,i.slideCount==0)throw new Error("PgwSlider - No slider item has been found");i.config.displayControls&&i.slideCount>1&&(i.plugin.find(".ps-current").prepend('<span class="ps-prev"><span class="ps-prevIcon"><\/span><\/span>'),i.plugin.find(".ps-current").append('<span class="ps-next"><span class="ps-nextIcon"><\/span><\/span>'),i.plugin.find(".ps-current .ps-prev").click(function(){i.previousSlide()}),i.plugin.find(".ps-current .ps-next").click(function(){i.nextSlide()}));i.config.displayList||(i.plugin.find(".ps-current").css("width","100%"),i.plugin.find(".ps-list").hide());var t=1;if(i.plugin.find(".ps-list > li").each(function(){var u=l(n(this)),f;u.id=t;i.data.push(u);n(this).addClass("elt_"+u.id);u.title&&(n(this).find("span").length==1?n(this).find("span").text()==""&&n(this).find("span").text(u.title):n(this).find("img").after("<span>"+u.title+"<\/span>"));f=n('<li class="elt_'+t+'"><\/li>');u.image?f.html('<img src="'+u.image+'" alt="'+(u.title?u.title:"")+'">'):u.thumbnail&&f.html('<img src="'+u.thumbnail+'" alt="'+(u.title?u.title:"")+'">');u.link&&f.html('<a href="'+u.link+'"'+(u.linkTarget?' target="'+u.linkTarget+'"':"")+">"+f.html()+"<\/a>");i.plugin.find(".ps-current > ul").append(f);i.config.selectionMode=="mouseOver"&&i.config.transitionEffect=="fading"?(n(this).css("cursor","default").click(function(n){n.preventDefault()}).bind("mouseenter",function(){r(u.id)}),n(this).find("a").css("cursor","default")):n(this).css("cursor","pointer").click(function(n){n.preventDefault();r(u.id)});t++}),i.config.listPosition=="left"&&i.plugin.addClass("listOnTheLeft"),i.config.autoSlide)i.plugin.on("mouseenter",function(){clearInterval(i.intervalEvent);i.intervalEvent=null}).on("mouseleave",function(){u()});r(1);i.plugin.find(".ps-current > ul > li.elt_1 img").on("load",function(){s();var n=i.plugin.find(".ps-current > ul > li.elt_1 img").height();f(n);i.window.resize(function(){s();var n=i.plugin.find(".ps-current > ul > li.elt_"+i.currentSlide+" img").height();f(n,i.config.adaptiveHeight)})});if(i.config.touchControls&&i.slideCount>1){i.plugin.find(".ps-current").on("touchstart",function(n){try{n.originalEvent.touches[0].clientX&&i.touchFirstPosition==null&&(i.touchFirstPosition=n.originalEvent.touches[0].clientX)}catch(n){i.touchFirstPosition=null}});i.plugin.find(".ps-current").on("touchmove",function(n){try{n.originalEvent.touches[0].clientX&&i.touchFirstPosition!=null&&(n.originalEvent.touches[0].clientX>i.touchFirstPosition+50?(i.touchFirstPosition=null,i.previousSlide()):n.originalEvent.touches[0].clientX<i.touchFirstPosition-50&&(i.touchFirstPosition=null,i.nextSlide()))}catch(n){i.touchFirstPosition=null}});i.plugin.find(".ps-current").on("touchend",function(){i.touchFirstPosition=null})}return!0},e=function(n){var t="",r;return n.title&&(t+="<b>"+n.title+"<\/b>"),n.description&&(t!=""&&(t+="<br>"),t+=n.description),t!=""&&(n.link&&(t='<a href="'+n.link+'"'+(n.linkTarget?' target="'+n.linkTarget+'"':"")+">"+t+"<\/a>"),typeof i.plugin.find(".ps-caption").fadeIn=="function"?(i.plugin.find(".ps-caption").html(t),i.plugin.find(".ps-caption").fadeIn(i.config.transitionDuration/2)):(i.plugin.find(".ps-caption").html(t),i.plugin.find(".ps-caption").show())),i.config.displayControls&&(typeof i.plugin.find(".ps-current > .ps-prev").fadeIn=="function"?i.plugin.find(".ps-current > .ps-prev, .ps-current > .ps-next").fadeIn(i.config.transitionDuration/2):i.plugin.find(".ps-current > .ps-prev, .ps-current > .ps-next").show()),typeof i.config.afterSlide=="function"&&i.config.afterSlide(n.id),i.config.adaptiveHeight&&(r=i.plugin.find(".ps-current .elt_"+n.id+" img").height(),f(r,!0)),!0},a=function(t){var f=i.plugin.find(".ps-current > ul"),r,u;return i.plugin.find(".ps-list > li").css("opacity","0.6"),i.plugin.find(".ps-list > li.elt_"+t.id).css("opacity","1"),f.find("li").not(".elt_"+i.currentSlide).not(".elt_"+t.id).each(function(){typeof n(this).stop=="function"&&n(this).stop();n(this).css("position","").css("z-index",1).hide()}),i.currentSlide>0&&(r=f.find(".elt_"+i.currentSlide),typeof r.animate!="function"&&(r.animate=function(n,t,i){r.css(n);i&&i()}),typeof r.stop=="function"&&r.stop(),r.css("position","absolute").animate({opacity:0},i.config.transitionDuration,function(){r.css("position","").css("z-index",1).hide()})),i.currentSlide=t.id,u=f.find(".elt_"+t.id),typeof u.animate!="function"&&(u.animate=function(n,t,i){u.css(n);i&&i()}),typeof u.stop=="function"&&u.stop(),u.css("position","absolute").show().animate({opacity:1},i.config.transitionDuration,function(){u.css("position","").css("z-index",2).show();e(t)}),!0},v=function(n,t){var o=i.plugin.find(".ps-current > ul"),f,s,h,r,u;if(typeof t=="undefined"&&(t="left"),i.currentSlide==0)o.find(".elt_1").css({position:"",left:"",opacity:1,"z-index":2}).show(),i.plugin.find(".ps-list > li.elt_1").css("opacity","1"),e(n);else{if(i.transitionInProgress)return!1;i.transitionInProgress=!0;f=o.width();t=="left"?(s=-f,h=f):(s=f,h=-f);r=o.find(".elt_"+i.currentSlide);typeof r.animate!="function"&&(r.animate=function(n,t,i){r.css(n);i&&i()});r.css("position","absolute").animate({left:s},i.config.transitionDuration,function(){r.css("position","").css("z-index",1).css("left","").css("opacity",0).hide()});u=o.find(".elt_"+n.id);typeof u.animate!="function"&&(u.animate=function(n,t,i){u.css(n);i&&i()});u.css("position","absolute").css("left",h).css("opacity",1).show().animate({left:0},i.config.transitionDuration,function(){u.css("position","").css("left","").css("z-index",2).show();i.transitionInProgress=!1;i.plugin.find(".ps-list > li").css("opacity","0.6");i.plugin.find(".ps-list > li.elt_"+n.id).css("opacity","1");e(n)})}return i.currentSlide=n.id,!0},r=function(n,t,r){if(n==i.currentSlide)return!1;var f=i.data[n-1];if(typeof f=="undefined")throw new Error("PgwSlider - The element "+n+" is undefined");return typeof r=="undefined"&&(r="left"),typeof i.config.beforeSlide=="function"&&i.config.beforeSlide(n),typeof i.plugin.find(".ps-caption").fadeOut=="function"?i.plugin.find(".ps-caption, .ps-prev, .ps-next").fadeOut(i.config.transitionDuration/2):i.plugin.find(".ps-caption, .ps-prev, .ps-next").hide(),i.config.transitionEffect=="sliding"?v(f,r):a(f),typeof t!="undefined"&&i.config.autoSlide&&u(),!0},u=function(){return clearInterval(i.intervalEvent),i.slideCount>1&&i.config.autoSlide&&(i.intervalEvent=setInterval(function(){var n;n=i.currentSlide+1<=i.slideCount?i.currentSlide+1:1;r(n)},i.config.intervalDuration)),!0};return i.startSlide=function(){return i.config.autoSlide=!0,u(),!0},i.stopSlide=function(){return i.config.autoSlide=!1,clearInterval(i.intervalEvent),!0},i.getCurrentSlide=function(){return i.currentSlide},i.getSlideCount=function(){return i.slideCount},i.displaySlide=function(n){return r(n,!0),!0},i.nextSlide=function(){var n;return n=i.currentSlide+1<=i.slideCount?i.currentSlide+1:1,r(n,!0,"left"),!0},i.previousSlide=function(){var n;return n=i.currentSlide-1>=1?i.currentSlide-1:i.slideCount,r(n,!0,"right"),!0},i.destroy=function(t){return clearInterval(i.intervalEvent),typeof t!="undefined"?(i.plugin.find(".ps-list > li").each(function(){n(this).attr("style",null).removeClass().css("cursor","").unbind("click").unbind("mouseenter");n(this).find("a").css("cursor","");n(this).find("img").attr("style",null)}),i.plugin.find(".ps-list").addClass(i.config.mainClassName).removeClass("ps-list"),i.plugin.find(".ps-current").unwrap().remove(),i.hide()):i.parent().remove(),i.plugin=null,i.data=[],i.config={},i.currentSlide=0,i.slideCount=0,i.resizeEvent=null,i.intervalEvent=null,i.touchFirstPosition=null,i.transitionInProgress=!1,i.window=null,!0},i.reload=function(t){return i.destroy(!0),i=this,i.plugin=this,i.window=n(window),i.plugin.show(),i.config=n.extend({},o,t),h(),i.config.autoSlide&&u(),!0},c(),this}}(window.Zepto||window.jQuery),function(n){n.fn.pgwSlideshow=function(t){var c={mainClassName:"pgwSlideshow",transitionEffect:"sliding",displayList:!0,displayControls:!0,touchControls:!0,autoSlide:!1,beforeSlide:!1,afterSlide:!1,maxHeight:null,adaptiveDuration:200,transitionDuration:500,intervalDuration:3e3},i;if(this.length==0)return this;if(this.length>1)return this.each(function(){n(this).pgwSlideshow(t)}),this;i=this;i.plugin=this;i.config={};i.data=[];i.currentSlide=0;i.slideCount=0;i.resizeEvent=null;i.intervalEvent=null;i.touchFirstPosition=null;i.touchListLastPosition=!1;i.window=n(window);var v=function(){return i.config=n.extend({},c,t),a(),i.config.displayList&&o(),i.window.resize(function(){clearTimeout(i.resizeEvent);i.resizeEvent=setTimeout(function(){e();var n=i.plugin.find(".ps-current > ul > li.elt_"+i.currentSlide+" img").height();f(n);i.config.displayList&&(o(),h())},100)}),i.config.autoSlide&&u(),!0},f=function(n){return i.config.maxHeight&&n+i.plugin.find(".ps-list").height()>i.config.maxHeight&&(n=i.config.maxHeight-i.plugin.find(".ps-list").height()),typeof i.plugin.find(".ps-current").animate=="function"?i.plugin.find(".ps-current").stop().animate({height:n},i.config.adaptiveDuration,function(){i.config.maxHeight&&i.plugin.find(".ps-current > ul > li img").css("max-height",n+"px")}):(i.plugin.find(".ps-current").css("height",n),i.config.maxHeight&&i.plugin.find(".ps-current > ul > li img").css("max-height",n+"px")),!0},l=function(){var t=0;return i.plugin.show(),i.plugin.find(".ps-list > ul > li").show().each(function(){t+=n(this).width()}),i.plugin.find(".ps-list > ul").width(t),!0},e=function(){return i.plugin.width()<=480?i.plugin.addClass("narrow").removeClass("wide"):i.plugin.addClass("wide").removeClass("narrow"),!0},a=function(){if(i.plugin.removeClass("pgwSlideshow").removeClass(i.config.mainClassName),i.plugin.wrap('<div class="ps-list"><\/div>'),i.plugin=i.plugin.parent(),i.plugin.wrap('<div class="'+i.config.mainClassName+'"><\/div>'),i.plugin=i.plugin.parent(),i.plugin.prepend('<div class="ps-current"><ul><\/ul><span class="ps-caption"><\/span><\/div>'),i.slideCount=i.plugin.find(".ps-list > ul > li").length,i.slideCount==0)throw new Error("pgwSlideshow - No slider item has been found");if(i.slideCount>1&&(i.config.displayControls&&(i.plugin.find(".ps-current").prepend('<span class="ps-prev"><span class="ps-prevIcon"><\/span><\/span>'),i.plugin.find(".ps-current").append('<span class="ps-next"><span class="ps-nextIcon"><\/span><\/span>'),i.plugin.find(".ps-current .ps-prev").click(function(){i.previousSlide()}),i.plugin.find(".ps-current .ps-next").click(function(){i.nextSlide()})),i.config.touchControls)){i.plugin.find(".ps-current").on("touchstart",function(n){try{n.originalEvent.touches[0].clientX&&i.touchFirstPosition==null&&(i.touchFirstPosition=n.originalEvent.touches[0].clientX)}catch(n){i.touchFirstPosition=null}});i.plugin.find(".ps-current").on("touchmove",function(n){try{n.originalEvent.touches[0].clientX&&i.touchFirstPosition!=null&&(n.originalEvent.touches[0].clientX>i.touchFirstPosition+50?(i.touchFirstPosition=null,i.previousSlide()):n.originalEvent.touches[0].clientX<i.touchFirstPosition-50&&(i.touchFirstPosition=null,i.nextSlide()))}catch(n){i.touchFirstPosition=null}});i.plugin.find(".ps-current").on("touchend",function(){i.touchFirstPosition=null})}var t=1;if(i.plugin.find(".ps-list > ul > li").each(function(){var u=y(n(this)),f;u.id=t;i.data.push(u);n(this).addClass("elt_"+u.id);n(this).wrapInner('<span class="ps-item'+(t==1?" ps-selected":"")+'"><\/span>');f=n('<li class="elt_'+t+'"><\/li>');u.image?f.html('<img src="'+u.image+'" alt="'+(u.title?u.title:"")+'">'):u.thumbnail&&f.html('<img src="'+u.thumbnail+'" alt="'+(u.title?u.title:"")+'">');u.link&&f.html('<a href="'+u.link+'"'+(u.linkTarget?' target="'+u.linkTarget+'"':"")+">"+f.html()+"<\/a>");i.plugin.find(".ps-current > ul").append(f);n(this).css("cursor","pointer").click(function(n){n.preventDefault();r(u.id)});t++}),i.config.displayList?(l(),i.plugin.find(".ps-list").prepend('<span class="ps-prev"><span class="ps-prevIcon"><\/span><\/span>'),i.plugin.find(".ps-list").append('<span class="ps-next"><span class="ps-nextIcon"><\/span><\/span>'),i.plugin.find(".ps-list").show()):i.plugin.find(".ps-list").hide(),i.config.autoSlide)i.plugin.on("mouseenter",function(){clearInterval(i.intervalEvent);i.intervalEvent=null}).on("mouseleave",function(){u()});i.plugin.find(".ps-current > ul > li").hide();r(1);i.plugin.find(".ps-current > ul > li.elt_1 img").on("load",function(){e();var n=i.plugin.find(".ps-current > ul > li.elt_1 img").height();f(n)});return e(),i.plugin.show(),!0},y=function(n){var t={},o=n.find("a").attr("href"),i,r,u,f,e;return typeof o!="undefined"&&o!=""&&(t.link=o,i=n.find("a").attr("target"),typeof i!="undefined"&&i!=""&&(t.linkTarget=i)),r=n.find("img").attr("src"),typeof r!="undefined"&&r!=""&&(t.thumbnail=r),u=n.find("img").attr("data-large-src"),typeof u!="undefined"&&u!=""&&(t.image=u),f=n.find("img").attr("alt"),typeof f!="undefined"&&f!=""&&(t.title=f),e=n.find("img").attr("data-description"),typeof e!="undefined"&&e!=""&&(t.description=e),t},s=function(n){var t="",r;return n.title&&(t+="<b>"+n.title+"<\/b>"),n.description&&(t!=""&&(t+="<br>"),t+=n.description),t!=""&&(n.link&&(t='<a href="'+n.link+'"'+(n.linkTarget?' target="'+n.linkTarget+'"':"")+">"+t+"<\/a>"),typeof i.plugin.find(".ps-caption").fadeIn=="function"?(i.plugin.find(".ps-caption").html(t),i.plugin.find(".ps-caption").fadeIn(i.config.transitionDuration/2)):(i.plugin.find(".ps-caption").html(t),i.plugin.find(".ps-caption").show())),i.plugin.find(".ps-list > ul > li .ps-item").removeClass("ps-selected"),i.plugin.find(".ps-list > ul > li.elt_"+n.id+" .ps-item").addClass("ps-selected"),i.config.displayList&&(o(),h()),i.config.displayControls&&(typeof i.plugin.find(".ps-current > .ps-prev").fadeIn=="function"?i.plugin.find(".ps-current > .ps-prev, .ps-current > .ps-next").fadeIn(i.config.transitionDuration/2):i.plugin.find(".ps-current > .ps-prev, .ps-current > .ps-next").show()),typeof i.config.afterSlide=="function"&&i.config.afterSlide(n.id),r=i.plugin.find(".ps-current .elt_"+n.id+" img").height(),f(r,!0),!0},p=function(t){var f=i.plugin.find(".ps-current > ul"),r,u;return f.find("li").not(".elt_"+i.currentSlide).not(".elt_"+t.id).each(function(){typeof n(this).stop=="function"&&n(this).stop();n(this).css("position","").css("z-index",1).hide()}),i.currentSlide>0&&(r=f.find(".elt_"+i.currentSlide),typeof r.animate!="function"&&(r.animate=function(n,t,i){r.css(n);i&&i()}),typeof r.stop=="function"&&r.stop(),r.css("position","absolute").animate({opacity:0},i.config.transitionDuration,function(){r.css("position","").css("z-index",1).hide()})),i.currentSlide=t.id,u=f.find(".elt_"+t.id),typeof u.animate!="function"&&(u.animate=function(n,t,i){u.css(n);i&&i()}),typeof u.stop=="function"&&u.stop(),u.css("position","absolute").show().animate({opacity:1},i.config.transitionDuration,function(){u.css("position","").css("z-index",2).css("display","block");s(t)}),!0},w=function(n,t){var e=i.plugin.find(".ps-current > ul"),f,o,h,r,u;if(typeof t=="undefined"&&(t="left"),i.currentSlide==0)e.find(".elt_1").css({position:"",left:"",opacity:1,"z-index":2}).show(),i.plugin.find(".ps-list > li.elt_1").css("opacity","1"),s(n);else{if(i.transitionInProgress)return!1;i.transitionInProgress=!0;f=e.width();t=="left"?(o=-f,h=f):(o=f,h=-f);r=e.find(".elt_"+i.currentSlide);typeof r.animate!="function"&&(r.animate=function(n,t,i){r.css(n);i&&i()});r.css("position","absolute").animate({left:o},i.config.transitionDuration,function(){r.css("position","").css("z-index",1).css("left","").css("opacity",0).hide()});u=e.find(".elt_"+n.id);typeof u.animate!="function"&&(u.animate=function(n,t,i){u.css(n);i&&i()});u.css("position","absolute").css("left",h).css("opacity",1).show().animate({left:0},i.config.transitionDuration,function(){u.css("position","").css("left","").css("z-index",2).show();i.transitionInProgress=!1;s(n)})}return i.currentSlide=n.id,!0},r=function(n,t,r){if(n==i.currentSlide)return!1;var f=i.data[n-1];if(typeof f=="undefined")throw new Error("pgwSlideshow - The element "+n+" is undefined");return typeof r=="undefined"&&(r="left"),typeof i.config.beforeSlide=="function"&&i.config.beforeSlide(n),typeof i.plugin.find(".ps-caption").fadeOut=="function"?i.plugin.find(".ps-caption, .ps-prev, .ps-next").fadeOut(i.config.transitionDuration/2):i.plugin.find(".ps-caption, .ps-prev, .ps-next").hide(),i.config.transitionEffect=="sliding"?w(f,r):p(f),typeof t!="undefined"&&i.config.autoSlide&&u(),!0},u=function(){return clearInterval(i.intervalEvent),i.slideCount>1&&i.config.autoSlide&&(i.intervalEvent=setInterval(function(){var n;n=i.currentSlide+1<=i.slideCount?i.currentSlide+1:1;r(n)},i.config.intervalDuration)),!0},o=function(){var e,f;if(!i.config.displayList)return!1;l();var r=i.plugin.find(".ps-list"),t=r.width(),n=i.plugin.find(".ps-list > ul"),u=n.width();if(u>t){if(n.css("margin","0 45px"),f=parseInt(n.css("margin-left")),e=parseInt(n.css("margin-right")),t-=f+e,r.find(".ps-prev").show().unbind("click").click(function(){var f=parseInt(n.css("left")),r=f+t;f==0?r=-(u-t):r>0&&(r=0);typeof n.animate=="function"?n.animate({left:r},i.config.transitionDuration):n.css("left",r)}),r.find(".ps-next").show().unbind("click").click(function(){var e=parseInt(n.css("left")),r=e-t,f=-(u-t);e==f?r=0:r<f&&(r=f);typeof n.animate=="function"?n.animate({left:r},i.config.transitionDuration):n.css("left",r)}),i.config.touchControls){i.plugin.find(".ps-list > ul").on("touchmove",function(t){var e,f,o,h,u;try{if(t.originalEvent.touches[0].clientX&&(e=i.touchListLastPosition==!1?0:i.touchListLastPosition,nbPixels=i.touchListLastPosition==!1?1:Math.abs(e-t.originalEvent.touches[0].clientX),i.touchListLastPosition=t.originalEvent.touches[0].clientX,f="",e>t.originalEvent.touches[0].clientX?f="left":e<t.originalEvent.touches[0].clientX&&(f="right")),o=parseInt(n.css("left")),f=="left"){var s=r.width(),c=n.width(),l=parseInt(n.css("margin-left")),a=parseInt(n.css("margin-right"));s-=l+a;h=-(c-s);u=o-nbPixels;u>h&&n.css("left",u)}else f=="right"&&(u=o+nbPixels,u<0?n.css("left",u):n.css("left",0))}catch(t){i.touchListLastPosition=!1}});i.plugin.find(".ps-list > ul").on("touchend",function(){i.touchListLastPosition=!1})}}else f=parseInt((t-u)/2),n.css("left",0).css("margin-left",f),r.find(".ps-prev").hide(),r.find(".ps-next").hide(),i.plugin.find(".ps-list > ul").unbind("touchstart touchmove touchend");return!0},h=function(){var t=i.plugin.find(".ps-list").width(),n=i.plugin.find(".ps-list > ul"),f=n.width(),h=parseInt(n.css("margin-left")),c=parseInt(n.css("margin-right")),u;t-=h+c;var e=Math.abs(parseInt(n.css("left"))),o=e+t,r=i.plugin.find(".ps-list .ps-selected").position().left,s=r+i.plugin.find(".ps-list .ps-selected").width();return(r<e||s>o||f>t&&o>s)&&(u=-(f-t),-r<u?n.css("left",u):n.css("left",-r)),!0};return i.startSlide=function(){return i.config.autoSlide=!0,u(),!0},i.stopSlide=function(){return i.config.autoSlide=!1,clearInterval(i.intervalEvent),!0},i.getCurrentSlide=function(){return i.currentSlide},i.getSlideCount=function(){return i.slideCount},i.displaySlide=function(n){return r(n,!0),!0},i.nextSlide=function(){var n;return n=i.currentSlide+1<=i.slideCount?i.currentSlide+1:1,r(n,!0,"left"),!0},i.previousSlide=function(){var n;return n=i.currentSlide-1>=1?i.currentSlide-1:i.slideCount,r(n,!0,"right"),!0},i.destroy=function(t){return clearInterval(i.intervalEvent),typeof t!="undefined"?(i.plugin.find(".ps-list > ul > li").each(function(){n(this).attr("style",null).removeClass().unbind("click");n(this).html(n(this).find("span").html())}),i.plugin.find(".ps-current").remove(),i.plugin.find(".ps-list").find(".ps-prev, .ps-next").remove(),i.plugin.find(".ps-list > ul").addClass(i.config.mainClassName).attr("style",""),i.plugin.find(".ps-list > ul").unwrap().unwrap(),i.hide()):i.parent().parent().remove(),i.plugin=null,i.data=[],i.config={},i.currentSlide=0,i.slideCount=0,i.resizeEvent=null,i.intervalEvent=null,i.touchFirstPosition=null,i.window=null,!0},i.reload=function(t){return i.destroy(!0),i=this,i.plugin=this,i.window=n(window),i.plugin.show(),i.config=n.extend({},c,t),a(),i.window.resize(function(){clearTimeout(i.resizeEvent);i.resizeEvent=setTimeout(function(){e();var n=i.plugin.find(".ps-current > ul > li.elt_"+i.currentSlide+" img").css("max-height","").height();f(n);i.config.displayList&&(o(),h())},100)}),i.config.autoSlide&&u(),!0},v(),this}}(window.Zepto||window.jQuery);