var mycarousel_itemList = new Array; function initialize(e, s) { var i = '<iframe style="border: 0" src = "https://www.google.com/maps/embed/v1/place?key=AIzaSyAd8S1lOSNhEy2FUzkGT34S1KCvadNLkz8&q=' + e + "," + s + '&zoom=14" width = "100%" height = "100%" frameborder = "0" ></iframe >'; $("#map_canvas").html(i) } function gotoMap() { var e = $("#map_canvas").offset(); e = e.top - 150, $("body,html").animate({ scrollTop: e }, 500) } function getProdImg(e) { var s = [], i = ""; $(".dvhotelImgs").append('<div id="dvImgLoad" class="dvImgLoad"><img src="https://pictures.tripmasters.com/siteassets/d/ajax-loader.gif"/><br/>loading ...<br/></div>'); var a = {}; a.url = SiteName + "/api/Hotel/ImagesByProdID/" + e, a.type = "GET", a.contentType = "application/json; charset=utf-8", a.dataType = "json", a.success = function (e) { s = e, i = '<ul class="pgwSlideshow">', jQuery.each(s, function (e) { var s = this.imG_Title; console.log(s); var a = s.split("-"); i = (i += " <li>") + ' <img src="https://pictures.tripmasters.com' + this.imG_Path_URL.toLowerCase() + '" data-description="' + a[1] + '">', i += " </li>" }), i += "</ul>", $("#dvImgLoad").remove(), $(".dvhotelImgs").append(i), photos() }, a.error = function (e) { console.log(e) }, $.ajax(a) } function photos() { $(".pgwSlideshow").pgwSlideshow({ displayList: !0, autoSlide: !1, maxheight: 500, adaptiveHeight: !1, verticalCentering: !0 }) } $(document).ready(function () { null != document.getElementById("map_canvas") && initialize(Latitude, Longitude), getProdImg(hotelID), $(".dvRevClose").click(function () { $(".dvReviewInfo").html(""), $("#dvRevContainer").toggle(), openMask() }), $(".plocateMap").click(function () { gotoMap() }), $(document).on("hidden.bs.modal", "#revTrustYou", function () { $(".dvExpediaRev").html("") }) }); var mskdisplay = !1; function openMask() { var e = $(document).height(), s = $(window).width(); 0 == mskdisplay ? ($(".dvMask").css({ width: s, height: e }), $(".dvMask").fadeIn(100), $(".dvMask").fadeTo("fast", .7), mskdisplay = !0) : ($(".dvMask").css({ width: 0, height: 0 }), $(".dvMask").fadeOut(100), $(".dvMask").fadeTo("fast", 0), mskdisplay = !1) } function getReview(e) { $.ajax({ type: "POST", url: SiteName + "/Api/AWSExpediaReviewHotel", data: JSON.stringify({ Id: parseInt(e.id) }), dataType: "json", crossDomain: !0, contentType: "application/json; charset=utf-8", success: function (s) { var i = s; if ($(".dvExpediaRev").append('<p class="pMHOhotrevtitle col-12 col-sm-12">' + e.dataset.title + "</p>"), null == i.propertyRatings) { var a = $('<div><img src = "/latin/images/no-review-icon.png" alt = "NoReview"></div>'); $(".dvExpediaRev").append(a) } else { $(".dvExpediaRev").append('<div class="dvHotRevScores col-sm-5 col-12 pl-1 pr-1"></div>'), $(".dvExpediaRev").append('<div class="dvHotRevFeedbacks col-sm-7 col-12 pl-1 pr-1"></div>'); var t = i.propertyRatings.guestReviews.overall >= 4.5 ? "Excelent" : i.propertyRatings.guestReviews.overall >= 4 ? "Very good" : i.propertyRatings.guestReviews.overall >= 3.5 ? "Good" : "Okay", o = $('<div class="review_comment_overall col-12"><span>' + i.propertyRatings.guestReviews.overall + "/5 " + t + "</span><span>" + i.propertyRatings.guestReviews.count + " reviews</span></div>"); if ($(".dvHotRevScores").append(o), null != i.propertyRatings.guestReviews.cleanliness) { var n = $('<div class="prop-pbar col-12"><div class="scRating"><span>Cleanliness</span><span>' + i.propertyRatings.guestReviews.cleanliness + '/5</span></div><progress id="clean" class="pbar" max="5" value="' + i.propertyRatings.guestReviews.cleanliness + '"></progress></div>'); $(".dvHotRevScores").append(n) } if (null != i.propertyRatings.guestReviews.service) { var r = $('<div class="prop-pbar col-12"><div class="scRating"><span>Service</span>' + i.propertyRatings.guestReviews.service + '/5</span></div><progress id="service" class="pbar" max="5" value="' + i.propertyRatings.guestReviews.service + '"></progress></div>'); $(".dvHotRevScores").append(r) } if (null != i.propertyRatings.guestReviews.comfort) { var p = $('<div class="prop-pbar col-12"><div class="scRating"><span>Comfort</span>' + i.propertyRatings.guestReviews.comfort + '/5</span></div><progress id="confort" class="pbar" max="5" value="' + i.propertyRatings.guestReviews.comfort + '"></progress></div>'); $(".dvHotRevScores").append(p) } if (null != i.propertyRatings.guestReviews.condition) { var d = $('<div class="prop-pbar col-12"><div class="scRating"><span>Condition</span>' + i.propertyRatings.guestReviews.condition + '/5</span></div><progress id="condition" class="pbar" max="5" value="' + i.propertyRatings.guestReviews.condition + '"></progress></div>'); $(".dvHotRevScores").append(d) } if (null != i.propertyRatings.guestReviews.location) { var l = $('<div class="prop-pbar col-12"><div class="scRating"><span>Location</span>' + i.propertyRatings.guestReviews.location + '/5</span></div><progress id="location" class="pbar" max="5" value="' + i.propertyRatings.guestReviews.location + '"></progress></div>'); $(".dvHotRevScores").append(l) } if (null != i.propertyRatings.guestReviews.neighborhood) { var v = $('<div class="prop-pbar col-12"><div class="scRating"><span>Neighborhood</span>' + i.propertyRatings.guestReviews.neighborhood + '/5</span></div><progress id="neighborhood" class="pbar" max="5" value="' + i.propertyRatings.guestReviews.neighborhood + '"></progress></div>'); $(".dvHotRevScores").append(v) } if (null != i.propertyRatings.guestReviews.amenities) { var c = $('<div class="prop-pbar col-12"><div class="scRating"><span>Amenities</span>' + i.propertyRatings.guestReviews.amenities + '/5</span></div><progress id="amenities" class="pbar" max="5" value="' + i.propertyRatings.guestReviews.amenities + '"></progress></div>'); $(".dvHotRevScores").append(c) } ExpediaFeedbacks = i.guestReviews, expediaFeedbacks(1) } openMask() }, fail: function (e, s, i) { console.log("something wrong: " + e + " | " + s + " | " + i) }, error: function (e, s, i) { console.log("something wrong: " + e.responseJSON + " | " + s + " | " + i) } }), $("#revTrustYou").modal("toggle") } function expediaFeedbacks(e) { var s = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], i = ExpediaFeedbacks, a = 10 * (e - 1), t = a + 9, o = e + 1, n = ExpediaFeedbacks.length; t > i.length && (t = i.length); Math.ceil(i.length / 10); (i = i.slice(a, t + 1)).length > 0 && $.each(i, function () { var e = null == this.rating ? "0" : this.rating, i = null == this.rating ? "" : 5 == parseInt(this.rating) ? "Excellent" : 4 == parseInt(this.rating) ? "Good" : 3 == parseInt(this.rating) ? "Okay" : 2 == parseInt(this.rating) ? "Poor" : "Terrible", t = null == this.verification_source ? "" : this.verification_source.indexOf("Hotels.com") >= 0 ? SiteName + "/images/Hotels_Logo_Horizontal_RED_RGB_TM.png" : this.verification_source.indexOf("Expedia") >= 0 ? SiteName + "/images/ExpediaLogo_Color.png" : "/images/VRBO_Logo_Blue.png", r = "Verified traveler" == this.reviewer_name ? ' style="display: none;">' : ">", p = null == this.title ? ' style = "display: none;"> ' : ">", d = null == this.trip_reason ? ' style="display: none;">' : ">", l = null == this.travel_companion ? ' style = "display: none;" > ' : ">", v = new Date(this.date_submitted), c = v.getMonth(), g = v.getDate(), m = v.getFullYear(), u = null == this.text ? "No review available" : this.text, R = $('<div class="review_comment col-12"><div class="review_rating"><div><span>' + parseInt(e) + "/5 </span><span>" + i + '</span></div><div><img src="' + t + '" alt="' + t + '" /></div></div><div class="review_comment_name"' + r + this.reviewer_name + '</div><div class="review_comment_title"' + p + '"' + this.title + '"</div><div class="review_comment_date">' + s[c] + " " + g + ", " + m + '</div><div class="review_comment_reason"' + d + this.trip_reason + '</div><div class="review_comment_companion"' + l + " Travel with: <span>" + this.travel_companion + '</span></div><div class="review_comment_text">' + u + "</div></div>"); if ($("#dshowmore").remove(), $(".dvHotRevFeedbacks").append(R), a + 9 < n) { var h = $('<div id="dshowmore" class="review__comments-button col-12"><button type = "button" id = "show_more-comments" onclick="expediaFeedbacks(' + o + ');" class= "show_more-button">Show more reviews</button ></div>'); $(".dvHotRevFeedbacks").append(h) } }) }