function setBubbles(){$("#bubble1").length>0&&$("#bubble1").tooltip({position:{my:"center bottom-20",at:"center top",using:function(n,t){$(this).css(n);$("<div>").addClass("arrow").addClass(t.vertical).addClass(t.horizontal).appendTo(this)}},content:'<div class="Text_Arial12" style="margin:10px"><b>Destination:<\/b><br>First city may be different than arrival airport.<\/div>'});$("#bubble2").length>0&&$("#bubble2").tooltip({position:{my:"center bottom-20",at:"center top",using:function(n,t){$(this).css(n);$("<div>").addClass("arrow").addClass(t.vertical).addClass(t.horizontal).appendTo(this)}},content:'<div class="Text_Arial12" style="margin:10px"><b>Arrival Date:<\/b><br>Hotel check-in date for your selected city. May be different than flight departure date.<\/div>'});$("#bubble3").length>0&&$("#bubble3").tooltip({position:{my:"center bottom-20",at:"center top",using:function(n,t){$(this).css(n);$("<div>").addClass("arrow").addClass(t.vertical).addClass(t.horizontal).appendTo(this)}},content:'<div class="Text_Arial12" style="margin:10px"><b>Flex Stay:<\/b><br>Adjust number of nights as you wish.<\/div>'})}function getPriceHistory(){$.ajax({type:"Get",url:SiteName+"/Api/Packages/PricesHistory/"+packID,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){priceGuide=n},error:function(n){alert(n.responseText+" = error")}})}function readCookVal(){var a,v,y,f,e,o,n,s,h,t,p,l,u,w;if(backCook=jQuery.extendedjsoncookie("getCookieValueDecoded","bpBack"),backCook!=null||backCook!=undefined)if(v=jQuery.extendedjsoncookie("getCookieVariable","bpBack","Pkgid"),v!=packID)Cookies.set("bpBack","",{expires:-1}),backCook=jQuery.extendedjsoncookie("getCookieValueDecoded","bpBack");else{if(y=Number(jQuery.extendedjsoncookie("getCookieVariable","bpBack","hwMnyCtyfrm"))+1,f=jQuery.extendedjsoncookie("getCookieVariable","bpBack","InDate1"),$("#InDate1").val(f),$("#InDateMob1").val(f),e=jQuery.extendedjsoncookie("getCookieVariable","bpBack","sDepCity"),$("#sDepCity").attr("value",e),$("#iDepCityTxtMob").attr("value",e),o=jQuery.extendedjsoncookie("getCookieVariable","bpBack","iDepCity"),$("#iDepCity").val(o),$("#iDepCityMob").val(o),n=jQuery.extendedjsoncookie("getCookieVariable","bpBack","Rooms"),$("#Rooms").val(n),$("#iRoom").val(n),rom=n,s=jQuery.extendedjsoncookie("getCookieVariable","bpBack","iRoomsAndPax"),$('#iRoomsAndPax option[value="'+s+'"]').attr("selected","selected"),s.indexOf("Other")>-1&&showDivRoom(n),h=jQuery.extendedjsoncookie("getCookieVariable","bpBack","iAdults"),$("#iAdults").val(h),$('#AiAdults option[value="'+h+'"]').attr("selected","selected"),t=jQuery.extendedjsoncookie("getCookieVariable","bpBack","iChildren"),$("#iChildren option[value='"+t+"']").attr("selected","selected"),t>0)for(c=1;c<=t;c++)$("#dvR1child"+c+"").show(),p=jQuery.extendedjsoncookie("getCookieVariable","bpBack","iChild"+c+""),$("#iChild"+c+"").val(p);if(n>1)for(r=2;r<=n;r++)if(l=jQuery.extendedjsoncookie("getCookieVariable","bpBack","Room"+r+"_iAdults"),$("#Room"+r+"_iAdults").val(l),$("#ARoom"+r+'_iAdults option[value="'+l+'"]').attr("selected","selected"),u=jQuery.extendedjsoncookie("getCookieVariable","bpBack","Room"+r+"_iChildren"),$("#Room"+r+"_iChildren option[value='"+u+"']").attr("selected","selected"),u>0)for(c=1;c<=u;c++)$("#dvR"+r+"child"+c+"").show(),w=jQuery.extendedjsoncookie("getCookieVariable","bpBack","Room"+r+"_iChild"+c),$("#Room"+r+"_iChild"+c+"").val(w);for(i=1;i<=y;i++)a=jQuery.extendedjsoncookie("getCookieVariable","bpBack","StayNite"+i+""),$("#StayNite"+i+" option[value='"+a+"']").attr("selected","selected");Cookies.set("bpBack","",{expires:-1})}}function newDest(){$.ajax({type:"Get",url:SiteName+"/Api/Packages/depCity",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){citiesAll=n;doit()}});$("#sDepCity, #iDepCityTxtMob").click(function(){$("#sDepCity, #iDepCityTxtMob").select()})}function doit(){$("#sDepCity, #iDepCityTxtMob").autocomplete({autoFocus:!0,minLength:3,select:function(n,t){return $("#sDepCity, #iDepCityTxtMob").val(t.item.label),$("#iDepCity, #iDepCityMob").val(t.item.id),!1},open:function(){$(".ui-autocomplete").css("width","300px")},response:function(n,t){if(t.content.length===0)return alert("No valid airport found"),!1},source:$.map(citiesAll,function(n){return{value:n.plC_Title+" - "+n.plC_Code,label:n.plC_Title+" - "+n.plC_Code,id:n.plcid}})}).data("ui-autocomplete")._renderItem=function(n,t){var i=$("<span><\/span>").text(t.label);return highlightText(this.term,i),$("<li><\/li>").attr("data-value",t.value).append(i).appendTo(n)}}function stayChange(n,t){$("#"+n+"").val(t)}function selCabin(){$("#BCabin").val($("#Cabin").val())}function buildPics(){let n="";$.ajax({type:"GET",url:SiteName+"/Api/Packages/PicsForPacks/"+packID,contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){objPics=t;objImgs=$.grep(objPics,function(n){return n.imG_ImageType==="P0"});picTotal=objPics.length;for(let t=0;t<3;t++)n+=`<li class="images-section__item">
                             <img src="https://pictures.tripmasters.com${objPics[t].imG_500Path_URL.toLowerCase()}" id="bigpicture-${Number(t+1)}" alt="${objPics[t].imG_500Path_URL}" title="${objPics[t].imG_Title}" onerror="this.src = 'https://pictures.tripmasters.com/siteassets/d/no-image.jpg'"/>
                           </li>`;$(".images-section__list").html(n);$(".images-section__item img").click(function(){moreMediaB(this.id,this.src,this.title,this.alt)});objPics[picTotal-1].imG_500Path_URL&&($("#bigMap").html(`<img src="https://pictures.tripmasters.com${objPics[picTotal-1].imG_500Path_URL.toLowerCase()}" alt="${objPics[picTotal-1].imG_500Path_URL}" title="${objPics[picTotal-1].imG_Title}" onerror="this.src='https://pictures.tripmasters.com/siteassets/d/no-image.jpg'"/>`),$("#seeAllImg, #bigMap").click(function(){seeAllImages("picture-1",objPics[0].imG_500Path_URL.toLowerCase(),objPics[0].imG_Title,objPics[0].imG_500Path_URL)}))},error:function(n){console.error(n.responseText)}})}function opentabSection(n){var t=n.replace("dvTab",""),i;$('li[id*="dvTab"]').removeClass("selected");$('section[id*="dvShw"]').removeClass("selected");$("#dvTab"+t).addClass("selected");$("#dvShw"+t).addClass("selected");newdvCnt="dvCont"+t;switch(t){case"View":$(".history-section, .pay-section, .trip-section").show();break;case"Itin":$(".history-section, .pay-section, .trip-section").hide();$("#cmsIti").val()==0||callCMS($("#cmsIti").val(),newdvCnt);break;case"Acco":$(".history-section, .pay-section, .trip-section").hide();break;case"Acti":$(".history-section, .pay-section, .trip-section").hide();break;case"Tran":$(".history-section, .pay-section, .trip-section").hide();$("#cmsTra").val()==0||callCMS($("#cmsTra").val(),newdvCnt);break;case"Cou":$(".history-section, .pay-section, .trip-section").hide();break;case"FAQ":$(".history-section, .pay-section, .trip-section").hide();$("#cmsFaq").val()==0||callCMS($("#cmsFaq").val(),newdvCnt);break;case"Feed":$(".history-section, .pay-section, .trip-section").hide();i=$("#PackCustFeedIds");i.length>0?openFeedsContainer("P",$("#Pkgid").val()):$("input[id^='CoutryFeedIds']").each(function(){if(i=$(this).val(),i.length>0){var n=$(this).attr("id").replace("CoutryFeedIds","");return openFeedsContainer("C",n),!1}});break;case"Price":$(".history-section, .pay-section, .trip-section").hide();calreload()}}function openFeedbacksSection(){selectMobTab("mbTabFeed");const n=document.querySelector("#dvShwFeed .feedbacks-section__wrapper");n.scrollIntoView()}function scrollToCalendar(){const n=document.getElementById("formMobT21");n.scrollIntoView()}function changePic(n,t,i,r){let u="https://pictures.tripmasters.com"+r.toLowerCase();r==="none"&&(u=t);$(".img-modal__list li img").removeClass();$("#"+n).addClass("selected");currentPic=n;$("#dvFstPic").html(`<img src="${u}" id="${n.replace("O","B")}" alt="${r}" title=${i}" />`);$("#dvPicNa").html(i);const f=$('.img-modal__list img[id*="picture"]');for(let t=0;t<f.length;t++)if(f[t].id===n){$("#totalCurrent").html(`${t+1}`);break}}function moreMediaClose(){$("#dvmediaPopUp").addClass("is-hidden");$("body").removeClass("modal-open")}function nextPicture(){const n=$('.img-modal__list img[id*="picture"]');for(let t=0;t<n.length;t++)if(n[t].id===currentPic){const i=t+1<n.length?t+1:0;changePic(n[i].id,n[i].src,n[i].title,n[i].alt);break}}function prevPicture(){const n=$('.img-modal__list img[id*="picture"]');for(let t=0;t<n.length;t++)if(n[t].id===currentPic){const i=t-1<0?n.length-1:t-1;changePic(n[i].id,n[i].src,n[i].title,n[i].alt);break}}function priceBubble(n,t){$("#"+n+"").tooltip({position:{my:"center bottom-20",at:"center top",using:function(n,t){$(this).css(n);$("<div>").addClass("arrowgrey").addClass(t.vertical).addClass(t.horizontal).appendTo(this)}},content:function(){var n=t.split("|");return'<div class="Text_Arial12" style="margin:10px">This packages is recommended for '+n[0]+".<br/><br/><b>Customize it <\/b> "+n[1]+"<\/div>"}})}function nextPriceHistory(){const t=$(".history-section__item"),n=Math.ceil(t.length/7);pagePriceHistory<n&&($(".history-section__list").animate({top:-385*pagePriceHistory+"px"}),pagePriceHistory++,$("#prevPriceHistory").removeClass("disabled"),pagePriceHistory===n&&($("#prevPriceHistory").removeClass("disabled"),$("#nextPriceHistory").addClass("disabled")))}function prevPriceHistory(){pagePriceHistory>1&&($(".history-section__list").animate({top:-385*(pagePriceHistory-1)+385+"px"}),pagePriceHistory--,$("#nextPriceHistory").removeClass("disabled"),pagePriceHistory===1&&($("#prevPriceHistory").addClass("disabled"),$("#nextPriceHistory").removeClass("disabled")))}function seeMorePriceHistory(){const n=$(".history-section__item");n.removeClass("visually-hidden");$("#seeMorePriceHistory").addClass("is-hidden");$("#closeMorePriceHistory").removeClass("is-hidden")}function closeMorePriceHistory(){const n=$(".history-section__item");n.addClass("visually-hidden");n.slice(0,7).removeClass("visually-hidden");$("#seeMorePriceHistory").removeClass("is-hidden");$("#closeMorePriceHistory").addClass("is-hidden")}function openModal(){$(".modal__container").html('<div style="padding:15px 15px;text-align:center;"><img src="https://pictures.tripmasters.com/siteassets/d/wait.gif"><\/div>');$("#modal").removeClass("is-hidden");$("body").addClass("modal-open")}function closeModal(){$("#modal").addClass("is-hidden");$("body").removeClass("modal-open");$(".overview-section__calendar").children().length===0&&hidePopUpInfo("dvPopCal")}function popUpImagesNav(){let n="",t=0;for(let i=0;i<picTotal;i++)objPics[i].imG_ImageType==="P0"?(t++,n=n+`<li>
                                 <img id="picture-${t}" src="https://pictures.tripmasters.com${objPics[i].imG_Path_URL.toLowerCase()}" alt="${objPics[i].imG_500Path_URL}" title="${objPics[i].imG_Title}" onerror="this.src = 'https://pictures.tripmasters.com/siteassets/d/no-image.jpg'"/>
                               </li>`):(objPics[i].imG_ImageType==="M0"||objPics[i].imG_ImageType==="M1")&&(t++,n=`<li>
                        <img id="picture-${t}" src="https://pictures.tripmasters.com${objPics[i].imG_Path_URL.toLowerCase()}" alt="${objPics[i].imG_500Path_URL}" title="${objPics[i].imG_Title}" onerror="this.src = 'https://pictures.tripmasters.com/siteassets/d/no-image.jpg'"/>
                      </li>`+n);$("#dvThuPic").html(n);$("#total").html(`/${picTotal}`);$(".img-modal__list li img").click(function(){changePic(this.id,this.src,this.title,this.alt)})}function moreMediaB(n,t,i,r){popUpImagesNav();changePic(n.slice(3,n.length),t,i,r);$("#dvmediaPopUp").removeClass("is-hidden");$("body").addClass("modal-open")}function seeAllImages(n,t,i,r){popUpImagesNav();changePic(n,t,i,r);$("#dvmediaPopUp").removeClass("is-hidden");$("body").addClass("modal-open")}function showRelatedItineraries(n){openModal();let t,i="";$.ajax({type:"POST",url:SiteName+"/Api/PackInfoXID/"+n,contentType:"application/json; charset=utf-8",dataType:"text",success:function(n){t=n.split("|");const o=`${SiteName}/${plcNA.replace(/\s/g,"_").toLowerCase()}/${t[1].replace(/\s/g,"_").toLowerCase()}/package-${t[0].replace('"',"")}`,s=Number(t[6])+Math.ceil(t[6]/2),r=t[9].split("<\/br>").slice(0,-1);let u="";for(let n=0;n<r.length;n++)u+=`<li>${r[n]}</li>`;let f="";formatCurrency(t[4])!=="$0"&&(f+=`<p class="related-modal__price">${t[6]} ${t[3]==1?"to"+s:""} nights from <span>${formatCurrency(t[4])}</span></p>`);let e="";t[7]>0&&(e+=`<a class="related-modal__review-link" href="${feedLink}">Customer feedback (${t[7]})</a>`);i=`<div class="related-modal">
                          <h2>${t[1]}</h2>
                          <p class="related-modal__description">
                              <img src="https://pictures.tripmasters.com${t[7].toLowerCase()}" align="left" />
                              ${t[2]}
                          </p>
                          <div class="related-modal__wrapper">
			                  <div class="related-modal__includes">
                                  <p>This ${t[6]} night sample itinerary includes:</p>
                                  <ul>${u}</ul>
                              </div>
                              <div class="related-modal__customize">
                                  ${f}
                                  <a class="related-modal__customize-link" href="${o}">Customize It</a>
                                  ${e}
                              </div>
                         </div>
                     </div>`;$(".modal__container").html(i)},error:function(n){$(".modal__container").html(n.responseText)}})}function selectMobTab(n){var i,t;if($("#"+n).hasClass("selected"))$("#"+n).removeClass("selected"),$("#"+n+"~ .first-container").hide("slow");else{$("#"+n).addClass("selected");$("#"+n+"~ .first-container").show("slow");i=n.replace("mbTab","");newdvCnt="dvCont"+i;switch(i){case"Itin":$("#cmsIti").val()==0||callCMS($("#cmsIti").val(),newdvCnt);break;case"Tran":$("#cmsTra").val()==0||callCMS($("#cmsTra").val(),newdvCnt);break;case"FAQ":$("#cmsFaq").val()==0||callCMS($("#cmsFaq").val(),newdvCnt);break;case"Feed":t=$("#PackCustFeedIds");t.length>0?openFeedsContainer("P",$("#Pkgid").val()):$("input[id^='CoutryFeedIds']").each(function(){if(t=$(this).val(),t.length>0){var n=$(this).attr("id").replace("CoutryFeedIds","");return openFeedsContainer("C",n),!1}})}}}function showThisItineraries(n){openModal();$.ajax({type:"GET",url:SiteName+"/Api/Packages/SamplePrices/"+n,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){const i=n;let t="";jQuery.each(i,function(){t+=`<div class="history-modal">
                                <p class="history-modal__title">${this.samNTS} nights. from ${this.samPRC} w/air, hotel and air taxes *</p>
                                <p class="history-modal__description"><b>This sample price includes ALL air taxes & fuel surcharges:</b> priced within the past 7 days for arrival on ${this.samDTE}, departure from ${this.samAIP}. Choose your own departure city and dates.</div>
                                <p class="history-modal__subtitle">This ${this.samNTS} night sample itinerary includes:</p>
                                <ul class="history-modal__list">${this.samITIN}</ul>
                           </div>`});$(".modal__container").html(t)},error:function(n){$(".modal__container").html(n.responseText)}})}function showStaggerPaymentsInfo(){openModal();const n=`<div class="modal-stagger-payment">
                       <h2>Stagger your Payments:</h2>
                       <p>If you are traveling more than 60 days from now and your package is more than $2,000, you will be able to stagger your payments in several installments!</p>
                   </div>`;$(".modal__container").html(n)}function bbdates(n){builFixDatediv(fixDatesdiv,n);objPOS=$("#"+n+"").offset();$("#dvFixDates").show();$("#dvFixDates").offset({left:objPOS.left-0,top:objPOS.top+20})}function builFixDatediv(n,t){var f,e,s="",r="",u=n.split(","),o;for(i=0;i<u.length;i++)s!=dateFormat(u[i],"mmm")&&(s=dateFormat(u[i],"mmm"),o=0,r=i==0?'<div style="padding:3px 1px;">':r+'<\/div><div style="padding:3px 1px;">',r=r+" "+s+" "+dateFormat(u[i],"yyyy")+": "),o==0?(f="'"+dateFormat(u[i],"mm/dd/yyyy")+"'",e="'"+t+"'",r=r+'<span id="fxDates" onclick="changeDaysLenght1('+f+","+e+')">'+dateFormat(u[i],"dd")+"<\/span>"):(f="'"+dateFormat(u[i],"mm/dd/yyyy")+"'",e="'"+t+"'",r=r+', <span id="fxDates" onclick="changeDaysLenght1('+f+","+e+')">'+dateFormat(u[i],"dd")+"<\/span>"),o=o+1;r=r+"<\/div>";$("#dvFixDates").html(r);setTimeout(function(){$("#dvFixDates").hide()},7e3)}function changeDaysLenght1(n,t){$("#"+t+"").val(n)}function chkValid(n,t){console.log(n);var i=$("#"+n+"").offset();console.log(i);$("#divError").html(t);$("#divError").show();t.indexOf("All infants")!=-1?$("#divError").offset({left:i.left-160,top:i.top-50}):$("#divError").offset({left:i.left-85,top:i.top-50});$("#"+n+"").val("");$("#"+n+"").focus();$("#"+n+"").select();setTimeout("$('#divError').hide()",2e3)}function xSelChildren(n,t,i,r){r.indexOf("B")>-1?$("#"+r.replace("B","")+"").val(n):$("#B"+r+"").val(n);rom>1&&(hwMCh=Number($("#AiChildren").val())+Number($("#ARoom2_iChildren").val())+Number($("#ARoom3_iChildren").val()));i==0?($("#spChAg").hide(),$("#BspChAg").hide()):i==1&&(n==0?hwMCh==0&&($("#spChAg").hide(),$("#BspChAg").hide()):($("#spChAg").show(),$("#BspChAg").show()));switch(t){case 1:for(s=1;s<=4;s++)s<n||s==n?($("#dvR1child"+s+"").show(),$("#BdvR1child"+s+"").show()):($("#dvR1child"+s+"").hide(),$("#BdvR1child"+s+"").hide(),$("#dvR1child"+s+"").val(""),$("#BdvR1child"+s+"").val("")),$("#iChild"+s+"").val(""),$("#BiChild"+s+"").val("");break;case 2:case 3:for(s=1;s<=4;s++)s<n||s==n?($("#dvR"+t+"child"+s+"").show(),$("#BdvR"+t+"child"+s+"").show()):($("#dvR"+t+"child"+s+"").hide(),$("#BdvR"+t+"child"+s+"").hide()),$("#Room"+t+"_iChild"+s+"").val(""),$("#BRoom"+t+"_iChild"+s+"").val("")}}function showDivRoom(n){for(n==0&&($("#dvPaxLabel").hide(),$("#BdvPaxLabel").hide()),i=1;i<=3;i++)i<=n?($("#dvPaxLabel").show(),$("#BdvPaxLabel").show(),$("#dvRoom"+i+"").show(),$("#BdvRoom"+i+"").show()):($("#dvRoom"+i+"").hide(),$("#BdvRoom"+i+"").hide())}function cleanValues(n){$("#spChAg").hide();$("#BspChAg").hide();var t=[];switch(n){case 0:t=[1,2,3];t.forEach(function(n){for(s=1;s<=4;s++)$("#dvR"+n+"child"+s+"").hide(),$("#BdvR"+n+"child"+s+"").hide(),$("#Room"+n+"_iChild"+s+"").val(""),$("#BRoom"+n+"_iChild"+s+"").val(""),$("#AiAdults option").removeAttr("selected"),$("#iChildren option").removeAttr("selected")});break;case 1:t=[2,3];t.forEach(function(n){for(s=1;s<=4;s++)$("#dvR"+n+"child"+s+"").hide(),$("#BdvR"+n+"child"+s+"").hide(),$("#Room"+n+"_iChild"+s+"").val(""),$("#BRoom"+n+"_iChild"+s+"").val("")});break;case 2:t=[1,3];t.forEach(function(n){for(s=1;s<=4;s++)$("#dvR"+n+"child"+s+"").hide(),$("#BdvR"+n+"child"+s+"").hide(),$("#Room"+n+"_iChild"+s+"").val(""),$("#BRoom"+n+"_iChild"+s+"").val("")});break;case 3:t=[1,2];t.forEach(function(n){for(s=1;s<=4;s++)$("#dvR"+n+"child"+s+"").hide(),$("#BdvR"+n+"child"+s+"").hide(),$("#Room"+n+"_iChild"+s+"").val(""),$("#BRoom"+n+"_iChild"+s+"").val("")})}$("input[id='iChild1']").val("");$("input[id='iChild2']").val("");$("input[id='iChild3']").val("");$("input[id='iChild4']").val("")}function changePaxByRoom(n,t){if(n==-1){var i="'"+t+"'";return messg="<ol><li>Please select a valid option!<\/li><\/ol><span><\/span>",popError(t,messg),$("#"+t+"").select(),!1}t.indexOf("B")>-1?$('#iRoomsAndPax option[value="'+n+'"]').attr("selected","selected"):$('#BiRoomsAndPax option[value="'+n+'"]').attr("selected","selected");pax="";pax2="";pax3="";ropx=n.split("|");rom=ropx[0];pax=ropx[1];pax.indexOf("-")>0&&(paxMr=pax.split("-"),pax=paxMr[0],pax2=paxMr[1],paxMr[2]!=undefined&&(pax3=paxMr[2]));switch(rom){case"1":$("#iChildren option[value=0]").attr("selected","selected");$("#BiChildren option[value=0]").attr("selected","selected");pax!="Other"?(showDivRoom(0),cleanValues(0),$("#AiAdults option[value='"+pax+"']").attr("selected","selected"),$("#ARoom2_iAdults option[value='1']").attr("selected","selected"),$("#ARoom3_iAdults option[value='1']").attr("selected","selected"),$("#BiAdults option[value='"+pax+"']").attr("selected","selected"),$("#BRoom2_iAdults option[value='1']").attr("selected","selected"),$("#BRoom3_iAdults option[value='1']").attr("selected","selected")):(showDivRoom(1),cleanValues(0),$("#AiAdults option[value=2]").attr("selected","selected"),$("#BiAdults option[value=2]").attr("selected","selected"));break;case"2":$("#iChildren option[value=0]").attr("selected","selected");$("#Room2_iChildren option[value=0]").attr("selected","selected");$("#BiChildren option[value=0]").attr("selected","selected");$("#BRoom2_iChildren option[value=0]").attr("selected","selected");pax!="Other"?(showDivRoom(0),cleanValues(0),$("#AiAdults option[value='"+pax+"']").attr("selected","selected"),$("#ARoom2_iAdults option[value='"+pax2+"']").attr("selected","selected"),$("#ARoom3_iAdults option[value='1']").attr("selected","selected"),$("#BiAdults option[value='"+pax+"']").attr("selected","selected"),$("#BRoom2_iAdults option[value='"+pax2+"']").attr("selected","selected"),$("#BRoom3_iAdults option[value='1']").attr("selected","selected")):(showDivRoom(2),cleanValues(0),$("#AiAdults option[value=2]").attr("selected","selected"),$("#ARoom2_iAdults option[value=2]").attr("selected","selected"),$("#BiAdults option[value=2]").attr("selected","selected"),$("#BRoom2_iAdults option[value=2]").attr("selected","selected"));break;case"3":$("#iChildren option[value=0]").attr("selected","selected");$("#Room2_iChildren option[value=0]").attr("selected","selected");$("#Room3_iChildren option[value=0]").attr("selected","selected");$("#BiChildren option[value=0]").attr("selected","selected");$("#BRoom2_iChildren option[value=0]").attr("selected","selected");$("#BRoom3_iChildren option[value=0]").attr("selected","selected");pax!="Other"?(showDivRoom(0),cleanValues(0),$("#AiAdults option[value='"+pax+"']").attr("selected","selected"),$("#ARoom2_iAdults option[value='"+pax2+"']").attr("selected","selected"),$("#ARoom3_iAdults option[value='"+pax3+"']").attr("selected","selected"),$("#BiAdults option[value='"+pax+"']").attr("selected","selected"),$("#BRoom2_iAdults option[value='"+pax2+"']").attr("selected","selected"),$("#BRoom3_iAdults option[value='"+pax3+"']").attr("selected","selected")):(showDivRoom(3),cleanValues(0),$("#AiAdults option[value=2]").attr("selected","selected"),$("#ARoom2_iAdults option[value=2]").attr("selected","selected"),$("#ARoom3_iAdults option[value=2]").attr("selected","selected"),$("#BiAdults option[value=2]").attr("selected","selected"),$("#BRoom2_iAdults option[value=2]").attr("selected","selected"),$("#BRoom3_iAdults option[value=2]").attr("selected","selected"))}}function submitForm(n){var t,y,p,c,h,w,u,f,r,e,l,o,s,g,a,v;y=$('input[id^="addFlight"]').val();switch(y){case"True":if($("#iDepCity").val()==-1)return t="<ol><li>Please select your departure city<\/li><\/ol><span><\/span>",n==1?chkValid("sDepCity",t):chkValid("BsDepCity",t),!1;$("#iRetCity").val($("#iDepCity").val());break;case"False":$("#iRetCity").val(-1);$("#iDepCity").val(-1)}p=$.trim($("#InDate1").val());switch(p){case"mm/dd/yyyy":case"Select Date":case"":return t="<ol><li>Please select your departure date<\/li><\/ol><span><\/span>",n==1?chkValid("InDate1",t):chkValid("BInDate1",t),!1}$("#iRoom").val(rom);$("#Rooms").val(rom);switch(rom){case"1":c=$("#AiAdults").val();h=$("#iChildren").val();$("#iAdults").val($("#AiAdults").val());$("#Room2_iAdults").val("");$("#Room3_iAdults").val("");break;case"2":c=Number($("#AiAdults").val())+Number($("#ARoom2_iAdults").val());h=Number($("#iChildren").val())+Number($("#Room2_iChildren").val());$("#iAdults").val($("#AiAdults").val());$("#Room2_iAdults").val($("#ARoom2_iAdults").val());$("#Room3_iAdults").val("");break;case"3":c=Number($("#iAdults").val())+Number($("#Room2_iAdults").val())+Number($("#Room3_iAdults").val());h=Number($("#iChildren").val())+Number($("#Room2_iChildren").val())+Number($("#Room3_iChildren").val());$("#iAdults").val($("#AiAdults").val());$("#Room2_iAdults").val($("#ARoom2_iAdults").val());$("#Room3_iAdults").val($("#ARoom3_iAdults").val())}if(w=Number(c)+Number(h),w>6)return t="<ol><li>Max guest allowed (adults + children) are 6 !<\/li><\/ol><span><\/span>",n==1?chkValid("dvRoom1",t):chkValid("BdvRoom1",t),!1;if(h>0){var b=$("#iChildren").val(),k=$("#Room2_iChildren").val(),d=$("#Room3_iChildren").val();if(b>0&&rom>=1)for(i=1;i<=b;i++)if(u=$("#iChild"+i+"").val(),isNaN(u)||u==""||!isNaN(u)&&(u<2||u>11))return isNaN(u)||u==""?(t="<ol><li>Please enter a valid age !<\/li><\/ol><span><\/span>",r=""):u<2?(t="<ol><li>All infants (2 and under) are considered as children age 2<\/li><\/ol><span><\/span>",r=2):(t="<ol><li>Child age is 11 or less<\/li><\/ol><span><\/span>",r=11),n==1?(chkValid("iChild"+i,t),isNaN(u)||u==""?$("#iChild"+i+"").val(""):$("#iChild"+i+"").val(r),$("#BiChild"+i+"").val($("#iChild"+i+"").val())):(chkValid("BiChild"+i,t),isNaN(u)||u==""?$("#BiChild"+i+"").val(""):$("#BiChild"+i+"").val(r),$("#iChild"+i+"").val($("#BiChild"+i+"").val())),!1;if(k>0&&rom>=2)for(i=1;i<=k;i++)if(f=$("#Room2_iChild"+i+"").val(),isNaN(f)||f==""||!isNaN(f)&&(f<2||f>11))return isNaN(f)||f==""?(t="<ol><li>Please enter a valid age !<\/li><\/ol><span><\/span>",r=""):f<2?(t="<ol><li>All infants (2 and under) are considered as children age 2<\/li><\/ol><span><\/span>",r=2):(t="<ol><li>Child age is 11 or less<\/li><\/ol><span><\/span>",r=11),n==1?(chkValid("Room2_iChild"+i,t),isNaN(f)||f==""?$("#Room2_iChild"+i+"").val(""):$("#Room2_iChild"+i+"").val(r),$("#BRoom2_iChild"+i+"").val($("#Room2_iChild"+i+"").val())):(chkValid("BRoom2_iChild"+i,t),isNaN(f)||f==""?$("#BRoom2_iChild"+i+"").val(""):$("#BRoom2_iChild"+i+"").val(r),$("#Room2_iChild"+i+"").val($("#BRoom2_iChild"+i+"").val())),!1;if(d>0&&rom>=3)for(i=1;i<=d;i++)if(e=$("#Room3_iChild"+i+"").val(),isNaN(e)||e==""||!isNaN(e)&&(e<2||e>11))return isNaN(e)||e==""?(t="<ol><li>Please enter a valid age !<\/li><\/ol><span><\/span>",r=""):e<2?(t="<ol><li>All infants (2 and under) are considered as children age 2<\/li><\/ol><span><\/span>",r=2):(t="<ol><li>Child age is 11 or less<\/li><\/ol><span><\/span>",r=11),n==1?(chkValid("Room3_iChild"+i,t),isNaN(e)||e==""?$("#Room3_iChild"+i+"").val(""):$("#Room3_iChild"+i+"").val(r),$("#BRoom3_iChild"+i+"").val($("#Room3_iChild"+i+"").val())):(chkValid("BRoom3_iChild"+i,t),isNaN(e)||e==""?$("#BRoom3_iChild"+i+"").val(""):$("#BRoom3_iChild"+i+"").val(r),$("#Room3_iChild"+i+"").val($("#BRoom3_iChild"+i+"").val())),!1}for(l=Number($("#hwMnyCty").val())+1,o="",i=0;i<=l;i++)s=$("#ecityCat"+i+"").val(),s==undefined&&(s=""),o=i==0?o+s:i==l?o+s+",":o+","+s;$("#MiniPackCat").val(o);$("#imgPriceIt"+n).hide();$("#imgLoading"+n).show();g=$("#PackType").val();a=$("#Pkgid").val();switch(g){case"TP3":_bpURL="https://reservation.tripmasters.com/Tourpackage4/Itinerary/Create";bookProcess=_bpURL+"?"+a;break;case"MC":bookProcess="http://reservations.tripmasters.com/TVLAPI/Multicity3/MC_ComponentList.ASP?"+a}$("#frmToBook").attr("action",bookProcess);$("#frmToBook").submit();$("#utm_campaign").val()==""?$("#utm_campaign").val(""+utmValue+""):"";v="";v=$("#frmToBook").serializeObject();Cookies.set("bpBack",v,{expires:1})}function showMoreRelatedItineraries(){openModal();const i=$("#inpRelItin").val(),r=i.split("@");let t="",n="";$.each(r,function(){const t=this.split("|");if(t[0]!==packID)if(n+=`<li><a href="${SiteName}/${plcNA.replace(/\s/g,"_").toLowerCase()}/${t[1].replace(/\s/g,"_").toLowerCase()}/package-${t[0]}"><span class="more-relared-modal__name">${t[1]}</span>`,t[2]!==9999&&t[2]!==""){const i=Number(t[3])+Math.ceil(t[3]/2);n+=`<span class="more-relared-modal__night">${t[3]} ${t[4]===1?"to "+i:""} + nights from <span>${formatCurrency(t[2])}</span></span></a></li>`}else n+="<\/a><\/li>"});t+=`<div class="more-relared-modal">
               <h2 class="more-relared-modal__title">Related Itineraries:</h2>
               <ul class="more-relared-modal__list">
               ${n}  
               </ul>
               </div>`;$(".modal__container").html(t)}function clkshowItin(n){var t=$("#dvFDinclu"+n+"");t.is(":visible")?(t.hide(),$("#dvItinDetail"+n).html("Itinerary details &#709;")):(t.show(),$("#dvItinDetail"+n).html("Itinerary details &#708;"))}function clkhideIrin(n){$("#dvFDinclu"+n+"").hide()}function relIntForm(n,t){window.location=n+"?relItin="+t}function setCookie(n,t,i){var r=new Date;r.setTime(r.getTime()+i*864e5);document.cookie=n+"="+escape(t)+(i==null?"":";expires="+r.toGMTString())}function getCookie(n){return document.cookie.length>0&&(c_start=document.cookie.indexOf(n+"="),c_start!=-1)?(c_start=c_start+n.length+1,c_end=document.cookie.indexOf(";",c_start),c_end==-1&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):null}function formatCurrency(n){var i,t;for(n=n.toString().replace(/\$|\,/g,""),isNaN(n)&&(n="0"),sign=n==(n=Math.abs(n)),n=Math.floor(n*100+.50000000001),cents=n%100,n=Math.floor(n/100).toString(),cents<10&&(cents="0"+cents),i=Math.floor(n.length),i=Number(i)-1,t=0;t<Math.floor(Number(i+t)/3);t++)n=n.substring(0,Number(n.length)-(4*t+3))+","+n.substring(Number(n.length)-(4*t+3));return(sign?"":"-")+"$"+n}function showRecomm(n){var u,t=ObjectPosition(document.getElementById(n)),f,i,r,e,o;f=t[0];i=t[1]-10;r=710;n.indexOf("picAccom")>-1&&(f=t[0]-400);n.indexOf("aMore")>-1&&(i=t[1]-30);n.indexOf("dvItinRel")>-1&&(i=t[1]-550);n.indexOf("samPriceaAll")>-1&&(i=t[1]-60);n.indexOf("dvTabView")>-1&&(i=t[1]-60,r=780);e=r/2;u="position:absolute; z-index:9999; width:"+r+"px; left:50%; margin-left:-"+e+"px; top:100%;";$("#divRecomended").attr("style",u);$("#divRecomended").fadeIn(2e3);o=$("#"+n+"").offset();$("html,body").animate({scrollTop:o.top-Number(170)},2e3)}function closeDiv(){$("#divRecomended").hide()}function divToShow(n){$("#dv"+n+"").show()}function divToHide(n){$("#dv"+n+"").hide()}function scrollToTop(){$("body,html").animate({scrollTop:0},800)}function callCMS(n,t){console.log("dvshow:");console.log(t);$.ajax({type:"GET",url:SiteName+"/Api/Packages/SqlThisCMS/"+n,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){msg=n;msg!=""&&($("#"+t+"").html(n[0].cmS_Content),cmsoptimizeLinks(t))},error:function(n){$("#"+t+"").html(n.responseText);alert(n.responseText+" = error")}})}function cmsoptimizeLinks(n){$("#"+n+"").find("a").each(function(){var n=$(this).attr("href"),t,r,i;this.className!="aCMStxtLink"?(/javascript:/.test(n)?(t=n.indexOf("("),r=n.indexOf(")"),i=n.lastIndexOf("'"),n=i==-1?n.substring(Number(t+2),Number(r-1)):n.substring(Number(t+2),Number(i))):"",/\/latin\/|\/asia\//.test(n)||(/tripmasters.com/.test(n)?(n=n.replace("https://",""),n=n.replace(/tripmasters.com\/|www.tripmasters.com\//,"")):"",/europeandestinations.com/.test(n)?(n=n.replace("https://",""),n=n.replace("http://",""),n=n.replace(/europeandestinations.com\/|www.europeandestinations.com\//,"")):"",/\?/.test(n)?"":n=n+"?cms&wh=0&wf=0",this.href=/\/europe\//.test(n)?"/"+n:"/"+n,this.className!="aCMStxtLink"?$(this).addClass("aCMStxtLink").attr("rel","700,500").popupCMSNewWindow({centerBrowser:1,heigh:500,width:700}):"")):(/\?/.test(n)?"":n=n+"?cms&wh=0&wf=0",/\/europe\//.test(n)?"":/https:\/\/www.tripmasters.com\//?"":n="/europe"+n,$(this).attr("href",""+n+"").popupCMSNewWindow({centerBrowser:1,heigh:500,width:700}))})}function ShowHideMoreInfo(n){if(n.indexOf("pic")>-1){var i="div"+n.replace("pic",""),t="text"+n.replace("pic",""),u=n,e=$("#"+u+"").attr("src"),f=e.indexOf("Plus");f!=-1?(txtMorCls=$("#"+t+"").html(),$("#"+u+"").attr("src","https://pictures.tripmasters.com/siteassets/d/minus.jpg"),$("#"+t+"").html("close"),$("#"+i+"").show()):($("#"+u+"").attr("src","https://pictures.tripmasters.com/siteassets/d/Plus.jpg"),$("#"+t+"").html(txtMorCls),$("#"+i+"").hide())}else{var i="div"+n.replace("text",""),t="text"+n.replace("text",""),f=$("#"+t+"").html().indexOf("close"),r=n.replace("text","pic");f==-1?(txtMorCls=$("#"+t+"").html(),$("#"+r+"").length>0&&$("#"+r+"").attr("src","https://pictures.tripmasters.com/siteassets/d/minus.jpg"),$("#"+t+"").html("close"),$("#"+i+"").show()):($("#"+r+"").length>0&&$("#"+r+"").attr("src","https://pictures.tripmasters.com/siteassets/d/Plus.jpg"),$("#"+t+"").html(txtMorCls),$("#"+i+"").hide())}}function aboutBUT(){var n;for(i=0;i<=totCities;i++)$("#aboutPL"+i+"").click(function(t){t.preventDefault();n=$(this).attr("id").replace("aboutPL","aboutDIV");$(".backdrop-about").removeClass("is-hidden");$("#"+n+"").show()}),$("#aboutCls"+i+"").click(function(){$(".backdrop-about").addClass("is-hidden");$("#"+n+"").hide()}),$("#aboutCAL"+i+"").length>0&&$("#aboutCAL"+i+"").click(function(t){t.preventDefault();n=$(this).attr("id").replace("aboutCAL","aboutDIV");$(".backdrop-about").removeClass("is-hidden");$("#"+n+"").show()}),$("#aboutOVR"+i+"").length>0&&($("#aboutOVR"+i+"").attr("style","border-bottom:1px dotted #4E73AB;"),$("#aboutOVR"+i+"").click(function(){n=$(this).attr("id").replace("aboutOVR","aboutDIV");$(".backdrop-about").removeClass("is-hidden");$("#"+n+"").show()}))}function scrollToMorePop(n){var t;t=n;t=$("#"+t+"").offset();$("html,body").animate({scrollTop:t.top-Number(170)},2e3)}function dvHotMoreInf(n){var t=$("#"+n+"").offset(),r=t.top+15,i=t.left-90,u=$(window).width();t.left>800&&u>1e3&&(i=t.left-250);$("#dvhotInfo").html($("#"+n+"Info").html());$("#dvhotInfo").attr("style","position:absolute; z-index:100; width:350px;left:"+i+"px; top:"+r+"px; border:1px solid #000066; padding:15px; background-color:#fff; overflow:visible; -moz-box-shadow: 0 0 30px 5px #999; -webkit-box-shadow: 0 0 30px 5px #999;");$("#dvhotInfo").show()}function dvHotMoreInfCL(){$("#dvhotInfo").html("");$("#dvhotInfo").hide()}function getHotels(){arrAllHotCty=[];HotDispl=[];var n=0,u=0,t=[],i=[],r=[];arrAllHotCty=[];$("#dvShwAcco").html('<div style="padding:20% 0;" align="center"><img src="https://pictures.tripmasters.com/siteassets/d/world-globe-animated-ajax-loaders.gif" align="absmiddle"/><br/> Loading ..<\/div><\/div>');$.ajax({type:"POST",url:"/europe/WS_PackPage.asmx/sqlAccomTab",contentType:"application/json; charset=utf-8",dataType:"json",data:'{ctyIDs:"'+$("#tCityIDs").val()+'"}',success:function(f){msg=eval("("+f.d+")");jQuery.each(msg,function(){n=this.hotCty;n!=u&&(t=[],r=[],jQuery.each(msg,function(){this.hotSEQ>49&&this.hotSEQ<60&&this.hotCty==n&&(i=[],i.push(this.hotNA,this.hotDES,this.hotID,this.hotIMG,this.hotCtyNa,this.hotStart),r.push(i))}),t.push(this.hotCtyNa,r),arrAllHotCty.push(t));u=n});buildHOT()},error:function(n){alert(n.responseText+" = error")}})}function buildHOT(){var f="",s="",t="",n="",e,r,o,u;for(i=0;i<arrAllHotCty.length;i++){for(e=[],e=arrAllHotCty[i],r=[],r=e[1],p=0;p<r.length;p++){if(n=n+'<div class="carousel-item">',n=n+'<div align="left"><img src="https://pictures.tripmasters.com'+r[p][3].toLowerCase()+'" width="100" height="100" align="absmiddle"/><\/div>',n=n+'<div align="left" class="Text_Arial14_BlueBold">'+r[p][0]+"<\/div>",n=n+'<div align="left" class="Text_11">',n=n+'<img src="https://pictures.tripmasters.com/siteassets/d/Stars_'+r[p][5].replace(" ","_")+'.gif" align="absmiddle"/> - '+r[p][5]+"",n=n+'  <img src="https://pictures.tripmasters.com/siteassets/d/favorite.gif" align="absmiddle"/>',n=n+"<\/div>",n=n+'<div align="left" class="Text_11" style="height:40px;">',o=r[p][1],u=o.split(" "),u.length>10&&(u=u.slice(0,10),o=u.join(" ")),f=o,s=r[p][0].substring(f.length,r[p][0].length),n=n+f.toUpperCase()+'...  <a id="dvMore'+r[p][2]+'" onclick="dvHotMoreInf(this.id)" style="cursor:pointer; color:blue;"><u>more[+]<\/u><\/a>',n=n+"<\/div>",n=n+'<div id="dvMore'+r[p][2]+'Info" style="padding:10px; border:solid 1px #999; display:none;">',n=n+'<div align="right"><a onclick="dvHotMoreInfCL();" style="cursor:pointer; color:blue;"><u>close[x]<\/u><\/a><\/div>',n=n+'<div align="left" class="Text_Arial14_BlueBold" style="padding:5px 0;">'+r[p][0]+"<\/div>",n=n+f.toUpperCase()+" "+s,n=n+"<\/div>",toHotNA=r[p][0],toHotNA.indexOf(".")>-1&&(toHotNA=r[p][0].replace(".","")),winSet="'hotel"+r[p][2]+"','menubar=1,resizable=1,width=1100,height=800,scrollbars=1,'",toHotInfo="'/europe/"+r[p][4].replace(/\s/g,"_")+"/Hotel_Description_pp"+r[p][2]+"_"+toHotNA.replace(/\s/g,"_")+".aspx'",n=n+'<div align="left" class="Text_11"><span onclick="window.open('+toHotInfo+","+winSet+')"><a><u>hotel info<\/u><\/a> | <a><u>photos<\/u><\/a> | <a><u>map<\/u><\/a><\/span><\/div>',n=n+"<\/div>",ctyHotPRO.push(n),n="",p==2){for(t=t+'<div id="wrap">',t=t+'<div class="dvCarrCityTitle Text_Arial14_BlueBold">'+e[0]+" Hotels: "+r.length+" favorite hotels total<\/div>",t=t+'<div class="carousel-container">',t=t+'<div class="dvPrev"><span>',r.length>3&&(t=t+'<img src="https://pictures.tripmasters.com/siteassets/d/T27_ForwH.jpg" id="prevH'+i+'"><\/span>'),t=t+"<\/div>",t=t+'<div id="Hotfoo'+i+'" class="container-horizontal">',y=0;y<ctyHotPRO.length;y++)t=t+ctyHotPRO[y];t=t+'<div style="clear:both"><\/div>';t=t+"<\/div>";t=t+'<div class="dvPrev"><span>';r.length>3&&(t=t+'<img src="https://pictures.tripmasters.com/siteassets/d/T27_BackH.jpg" id="nextH'+i+'"><\/span>');t=t+"<\/div>";t=t+'<div style="clear:both;"><\/div>';t=t+"<\/div>";t=t+"<\/div>";HotDispl.push(i+"|0|2")}p==r.length-1&&(allCtyHotPRO.push(ctyHotPRO),ctyHotPRO=[])}n="";ccH++}$("#dvShwAcco").html(t);$('img[id*="prev"]').mouseover(function(){$(this).attr("src","https://pictures.tripmasters.com/siteassets/d/T27_ForwH_Over.gif")}).mouseout(function(){$(this).attr("src","https://pictures.tripmasters.com/siteassets/d/T27_ForwH.jpg")}).click(function(){moveCarr(this.id)});$('img[id*="next"]').mouseover(function(){$(this).attr("src","https://pictures.tripmasters.com/siteassets/d/T27_BackH_Over.gif")}).mouseout(function(){$(this).attr("src","https://pictures.tripmasters.com/siteassets/d/T27_BackH.jpg")}).click(function(){moveCarr(this.id)})}function getSS(){arrAllSSCty=[];SSDispl=[];var n=0,u=0,t=[],i=[],r=[];$("#dvShwActi").html('<div style="padding:20% 0;" align="center"><img src="https://pictures.tripmasters.com/siteassets/d/world-globe-animated-ajax-loaders.gif" align="absmiddle"/><br/>Loading ..<\/div><\/div>');$.ajax({type:"POST",url:"/europe/WS_PackPage.asmx/sqlActivitiesTab",contentType:"application/json; charset=utf-8",dataType:"json",data:'{ctyIDs:"'+$("#tCityIDs").val()+'"}',success:function(f){msg=eval("("+f.d+")");jQuery.each(msg,function(){n=this.hotCty;n!=u&&(t=[],r=[],jQuery.each(msg,function(){this.hotSEQ>49&&this.hotSEQ<60&&this.hotCty==n&&(i=[],i.push(this.hotNA,this.hotDES,this.hotID,this.hotIMG),r.push(i))}),t.push(this.hotCtyNa,r),arrAllSSCty.push(t));u=n});buildSS()},error:function(n){alert(n.responseText+" = error")}})}function buildSS(){var n="",t="",f,r,e,u;for(i=0;i<arrAllSSCty.length;i++){for(f=[],f=arrAllSSCty[i],r=[],r=f[1],p=0;p<r.length;p++){if(t=t+'<div class="carousel-item">',t=t+'<div align="left" class="Text_Arial14_BlueBold">'+r[p][0]+"<\/div>",t=t+'<div align="left" class="Text_11">',t=t+'<div align="left" class="Text_Arial12" style="height:45px;padding:3px 0px;font-style:italic;">',e=$(r[p][1]).text(),u=e.split(" "),u.length>10&&(u=u.slice(0,10),e=u.join(" ")),hotdes1=e,t=t+hotdes1.toUpperCase()+'...  <a id="dvMore'+r[p][2]+'" onclick="dvHotMoreInf(this.id)" style="cursor:pointer; color:blue;"><u>more[+]<\/u><\/a>',t=t+"<\/div>",t=t+'<div id="dvMore'+r[p][2]+'Info" style="padding:10px; border:solid 1px #999; display:none;">',t=t+'<div align="right"><a onclick="dvHotMoreInfCL();" style="cursor:pointer; color:blue;"><u>close[x]<\/u><\/a><\/div>',t=t+'<div align="left" class="Text_Arial14_BlueBold" style="padding:5px 0;">'+r[p][0]+"<\/div>",t=t+"<table><tr><td>"+r[p][1]+"<\/td><\/tr><\/table>",t=t+"<\/div>",t=t+"<\/div>",t=t+'<div align="left"><img src="https://pictures.tripmasters.com'+r[p][3].toLowerCase()+'" width="100" height="100" align="absmiddle"/><\/div>',t=t+"<\/div>",ctySSPRO.push(t),t="",p==2){for(n=n+'<div id="wrap">',n=n+'<div class="dvCarrCityTitle Text_Arial14_BlueBold">'+f[0]+" Activities: "+r.length+" favorite<\/div>",n=n+'<div class="carousel-container">',n=n+'<div class="dvPrev"><span>',r.length>3&&(n=n+'<img src="/images/T27_ForwH.jpg" id="prevS'+i+'"><\/span>'),n=n+"<\/div>",n=n+'<div id="SSfoo'+i+'" class="container-horizontal">',y=0;y<ctySSPRO.length;y++)n=n+ctySSPRO[y];n=n+'<div style="clear:both"><\/div>';n=n+"<\/div>";n=n+'<div class="dvPrev"><span>';r.length>3&&(n=n+'<img src="/images/T27_BackH.jpg" id="nextS'+i+'"><\/span>');n=n+"<\/div>";n=n+'<div style="clear:both;"><\/div>';n=n+"<\/div>";n=n+"<\/div>";SSDispl.push(i+"|0|2")}p==r.length-1&&(allCtySSPRO.push(ctySSPRO),ctySSPRO=[])}t="";ccC++}$("#dvShwActi").html(n);$('img[id*="prev"]').mouseover(function(){$(this).attr("src","/images/T27_ForwH_Over.gif")}).mouseout(function(){$(this).attr("src","/images/T27_ForwH.jpg")}).click(function(){moveCarr(this.id)});$('img[id*="next"]').mouseover(function(){$(this).attr("src","/images/T27_BackH_Over.gif")}).mouseout(function(){$(this).attr("src","/images/T27_BackH.jpg")}).click(function(){moveCarr(this.id)})}function moveCarr(n){var o;console.log("moveCarr");var t=n.substr(n.length-1),i,l,u=[],h=[],f="",e="",c,a,v,y="";for(n.indexOf("next")>-1?(l="Nx",a="left",v="right"):n.indexOf("prev")>-1&&(l="Pv",a="right",v="left"),n.indexOf("S")>-1?(i="S",c=$("#SSfoo"+t+""),u=SSDispl,SSDispl=[],h=allCtySSPRO):n.indexOf("H")>-1&&(i="H",c=$("#Hotfoo"+t+""),u=HotDispl,HotDispl=[],h=allCtyHotPRO),s=0;s<u.length;s++)if(o=u[s].split("|"),o[0]==t){if(l=="Nx"?(f=Number(o[1])+3,e=Number(o[2])+3):l=="Pv"&&(f=Number(o[1])-3,e=Number(o[2])-3),e<=-1||f>h[t].length)return i=="S"?SSDispl=u:i=="H"&&(HotDispl=u),!1;for(i=="S"?SSDispl.push(t+"|"+f+"|"+e):i=="H"&&HotDispl.push(t+"|"+f+"|"+e),r=f;r<=e;r++)h[t][r]!=undefined&&(y=y+h[t][r])}else i=="S"?SSDispl.push(u[s]):i=="H"&&HotDispl.push(u[s]);c.hide("slide",{direction:a},200);c.html(y);c.show("slide",{direction:v},500)}function getFeed(){var n;$.ajax({type:"POST",url:"/europe/WS_PackPage.asmx/sqlFeedBacksXpackID",contentType:"application/json; charset=utf-8",dataType:"json",data:'{packID:"'+packID+'"}',success:function(t){n=eval("("+t.d+")");jQuery.each(msg,function(){})},error:function(n){alert(n.responseText+" = error")}})}function winOpenCMS(n){return centerWindow(n),!1}function ObjectPosition(n){var t=0,i=0;if(n.offsetParent)do t+=n.offsetLeft,i+=n.offsetTop;while(n=n.offsetParent);return[t,i]}function recommendedHotels(n,t){openModal();$.ajax({type:"POST",url:SiteName+"/Api/recommHotels/"+n,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){var i,r;hotRec=n;i='<div style="text-align:left; padding: 10px 10px 1px 10px;"><span class="Blue-Arial14">'+hotRec.length+" hotels offered in "+t+"<\/span><\/div>";i=i+'<div class="Orange-Arial12NB" align="left" style="padding:10px 10px;">You will be able to select your hotel in the next step<\/div>';r="auto";hotRec.length>4&&(r="270px",$("#divContent").attr("style","height:370px; width:auto; padding:15px 40px;"));i=i+'<div style="overflow:auto; height:'+r+'; padding:1px 5px 1px 20px">';jQuery.each(hotRec,function(){i=i+'<div align="left" class="Text_12_Bold" style="padding:15px 10px 3px 10px;">'+this.pdL_Title+"<\/div>";i=i+'<div align="left" class="Text-Light_Med" style="padding:5px 10px 3px 20px;">';i=this.gipH_TNTournetRating.indexOf("Stars")>-1?i+'<img src="https://pictures.tripmasters.com/siteassets/d/Stars_'+this.gipH_TNTournetRating.replace(/\s/g,"_").replace("+","_Plus")+'.gif" align="absmiddle" />&nbsp;&nbsp;'+this.gipH_TNTournetRating+" rating<\/span>":i+'<img src="https://pictures.tripmasters.com/siteassets/d/'+this.gipH_TNTournetRating.replace(/\s/g,"_").toLowerCase()+'.gif" align="absmiddle" />&nbsp;&nbsp;'+this.gipH_TNTournetRating+" rating<\/span>";this.sorting<10&&(i=i+'&nbsp;&nbsp;<img src="https://pictures.tripmasters.com/siteassets/d/favorite.gif" align="absmiddle">');i=i+"<\/div>";var t=this.spD_Features,n="";t.indexOf("400")>-1&&(n=n+"Honeymoon and Romance");n!=""&&(i=i+'<div style="padding:2px 10px 10px 20px; margin-bottom:3px;" align="left"><b>Ideal for:<\/b> '+n+" <\/div>");this.ptY_Description!="none"&&(i=i+'<div style="padding:2px 10px 10px 20px; border-bottom:1px solid #CCCCCC; margin-bottom:5px;" align="left">'+this.ptY_Description+"<\/div>")});i=i+"<\/div>";$(".modal__container").html(i)},error:function(n){alert(n.responseText+" = error");$(".modal__container").html(n.responseText)}})}function recommendedSS(n,t,i){objPOS=0;objPOS=$("#"+i+"").offset();openModal();$.ajax({type:"POST",url:SiteName+"/Api/RecommSS/"+n,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){var i,r;hotRec=n;i='<div style="text-align:left; padding: 10px 10px 1px 10px;"><span class="Blue-Arial14" >'+hotRec.length+" Things to do in "+t+"<\/span><\/div>";i=i+'<div class="Orange-Arial12NB" align="left" style="padding:10px 10px;">You will be able to select your activities during the booking process<\/div>';r="auto";hotRec.length>4&&(r="270px",$("#divContent").attr("style","height:auto; width:auto; padding:15px 40px;"));i=i+'<div style="overflow:auto; height:'+r+'; padding:1px 5px 1px 20px">';jQuery.each(hotRec,function(){i=i+'<div align="left" class="Text_12_Bold" style="padding:15px 10px 3px 10px;"><span onmouseover="divToShow('+this.pdlid+')" style="cursor:pointer">'+this.pdL_Title+"<\/span><\/div>";i=i+'<div id="dv'+this.pdlid+'" style="padding:10px 10px; display:none; overflow: auto; height:auto; width: 400px; border:1px solid #CCCCCC;" align="left"><div align="right" style="padding:2px 2px;" class="Text_12"><span onclick="divToHide('+this.pdlid+')" style="cursor:pointer;" class="Editor_Package_DaysNts">close [X]<\/span><\/div>'+this.spD_Description+"<\/div>"});i=i+"<\/div>";$(".modal__container").html(i)},error:function(n){alert(n.responseText+" = error");$(".modal__container").html(n.responseText)}})}function dvCMSMoreOpen(n){var i=document.getElementById(n),f=document.getElementById(n.replace("a","dv")),t=ObjectPosition(document.getElementById(n)),e=t[1]+10,r=t[0],u;t[0]>950&&(r=t[0]-300);f.setAttribute("style","display:block; position:absolute; z-index:100; width:350px;left:"+r+"px; top:"+e+"px; border:1px solid #000066; padding:15px; background-color:#fff; overflow:visible; -moz-box-shadow: 0 0 10px 5px #999; -webkit-box-shadow: 0 0 10px 5px #999; box-shadow: 0 0 15px #999;");u=n.replace("a","dv");i.innerHTML="<u>close [-]<\/u>";i.setAttribute("onClick","dvCMSMoreClose('"+u+"'); return false;")}function dvCMSMoreClose(n){var t=document.getElementById(n.replace("dv","a")),i=document.getElementById(n);i.setAttribute("style","display:none;");t.innerHTML="<u>more [+]<\/u>";t.setAttribute("onClick","dvCMSMoreOpen(this.id); return false;")}function popError(n,t){var i=$("#"+n+"").offset();$("#divError").html(t);$("#divError").show();t.indexOf("All infants")!=-1?$("#divError").offset({left:i.left-100,top:i.top-60}):$("#divError").offset({left:i.left-85,top:i.top-50});setTimeout("$('#divError').hide()",2e3)}function closeClick(n){$("#dvError").hide();IsMobileDevice()&&$("#"+n+"").val("");$("#"+n+"").select()}function openFeedsContainer(n,t){var i;$(".feedbacks-section__button").removeClass("selected");$(".feedbacks-section__button-city").removeClass("selected");n=="P"&&($(".feedbacks-section__button").addClass("selected"),i=$("#PVal"+t).val().split("|"),i[1]==0?$("#OverAllFeeds").hide():$("#OverAllFeeds").show(),$("#dvNoOfFeeds").text(i[0]+" Reviews"),$("#dvStarsOverAll").css("width",i[2]+"px"),$("#dvStarsOverAllStr").text(i[1]+" out of 5 stars"));n=="C"&&($(".feedbacks-section__button-city").addClass("selected"),i=$("#CVal"+t).val().split("|"),i[1]==0?$("#OverAllFeeds").hide():$("#OverAllFeeds").show(),$("#dvNoOfFeeds").text(i[0]+" Reviews"),$("#dvStarsOverAll").css("width",i[2]+"px"),$("#dvStarsOverAllStr").text(i[1]+" out of 5 stars"));createPagination(n,t,1);OpenPage(1,n,t)}function createPagination(n,t){$(".dvPaginas").pagination("destroy");var i=0;n=="P"&&(i=$("#PVal"+t).val().split("|")[0]);n=="C"&&(i=$("#CVal"+t).val().split("|")[0]);$(".dvPaginas").pagination({pages:Math.ceil(i/10),itemsOnPage:10,cssStyle:"light-theme",onPageClick:function(i){return scroll(0,0),OpenPage(i,n,t),!1}})}function OpenPage(n,t,i){$("#dvFeeds").animate({opacity:".0"},100);$("#dvFeeds").html('<div id="imgWait" style="padding:100px; text-align:center"><img id="imgWait" src="https://pictures.tripmasters.com/siteassets/d/ajax-loader.gif"/><\/div>');$("#dvFeeds").animate({opacity:"1"},0);$("#dvWaitFeeds").show();$.ajax({type:"GET",url:SiteName+"/Package/GetCustFeed/"+t+"/"+n+"/"+i,success:function(n){$("#dvFeeds").html(n).show()},error:function(n){$("#dvFeeds").html(n.responseText)}})}function calreload(n){startDate="";histFilter=[];priceFilter=[];deflt=$(".spdepair").text();n===undefined?($(".spdepair").html(deflt),priceFilter=$.grep(priceGuide,function(n){return n.plC_Title===deflt})):priceFilter=$.grep(priceGuide,function(t){return t.plC_Title===n});console.log("PriceFilter: ");console.log(priceFilter);var t=0;jQuery.each(priceFilter,function(){var i,n,r;t===0?(i=new Date,i=i.setDate(i.getDate()+45),startDate=i):"";n="$"+Math.round(this.reD_PackagePrice)+"*";n=n+"    - ";n=this.reD_Nights.toString().length===1?n+"    "+this.reD_Nights+" nights":n+"  "+this.reD_Nights+" nights";r={title:n,start:""+this.reD_StartDate+"",className:"gui"+this.redid+""};histFilter.push(r);t++});$("#PriceGuideCalendar").guideCalendar("destroy");$("#PriceGuideCalendar").html('<div style="text-align:center; padding:50px;"><img src="https://pictures.tripmasters.com/siteassets/d/ajax-loader.gif"/><br/>loading ...<br/><\/div>');setTimeout(guideCal,1e3)}function guideCal(){$("#PriceGuideCalendar").html("");$("#PriceGuideCalendar").guideCalendar({header:{left:"prev",center:"title",right:"next"},defaultDate:startDate,weekMode:"liquid",editable:!0,eventLimit:!0,events:histFilter});clickAnchor();$(".fc-more").click(function(){clickAnchor()})}function clickAnchor(){console.log("Start clickAnchor()");$(".dvPopUpOrangeTopL").hide();$(".dvPopUpOrangeTopR").hide();$(".aprice").click(function(){var n,t,i;console.log("Start aprice");n=this.id;$(".dvPopUpOrangeTopR").is(":visible")==!0?$(".dvPopUpOrangeTopR").hide():"";$(".dvPopUpOrangeTopL").is(":visible")==!0?$(".dvPopUpOrangeTopL").hide():"";t=$("#inpFromNA").val();i=$("#inpFromID").val();$("#BsDepCity").val(t);$("#sDepCity").val(t);$("#iDepCity").val(i);$("#BiDepCity").val(i);$("#InDate1").val(n);$("#BInDate1").val(n);openModal();$(".modal__container").html("");$("#overviewCal").appendTo(".modal__container");$(window).resize(function(){$("#dvPopCal").center()});$('[id^="gToday"]').css("position","fixed")});$("[class*='gui']").click(function(){var i=$(this).attr("class").match(isNumber),r=[],t=$(this).offset(),u=$(this).position(),n="";r=$.grep(priceGuide,function(n){return n.redid==Number(i)});$.each(r,function(){var f=new Date(this.reD_TXMLTime),r=new Date(this.reD_StartDate),e="'"+this.plC_Title+"',"+this.plcid+",'"+dateFormat(r.setDate(r.getDate()+1),"mm/dd/yyyy")+"'";n="<p><span><b>"+this.reD_Nights+" Nights <\/b><\/span><b>from $"+Math.round(this.reD_PackagePrice)+" w/air,  hotel &amp; air taxes*<\/b><\/p><p> <b>This sample price includes ALL air taxes &amp; fuel surcharges:<\/b> Priced on "+dateFormat(f.setDate(f.getDate()+1),"dddd, mmm dd, yyyy")+" for arrival on "+dateFormat(r.setDate(r.getDate()),"dddd, mmm dd, yyyy")+", departure from "+this.plC_Title+".<\/p><p>This sample itinerary includes:<\/p>";u.left>600?($(".dvPopUpOrangeTopL").is(":visible")==!0?$(".dvPopUpOrangeTopL").hide():"",$("#dvPopUpGR").show(),$("#dvPopContentR").html(n),$("#dvPopUpGR").offset({left:t.left-245,top:t.top+34})):($(".dvPopUpOrangeTopR").is(":visible")==!0?$(".dvPopUpOrangeTopR").hide():"",$("#dvPopUpGL").show(),$("#dvPopContentL").html(n),$("#dvPopUpGL").offset({left:t.left+5,top:t.top+34}));$.ajax({type:"Get",url:SiteName+"/Api/Packages/ItineraryContentFromPriceId/"+i,contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){if(msg=t,msg!=""){var i=$.map(msg,function(n){return{id:n.id,name:n.name}});n=n+"<ul>"+i[0].name+"<\/ul>";n=n+'<div class="dvPopPriceIt" onclick="priceThinCal('+e+');"><span>Price It<font> &rsaquo;<\/font><\/span><\/div>';u.left>600?$("#dvPopContentR").html(n):$("#dvPopContentL").html(n)}},error:function(n){$("#dvPopContentR").html(n.responseText)}})})})}function priceThinCal(n,t,i){$(".dvPopUpOrangeTopR").is(":visible")==!0?$(".dvPopUpOrangeTopR").hide():"";$(".dvPopUpOrangeTopL").is(":visible")==!0?$(".dvPopUpOrangeTopL").hide():"";$("#BsDepCity").val(n);$("#sDepCity").val(n);$("#iDepCity").val(t);$("#BiDepCity").val(t);$("#InDate1").val(i);$("#BInDate1").val(i);openModal();$(".modal__container").html("");$("#overviewCal").appendTo(".modal__container");$(window).resize(function(){$("#dvPopCal").center()});$('[id^="gToday"]').css("position","fixed")}function hidePopUpInfo(n){return $("#"+n+"").hide(),n=="dvPopCal"?($("#overviewCal").appendTo(".overview-section__calendar"),$("#BsDepCity").val("type here"),$("#sDepCity").val("type here"),$("#iDepCity").val(-1),$("#BiDepCity").val(-1),$("#InDate1").val("mm/dd/yyyy"),$("#BInDate1").val("mm/dd/yyyy"),$('[id^="gToday"]').css("position","absolute"),$("#dvPopCalContent").text().includes("Stagger")?$("#dvPopCalContent").text(""):""):"",!1}function DropDown(n){this.dep=n;this.placeholder=this.dep.children("span");this.opts=this.dep.find("ul.dropdownList > li");this.val="";this.index=-1;this.initEvents()}function dateByDest(){var r=blockDates.replace("B-",""),f,o,n,e,h,u;for(r=r.trim().split("-"),f=r[0].split("*"),o=r[1].split("*"),i=0;i<=f.length-1;i++)for(var c=f[i],l=o[i],t=stringToDate(""+l+"","mm/dd/yyyy","/"),a=stringToDate(""+c+"","mm/dd/yyyy","/"),s;a<=t;)s=t.getDate(),between.push(jQuery.datepicker.formatDate("yy-mm-dd",t)),t=new Date(t.setDate(--s));if(n="",e=new Date,n=new Date(e.getTime()+6048e5),h=new Date(e.getTime()+7776e6),u=jQuery.datepicker.formatDate("yy-mm-dd",n),between.indexOf(u)!=-1){while(between.indexOf(u)!=-1)n.setDate(n.getDate()+1),u=jQuery.datepicker.formatDate("yy-mm-dd",n);h<=n&&$(".InDate1").val(jQuery.datepicker.formatDate("mm/dd/yy",n))}$("#InDate1").datepicker("destroy");$("#InDate1").datepicker({orientation:"top",defaultDate:n,changeMonth:!1,changeYear:!1,numberOfMonths:2,showButtonPanel:!0,format:"yyyy-mm-dd",hideIfNoPrevNext:!0,prevText:"",nextText:"",minDate:n,maxDate:"+1Y",showOtherMonths:!1,beforeShowDay:function(n){var t=jQuery.datepicker.formatDate("yy-mm-dd",n);return[between.indexOf(t)===-1]},beforeShow:function(n,t){var i=t.dpDiv;setTimeout(function(){i.position({my:"right top",at:"right bottom",collision:"flip",of:n})},1)}})}function stringToDate(n,t,i){var e=t.toLowerCase(),r=e.split(i),u=n.split(i),o=r.indexOf("mm"),s=r.indexOf("dd"),h=r.indexOf("yyyy"),f=parseInt(u[o]);return f-=1,new Date(u[h],f,u[s])}function dateByDestMob(){var c=fxDatesNET,t,n,e,f,o,h,u;if(c!=0)return!1;if(t=$("#blockDates").val(),t==0)n=new Date(myDate.getTime()+6048e5),e='"'+today.getFullYear()+":"+Number(today.getFullYear()+1)+'"',$("#InDateMob1").datepicker({defaultDate:n,yearRange:e,changeMonth:!1,changeYear:!1,numberOfMonths:1,showButtonPanel:!0,format:"yyyy-mm-dd",hideIfNoPrevNext:!0,prevText:"",nextText:"",minDate:n,showOtherMonths:!1,maxDate:"+365d"}).click(function(){$(this).attr("style","").removeClass("errorClass")});else{for(t=t.replace("B-",""),t=t.trim().split("-"),f=t[0].split("*"),o=t[1].split("*"),i=0;i<=f.length-1;i++)for(var l=f[i].trim(),a=o[i].trim(),r=stringToDate(""+a+"","mm/dd/yyyy","/"),v=stringToDate(""+l+"","mm/dd/yyyy","/"),s;v<=r;)s=r.getDate(),betweenMob.push(jQuery.datepicker.formatDate("yy-mm-dd",r)),r=new Date(r.setDate(--s));if(n="",n=new Date(myDate.getTime()+6048e5),h=new Date(myDate.getTime()+7776e6),u=jQuery.datepicker.formatDate("yy-mm-dd",n),betweenMob.indexOf(u)!=-1){while(betweenMob.indexOf(u)!=-1)n.setDate(n.getDate()+1),u=jQuery.datepicker.formatDate("yy-mm-dd",n);h<=n&&$("#InDateMob1").val(jQuery.datepicker.formatDate("mm/dd/yy",n))}$("#InDateMob1").datepicker("destroy");$("#InDateMob1").datepicker({orientation:"top",defaultDate:n,changeMonth:!1,changeYear:!1,numberOfMonths:1,showButtonPanel:!0,format:"yyyy-mm-dd",hideIfNoPrevNext:!0,prevText:"",nextText:"",minDate:n,maxDate:"+1Y",showOtherMonths:!1,beforeShowDay:function(n){var t=jQuery.datepicker.formatDate("yy-mm-dd",n);return[betweenMob.indexOf(t)===-1]},beforeShow:function(n,t){var i=t.dpDiv;setTimeout(function(){i.position({my:"right top",at:"right bottom",collision:"flip",of:n})},1)}}).click(function(){$(this).attr("style","").removeClass("errorClass")})}}function validateForm(){if($("#addFlight").val()==="True"&&$("#iDepCityMob").val()==="-1")return errorAlert("iDepCityTxtMob","Select a valid departure airport"),!1;$("#iRetCityMob, #iRetCity").val($("#iDepCityMob").val());var n=$.trim($("#InDateMob1").val());if(/undefined|Select/.test(n))return errorAlert("InDateMob1","Select a valid date"),!1;$(".dvMpriceItMob").hide();$(".btnWaitMob").show();submitForm(1);setTimeout(function(){$(".dvMpriceItMob").show();$(".btnWaitMob").hide()},3e3)}function changeCabin(n){$(".mob-calendar__cabin-item").each(function(){this.id===n.id?($("#"+n.id+"").find("span:first").html("&#10003;"),$("#CabinMob").val(n.id)):$("#"+this.id+"").find("span:first").html("&nbsp;")});$("#Cabin option").each(function(){this.value===n.id?this.selected="selected":""})}function dvPriceIt(){var t,r,i,n;$(".dvMpriceItMob").hide();$(".btnWaitMob").show();r=$("#PackType").val();i=$("#PkgidMob").val();switch(r){case"TP3":_bpURL="https://reservation.tripmasters.com/Tourpackage4/Itinerary/Create";t=_bpURL+"?"+i;break;case"MC":t="http://reservations.tripmasters.com/TVLAPI/Multicity3/MC_ComponentList.ASP?"+i}$("#frmToBook").attr("action",t);$("#frmToBook").submit();$("#utm_campaign").val()==""?$("#utm_campaign").val(""+utmValue+""):"";n="";n=$("#frmToBook").serializeObject();console.log(n);Cookies.set("bpBack",n,{expires:1});setTimeout(function(){$(".dvMpriceItMob").show();$(".btnWaitMob").hide()},3e3)}function checkTotalPax(){var n=Number($("#iAdultsMob").val())+Number($("#RoomMob2_iAdults").val())+Number($("#RoomMob3_iAdults").val()),t=Number($("#iChildrenMob").val())+Number($("#RoomMob2_iChildren").val())+Number($("#RoomMob3_iChildren").val());return totalPax=n+t,totalPax<=6?!0:(alert("Max guest allowed (adults + children) are 6 !"),!1)}function adultPlus(n){var i,t;n.id.match(isNumber)===null?(i=$("#iAdultsMob"),t=Number(i.val()),t<=6&&($(i).val(t+1),$("#iAdults").val(t+1),$("#AiAdults option").each(function(){Number(this.value)===t+1?this.selected="selected":""}),checkTotalPax()||($(i).val(t),$("#iAdults").val(t),$("#AiAdults option").each(function(){Number(this.value)===t?this.selected="selected":""})))):(i=$("#RoomMob"+n.id.match(isNumber)+"_iAdults"),t=Number(i.val()),t<=6&&($(i).val(t+1),$("#Room"+n.id.match(isNumber)+"_iAdults").val(t+1),$("#ARoom"+n.id.match(isNumber)+"_iAdults option").each(function(){Number(this.value)===t+1?this.selected="selected":""}),checkTotalPax()||($(i).val(t),$("#Room"+n.id.match(isNumber)+"_iAdults").val(t),$("#ARoom"+n.id.match(isNumber)+"_iAdults option").each(function(){Number(this.value)===t?this.selected="selected":""}))))}function adultMinus(n){var t;n.id.match(isNumber)===null?(t=$("#iAdultsMob"),nwObjVal=Number(t.val()),nwObjVal>1?(t.val(nwObjVal-1),$("#iAdults").val(nwObjVal-1),$("#AiAdults option").each(function(){Number(this.value)===nwObjVal-1?this.selected="selected":""})):(alert("At least one adult should be present at room 1!"),t.val("1"))):(t=$("#RoomMob"+n.id.match(isNumber)+"_iAdults"),nwObjVal=Number(t.val()),nwObjVal>1?(t.val(nwObjVal-1),$("#Room"+n.id.match(isNumber)+"_iAdults").val(nwObjVal-1),$("#ARoom"+n.id.match(isNumber)+"_iAdults option").each(function(){Number(this.value)===nwObjVal-1?this.selected="selected":""})):(alert("At least one adult should be present at room "+n.id.match(isNumber)+"!"),t.val("1")))}function childPlus(n){var t;if(n.id.match(isNumber)===null){t=$("#iChildrenMob");switch(t.val()){case"0":t.val("1");$("#iChildren option").each(function(){this.value==="1"?this.selected="selected":""});checkTotalPax()===!0?childAgeChange(t):(t.val("0"),$("#iChildren option").each(function(){this.value==="0"?this.selected="selected":""}));break;case"1":t.val("2");$("#iChildren option").each(function(){this.value==="2"?this.selected="selected":""});checkTotalPax()===!0?childAgeChange(t):(t.val("1"),$("#iChildren option").each(function(){this.value==="1"?this.selected="selected":""}));break;case"2":alert("Sorry, only 2 Children per room");break;default:return}}else{t=$("#RoomMob"+n.id.match(isNumber)+"_iChildren");switch(t.val()){case"0":t.val("1");$("#Room"+n.id.match(isNumber)+"_iChildren option").each(function(){this.value==="1"?this.selected="selected":""});checkTotalPax()===!0?childAgeChange(t):(t.val("0"),$("#Room"+n.id.match(isNumber)+"_iChildren option").each(function(){this.value==="0"?this.selected="selected":""}));break;case"1":t.val("2");$("#Room"+n.id.match(isNumber)+"_iChildren option").each(function(){this.value==="2"?this.selected="selected":""});checkTotalPax()===!0?childAgeChange(t):(t.val("1"),$("#Room"+n.id.match(isNumber)+"_iChildren option").each(function(){this.value==="1"?this.selected="selected":""}));break;case"2":alert("Sorry, only 2 Children per room");break;default:return}}}function childMinus(n){var t;n.id.match(isNumber)===null?(t=$("#iChildrenMob"),t.val()==="2"?(t.val("1"),$("#iChildren option").each(function(){this.value==="1"?this.selected="selected":""}),childAgeChange(t)):t.val()==="1"?(t.val("0"),$("#iChildren option").each(function(){this.value==="0"?this.selected="selected":""}),childAgeChange(t)):""):(t=$("#RoomMob"+n.id.match(isNumber)+"_iChildren"),t.val()==="2"?(t.val("1"),$("#Room"+n.id.match(isNumber)+"_iChildren option").each(function(){this.value==="1"?this.selected="selected":""}),childAgeChange(t)):t.val()==="1"?(t.val("0"),$("#Room"+n.id.match(isNumber)+"_iChildren option").each(function(){this.value==="0"?this.selected="selected":""}),childAgeChange(t)):"")}function childAgeChange(n){$(n).attr("id").match(isNumber)===null?$('#dvroomMob1 p[id^="pAgeMob"]').each(function(t,i){i.id.match(isNumber)<=n.val()?($(this).show(),$("#iChildMob"+this.id.match(isNumber)+"").val("ChildMob "+this.id.match(isNumber)+" Age")):($(this).hide(),$("#iChildMob"+this.id.match(isNumber)+"").val(""))}):$("#dvroomMob"+$(n).attr("id").match(isNumber)+' p[id^="pAgeMob"]').each(function(t,i){i.id.match(isNumber)<=n.val()?($(this).show(),$("#RoomMob"+$(n).attr("id").match(isNumber)+"_iChild"+this.id.match(isNumber)+"").val("ChildMob "+this.id.match(isNumber)+" Age")):($(this).hide(),$("#RoomMob"+$(n).attr("id").match(isNumber)+"_iChild"+this.id.match(isNumber)+"").val(""))})}function roomTravelers(n){$("#iRoomsAndPaxMob").val(n.id);$("#roomPaxTxtMob").html(n.innerHTML);$("#iRoomsAndPax option").each(function(){this.value===n.id?this.selected="selected":""});openPaxRoomlist();/Other/.test(n.id)?openRooms(n.id.match(isNumber),0):openRooms(n.id.substring(0,1),n.id.substring(2,3))}function openRooms(n,t){t===0?($("#dvpxperroomMob").slideDown("slow"),$('div[id^="dvroomMob"]').each(function(){this.id.match(isNumber)<=n?$(this).slideDown("slow"):($(this).slideUp("slow"),cleanRooms(this))})):($("#dvpxperroomMob").slideUp("slow"),$('div[id^="dvroomMob"]').each(function(){this.id.match(isNumber)>1?cleanRooms(this):firstRoom(n,t)}))}function openPaxRoomlist(){$("#dvpxroomlstMob").is(":visible")===!1?$("#dvpxroomlstMob").slideDown("slow"):$("#dvpxroomlstMob").slideUp("slow")}function firstRoom(n,t){$("#iAdultsMob").val(t);$("#iChildrenMob").val(0);$("#iChildMob1").val("");$("#iChildMob2").val("");$('#dvroomMob1 p[id^="pAgeMob"]').each(function(){$(this).hide()})}function cleanRooms(n){$("#"+n.id+"").find("input").each(function(n,t){switch(n){case 0:$("#"+t.id+"").val("0");break;case 1:$("#"+t.id+"").val("0");break;case 2:$("#"+t.id+"").val("");break;case 3:$("#"+t.id+"").val("")}});$("#"+n.id+' p[id^="pAgeMob"]').each(function(){$(this).hide()})}function stayChangeMob(n,t){$("#"+n+"").val(t);$("#"+n.replace("Mob","")+"").val(t)}function changeDateDesk(n,t){$('input[id="InDate1"]').val(t)}function changeDateMob(n,t){$('input[id="InDateMob1"]').val(t)}function errorAlert(n,t){var i=$("#"+n+"").position();return $("#"+n+"").addClass("errorClass"),/qNACity/.test(n)?$("#"+n+"").val(t):alert(t),window.scroll(0,i.top-100),!1}function hidedialog(){var n=Number($('div[id^="dvroomMob"]:visible').length);$('div[id^="dvroomMob"]').each(function(){if($(this).is(":visible")===!0){var i=0,t=this.id.match(isNumber),r=!0,u=!0;if(i=t==1?$(".inpAdult").val():$("#RoomMob"+t+"_iAdults").val(),i==""||i==0?r=t==null?errorAlert("iAdultsMob","Should be at least 1 adult in Room 1"):errorAlert("RoomMob"+t+"_iAdults","Should be at least 1 adult in Room"+t):"",r==!1)return!1;$("#"+this.id+' p[id^="pAgeMob"] select').each(function(){if($(this).is(":visible")==!0){console.log(this.id);var i=$(this).val();i==""||i==null||i==0?(u=errorAlert(this.id,"RoomMob"+t+": Child age is missing"),n++):($("#"+this.id.replace("Mob","")).val(i),$("#"+this.id+"").removeClass("errorClass"))}})}if(!u)return!1;n--});n===0?hidedialogCont():""}function hidedialogCont(){var t="",u,n,r,f,i,e;switch($("#CabinMob").val()){case"Y":t=", Economy";break;case"W":t=", Premium Economy";break;case"C":t=", Business";break;case"F":t=", First Class"}$("#wCabinMob").val()==="No"?t="":"";u=$("#iRoomsAndPaxMob").val();n=u.substring(0,1);$("#iRoom").val(n);$("#Rooms").val(n);n=n>1?n+" Rooms":n+" Room";r=u.split("|");i=0;f=/-/.test(r[1])?r[1].split("-"):r[1];for(p in f)i+=Number(f[p]);isNaN(i)?checkTotalPax()===!0?i=Number(totalPax):"":"";haveCook=0;e=n+", "+i+" Travelers"+t;$("#cabinRoomPaxMob").val(e);$("#paxModalMob").hide();$("body").removeClass("modal-open")}function builFixDatediv(n,t){var f,e,s="",r="",u=n.split(","),o;for(i=0;i<u.length;i++)s!=dateFormat(u[i],"mmm")&&(s=dateFormat(u[i],"mmm"),o=0,r=i==0?'<div style="padding:3px 1px;background-color:beige;">':r+'<\/div><div style="padding:3px 1px;background-color:beige;">',r=r+" "+s+" "+dateFormat(u[i],"yyyy")+": "),o==0?(f="'"+dateFormat(u[i],"mm/dd/yyyy")+"'",e="'"+t+"'",r=r+'<span id="fxDates" onclick="changeDaysLenght1('+f+","+e+')">'+dateFormat(u[i],"dd")+"<\/span>"):(f="'"+dateFormat(u[i],"mm/dd/yyyy")+"'",e="'"+t+"'",r=r+', <span id="fxDates" onclick="changeDaysLenght1('+f+","+e+')">'+dateFormat(u[i],"dd")+"<\/span>"),o=o+1;r=r+"<\/div>";$("#dvFixDates").html(r);setTimeout(function(){$("#dvFixDates").hide()},7e3)}function changeDaysLenght1(n,t){$("#"+t+"").val(n)}var packID,plcNA,pakNTS,popID,fixDatesdiv,totCities,msg="",TthumPic="",citiesAll=[],newdvCnt,backCook,ctySSPRO=[],ctyHotPRO=[],allCtySSPRO=[],allCtyHotPRO=[],HotDispl=[],SSDispl=[],objPics,picTotal,CoPic=0,CoMap=0,priceFilter=[],priceGuide=[],histFilter=[],startDate,isNumber=/[0-9]+/g,totalPax,myDate,fxDatesNET,deflt,ropx,rom,pax,pax2,pax3,paxMr,hwMCh,num,cookVal,setTop,topSet,arrAllHotCty,arrAllSSCty,between,betweenMob;let currentPic=0,pagePriceHistory=1;totalPax=0;myDate=new Date;$(window).bind("pageshow",function(n){n.originalEvent.persisted&&($("#imgPriceIt1").show(),$("#imgPriceIt2").show(),$("#imgLoading1").hide(),$("#imgLoading2").hide())});$(document).ready(function(){packID=$("#pakID").val();plcNA=$("#plcNA").val();pakNTS=$("#pakNTS").val();fixDatesdiv=$("#fxNetDates").val();$("#imgPriceIt1").show();$("#imgPriceIt2").show();$("#imgLoading1").hide();$("#imgLoading2").hide();$('span[id^="#ntsBubble"]').each(function(){$(this).tooltip()});$("#ntsBubble").length>0&&priceBubble("ntsBubble",pakNTS);totCities=$("#hwMnyCty").val();var t=getCookie("utmcampaign"),n;t!=null&&(n=t.split("="),$("#utm_campaign").length!=0&&($("#utm_campaign").val(jQuery.trim(n[1])),$("#valCook").html(n[1])),$("#utm_campaignMob").length!=0&&($("#utm_campaignMob").val(jQuery.trim(n[1])),$("#valCook").html(n[1])));$("#ovrCms").length>0&&callCMS($("#ovrCms").val(),"dvContOver");$(".paxRoomChAg").click(function(){$(this).select()});$(".paxRoomChAg").keyup(function(){$("#B"+this.id+"").val(this.value)});$('select[id*="iAdult"]').change(function(){$("#"+this.id.replace("A","B")+"").val(this.value)});$(".jxCoInf").click(function(){var n=$(this).attr("href");return winOpenCMS(n),!1});$('li[id*="dvTab"]').click(function(){opentabSection(this.id)});$('span[id^="bubble"]').each(function(){$(this).tooltip()});$(".img-modal__close, .img-modal__title").click(moreMediaClose);$("#imgForw").click(nextPicture);$("#imgBack").click(prevPicture);$("#prevPriceHistory").click(prevPriceHistory);$("#nextPriceHistory").click(nextPriceHistory);$("#seeMorePriceHistory").click(seeMorePriceHistory);$("#closeMorePriceHistory").click(closeMorePriceHistory);$(".modal__close").click(closeModal);$("#moreRelatedItineraries").click(showMoreRelatedItineraries);$("#staggerPaymentsInfo").click(showStaggerPaymentsInfo);$(".mob-tab").click(function(){selectMobTab(this.id)});setBubbles();aboutBUT();newDest();buildPics();readCookVal();getPriceHistory();fxDates=="0"&&dateByDest();$(".history-section__list").children().length<=7&&($(".history-section__wrapper-buttons, .history-section__mob-button").hide(),$(".history-section__list-wrapper > div:nth-child(1)").attr("style","height: auto"));$(".dvMpriceItMob").is(":visible")==!1?$(".dvMpriceItMob").show():"";$(".dvMpriceItMob").click(function(){validateForm()});fxDatesNET=$("#fxNetDates").val();fixDatesdiv=fxDatesNET;blockdates=$("#blockDates").val().split("|");$("#cabinRoomPaxMob").click(function(){$("body").addClass("modal-open");$("#paxModalMob").show();var n=$("#wCabinMob").val();n==="No"?$("#dvSelectCabinMob").hide():$("#dvSelectCabinMob").show();haveCook===1?($('#dvpxroomlstMob li[id="'+$("#iRoomsAndPaxMob").val()+'"]').trigger("click"),$("#dvpxroomlstMob").hide(),$('div p[id^="pAgeMob"] select').each(function(){this.value>0?$(this).parent("p").show():""}),$('.mob-calendar__cabin-item[id="'+$("#CabinMob").val()+'"]').trigger("click")):""});$("#btnWFlyMob").on("click",function(){$("#btnWFlyMob").addClass("active");$("#btnFlyMob").removeClass("active");$("#iDepCityTxtMob").show();$("#addFlight").val("True")});$("#btnFlyMob").on("click",function(){$("#btnWFlyMob").removeClass("active");$("#btnFlyMob").addClass("active");$("#iDepCityTxtMob").hide();$("#addFlight").val("False")});$("#aChgNtsMob").on("click",function(){$("#changeNightsMob").toggle("slow")});$('select[id^="StayNiteMob"]').click(function(){stayChangeMob(this.id,this.value)});$("input[id=InDateMob1]").change(function(){changeDateDesk(this.id,this.value)});$("input[id=InDate1]").change(function(){changeDateMob(this.id,this.value)});$("#dvpaxRoomMob").click(function(){openPaxRoomlist()});$("#dvpxroomlstMob li").click(function(){roomTravelers(this);changePaxByRoom(this.id,"iRoomsAndPax")});$('span[id^="adultPlusMob"]').click(function(){$('input[id^="RoomMob'+Number(this.id.match(isNumber))+'_"').removeClass("errorClass");adultPlus(this)});$('span[id^="adultMinusMob"]').click(function(){$('input[id^="RoomMob'+Number(this.id.match(isNumber))+'_"').removeClass("errorClass");adultMinus(this)});$('span[id^="childrenPlusMob"]').click(function(){childPlus(this)});$('span[id^="childrenMinusMob"]').click(function(){childMinus(this)});$(".mob-calendar__cabin-item").click(function(){changeCabin(this)});$('#iAdultsMob, input[id^="RoomMob"], select[id^="RoomMob"], select[id^=iChildMob]').click(function(){$(this).removeClass("errorClass")});dateByDestMob();$("#DoneModalMob").click(function(){hidedialog()});$("#BackModalMob").click(function(){hidedialog()});$("#buttReorder").click(function(){window.location=document.URL.replace("package","packagebyo")})});deflt="New York City (all Airports),  NY";rom="1";pax="2";arrAllHotCty=[];arrAllSSCty=[];DropDown.prototype={initEvents:function(){var n=this;n.dep.on("click",function(){return $(this).toggleClass("active"),!1});n.opts.on("click",function(){var t=$(this);n.val=t.text();n.index=t.index();$("#inpFromNA").val(n.val);$("#inpFromID").val(t.find("a").attr("lang"));n.placeholder.text(n.val);calreload(n.val)})},getValue:function(){return this.val},getIndex:function(){return this.index}};$(function(){var n=new DropDown($("#dep"));$(document).click(function(){$(".dropdownContainer").removeClass("active")});$(".dveachHotinTab, #cmsLink").click(function(){var n=$(this).attr("lang"),t=window.screenX+(window.outerWidth/2-550),i=window.screenY+(window.outerHeight/2-325);window.open(n,"new","height=650,width=1100,left="+t+",top="+i+",scrollbars=yes").focus()})});between=[];betweenMob=[];$.fn.serializeObject=function(){var n={},t=this.serializeArray();return $.each(t,function(){n[this.name.replace("Mob","")]?(n[this.name.replace("Mob","")].push||(n[this.name.replace("Mob","")]=[n[this.name.replace("Mob","")]]),n[this.name.replace("Mob","")].push(this.value||"")):n[this.name.replace("Mob","")]=this.value||""}),n};