function getNoOfPacksFeaturedItin(){let n="";n=$("#jplcCoId").val()===undefined?$("#plcID").val():$("#jplcCoId").val();fetch(SiteName+"/Api/GetNoOfPacksFeaturedItin/"+parseInt(n)).then(n=>n.json()).then(n=>{n[0]!=0&&($(".divBrowse").show(),$(".browseButton").html("Browse all "+n[0].noOfPacks+" customizable packages"))}).catch(n=>{console.error("Error fetching data of getNoOfPacksFeaturedItin :",n.message)})}function openArrow(n){$(".BGDown"+n).is(":visible")===!1?$(".BGDown"+n).slideDown():$(".BGDown"+n).slideUp()}function openDivInfo(n,t){var f="",r="",u;pic="pic"+t+n;divInf="dvInf"+t+n;divTxt="dvTxt"+t+n;divFee="dvFeed"+t+n;divRel="dvRel"+t+n;divWai="dvWait"+t+n;u="dvCom"+t+n;$("#"+divWai+"").html('<img src="https://pictures.tripmasters.com/siteassets/d/ajax-loader.gif" width="50" height="50" />');$("#"+divWai+"").show();imgSrc=$("#"+pic+"").attr("src");imgVal=imgSrc.indexOf("Plus");imgVal!=-1?($("#"+pic+"").attr("src","https://pictures.tripmasters.com/siteassets/d/minus.jpg"),$.ajax({type:"GET",url:SiteName+"/Api/Packages/getDataRelPacks/"+n,contentType:"application/json; charset=utf-8",dataType:"text",success:function(t){if(msg=t,msg!=""){for(r='<div class="Text_Arial11_LightBold" style="padding:5px 3px;">Related Package<\/div><div style="padding:2px 2px;" align="left">',strPrts=msg.split("@"),i=0;i<=strPrts.length-1;i++)strPrts[i].indexOf("^^")>-1&&(strPrts[i]=strPrts[i].replace("^^","")),echP=strPrts[i].split("|"),r=r+'<span style="float:left; margin-right:5px; margin-bottom:3px;">',r=r+'<a href="'+SiteName+"/"+echP[0].replace(/\s/g,"_").toLowerCase()+'/vacations" style="margin-right:10px">',r=r+'<span class="Text_Arial11_Light">',r=r+"<u>"+echP[0]+"<\/u>",r=r+"<\/span><\/a><\/span>";r=r+'<br style="clear:both"/><\/div>';$("#"+divRel+"").html(r);$("#"+divRel+"").show();$("#"+divTxt+"").attr("class","Text_Arial12");$("#"+u+"").html(f);$("#"+u+"").show();$("#"+divWai+"").html("");$("#"+divWai+"").hide();$("#arrow"+n+"").css({transform:"rotate(270deg)"});$("#"+divInf+"").slideDown()}},error:function(){$("#"+divWai+"").html("");$("#"+divWai+"").hide();$("#"+divInf+"").show()}})):($("#"+pic+"").attr("src","https://pictures.tripmasters.com/siteassets/d/Plus.jpg"),$("#"+divWai+"").html(""),$("#"+divWai+"").hide(),$("#arrow"+n+"").css({transform:"rotate(90deg)"}),$("#"+divInf+"").slideUp())}function featureItin(n){$(".dvEachFeatDesc").each(function(){var i=$(this).attr("id"),t=i.match(/[0-9]+/g);n==t?$("#"+i+"").is(":visible")==!1?($("#"+i+"").slideDown(),$("#BGDown"+t).slideDown(),$("#spArrow"+t+"").css({transform:"rotate(270deg)",right:"16px",top:"-4px"})):($("#"+i+"").slideUp(),$("#BGDown"+t).slideUp(),$("#spArrow"+t+"").removeAttr("style")):($("#"+i+"").slideUp(),$("#BGDown"+t).slideUp(),$("#spArrow"+t+"").removeAttr("style"))})}function openpoimap(n){ctylocLat=0;ctylocLong=0;var t=[],i=[],r={Id:n};$.ajax({type:"POST",url:SiteName+"/Api/Hotels/POIHotels/",contentType:"application/json; charset=utf-8",data:JSON.stringify(r),success:function(n){var r,u,f;objPOI=n;r=0;jQuery.each(objPOI,function(){t.push(Number(this.poI_Latitude));i.push(Number(this.poI_Longitude));r++});u=(Math.max.apply(Math,t)-Math.min.apply(Math,t))/2+Math.min.apply(Math,t);f=(Math.max.apply(Math,i)-Math.min.apply(Math,i))/2+Math.min.apply(Math,i);delete distLats;distLats=getDistanceFromLatLonInKm(Math.max.apply(Math,t),Math.max.apply(Math,i),Math.min.apply(Math,t),Math.min.apply(Math,i));delete ctyLatLong;ctyLatLong=Number(u)+"|"+Number(f);preBuildMap(n)},error:function(n){$("#dvGoogleMap").html(n.responseText)}})}function getDistanceFromLatLonInKm(n,t,i,r){var u=deg2rad(i-n),f=deg2rad(r-t),e=Math.sin(u/2)*Math.sin(u/2)+Math.cos(deg2rad(n))*Math.cos(deg2rad(i))*Math.sin(f/2)*Math.sin(f/2),o=2*Math.atan2(Math.sqrt(e),Math.sqrt(1-e));return 6371*o}function deg2rad(n){return n*(Math.PI/180)}function preBuildMap(){var n,t;$("#dvContent").show();n=ctyLatLong.split("|");t=n[0];lon=n[1];var r={center:new google.maps.LatLng(t,lon),zoom:9,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!0},i=new google.maps.Map(document.getElementById("dvContent"),r),u=0;jQuery.each(objPOI,function(){var t;u++;var f=this.poI_Latitude,e=this.poI_Longitude,o=new google.maps.Point(-10,12),r=new google.maps.Marker({icon:"https://pictures.tripmasters.com/siteassets/d/orange_ball.gif",position:new google.maps.LatLng(f,e),map:i,draggable:!1,raiseOnDrag:!0,labelContent:'<div class="bubbletitle">'+this.poI_Title+"<\/div>",labelAnchor:o,labelInBackground:!1,labelStyle:{opacity:1},title:this.poI_Title,zIndex:8998}),n='<div class="dvBublleStyle">';this.poI_PictureURL!="none"&&(n=n+'<img src="'+this.poI_PictureURL+'" align="left"/>');n=n+'<div style="font-weight:600; color:navy">'+this.poI_Title+"<\/div>";this.poI_Description!="none"&&(n=n+this.poI_Description);n=n+"<\/div>";t=new google.maps.InfoWindow({content:n,size:new google.maps.Size(40,40)});google.maps.event.addListener(r,"click",function(){closePoiInfoW(i,r,t)});infoPOIWindows.push(t)})}function closePoiInfoW(n,t,i){for(var r=0;r<infoPOIWindows.length;r++)infoPOIWindows[r].close();i.open(n,t)}var nameCountry;$(document).ready(function(){var n=0,t="";nameCountry=$("#jplcCo").val();moreExplore=$("#moreExplore").val();var i=$("#moreAreas").val(),o=$("#moreHighlights").val(),r=$("#moreLO").val(),u=$("#moreAreas").val(),f=$("#moreAttr").val(),e=$("#moreTravel").val();$(".dvMoreDetail").click(function(){var n=this.getAttribute("data-go-to");featureItin(n)});$(".dvMoreFeatBtn").click(function(){n=$(".dvFeatItin").offset().top;$(".dvEachFeatItinHide").is(":visible")===!1?($(this).html("Close See all Featured Itineraries <span>›<\/span>"),$(".dvEachFeatItinHide").slideDown(),$(".dvMoreFeatBtn span").css("transform","rotate(270deg)")):($(this).html("See all Featured Itineraries <span>›<\/span>"),$(".dvEachFeatItinHide").slideUp(),$(".dvMoreFeatBtn span").css("transform","rotate(90deg)"),window.scrollTo(0,n))});$(".dvEachCityMore").click(function(){n=$(".dvEachCity:nth-child(1)").offset().top;$(".dvEachCityHide").is(":visible")===!1?($(".dvEachCityHide").slideDown(),$(this).html("Close More Citites>>")):($(".dvEachCityHide").slideUp(),$(this).html("More Citites>>"),window.scrollTo(0,n-60))});$(".dvEachCity").click(function(){var n=this.getAttribute("data-go-to");$("#dvCtInf"+n+"").is(":visible")===!1?($("#dvCtInf"+n+"").slideDown(),$(".spCity").addClass("spCityUp")):($("#dvCtInf"+n+"").slideUp(),$(".spCity").removeClass("spCityUp"))});$(".dvViewDest, .spCombCou, .dvEachBoxTabMore, .dvEachBoxTabReg").click(function(){window.location=this.getAttribute("data-go-to")});$(".dvBoxMapLink, .mapOfInterest").click(function(){n=$(this).offset().top;$(".dvMbGPContainer").hide("slide",{direction:"right"},"slow");$(".Mob, .dvCombine, .sectionDescription, .reghighlights").hide("slide",{direction:"right"},"slow");window.scrollTo(0,0);$(".dvSlideContainer").show("slide",{direction:"right"},"slow");$("#dvContent").css({height:""+$(window).height()-150+"px"});openpoimap($("#plcID").val())});$(".dvMbBack").click(function(){t!=""?($("#dvContent").html(""),$("#dvContent").html(t),t=""):($("#dvContent").html(""),$(".dvMbBack").removeAttr("style"),$(".dvSlideContainer").hide("slide",{direction:"right"},"slow"),$(".dvMbGPContainer").show("slide",{direction:"right"},"slow"),$(".Mob, .dvCombine, .sectionDescription, .reghighlights").show("slide",{direction:"right"},"slow"),window.scrollTo(0,n-100))});$(".spCMSLink").click(function(){$(".dvMbBack").removeAttr("style");n=$(this).offset().top;var t=this.getAttribute("data-go-to").match(/\d+/);window.scrollTo(0,0);GetCMsContent(t[0])});$(document).on("click",".aCMStxtLink",function(n){n.preventDefault();t=$("#dvContent").html();var i=$(this).attr("href").match(/\d+/);window.scrollTo(0,0);GetCMsContent(i[0])});if($(window).scroll(function(){if($(".dvSlideContainer").is(":visible")){var n=document.body.getBoundingClientRect();n.top<-100?$(".dvMbBack").css({position:"fixed",top:"0",left:"0"}):n.top>-100&&$(".dvMbBack").css({position:"static"})}}),$(".dvCMSThreeImages").parent().css("display","none"),$(".moreButton").click(function(){$(".dvEachHide").is(":visible")===!1?($(this).html("Close All "+i+" <span>&rsaquo;<\/span>"),$(".dvEachHide").slideDown(),$("div.moreButton span").css("transform","rotate(270deg)")):($(this).html("See All "+i+" <span>&rsaquo;<\/span>"),$(".dvEachHide").slideUp(),$("div.moreButton span").css("transform","rotate(90deg)"))}),$(".moreButtonExpl").click(function(){$(".dvEachHideExpl").is(":visible")===!1?($(this).html("Close All "+moreExplore+"  <span>&rsaquo;<\/span>"),$(".dvEachHideExpl").slideDown(),$("div.moreButtonExpl span").css("transform","rotate(270deg)","top","-10px")):($(this).html("See All "+moreExplore+"  <span>&rsaquo;<\/span>"),$(".dvEachHideExpl").slideUp(),$("div.moreButtonExpl span").css("transform","rotate(90deg)"))}),$(".moreButtonAreas").click(function(){$(".dvEachHideAreas").is(":visible")===!1?($(this).html("Close All "+u+"  <span>&rsaquo;<\/span>"),$(".dvEachHideAreas").slideDown(),$("div.moreButtonAreas span").css("transform","rotate(270deg)")):($(this).html("See All "+u+"  <span>&rsaquo;<\/span>"),$(".dvEachHideAreas").slideUp(),$("div.moreButtonAreas span").css("transform","rotate(90deg)"))}),$(".moreButtonLO").click(function(){$(".dvEachHideliInterest").is(":visible")===!1?($(this).html("Close All "+r+"  <span>&rsaquo;<\/span>"),$(".dvEachHideliInterest").slideDown(),$("div.moreButtonLO span").css("transform","rotate(270deg)")):($(this).html("See All "+r+"  <span>&rsaquo;<\/span>"),$(".dvEachHideliInterest").slideUp(),$("div.moreButtonLO span").css("transform","rotate(90deg)"))}),$(".moreButtonTravel").click(function(){$(".dvEachHideliTravel").is(":visible")===!1?($(this).html("Close All "+e+"  <span>&rsaquo;<\/span>"),$(".dvEachHideliTravel").slideDown(),$("div.moreButtonTravel span").css("transform","rotate(270deg)")):($(this).html("See All "+e+"  <span>&rsaquo;<\/span>"),$(".dvEachHideliTravel").slideUp(),$("div.moreButtonTravel span").css("transform","rotate(90deg)"))}),$(".moreButtonAttr").click(function(){$(".dvEachHideliAttrt").is(":visible")===!1?($(this).html("Close All "+f+"  <span>&rsaquo;<\/span>"),$(".dvEachHideliAttrt").slideDown(),$("div.moreButtonAttr span").css("transform","rotate(270deg)")):($(this).html("See All "+f+"  <span>&rsaquo;<\/span>"),$(".dvEachHideliAttrt").slideUp(),$("div.moreButtonAttr span").css("transform","rotate(90deg)"))}),$("#overview").click(function(){$("#hideOverview").is(":visible")===!1?($("#hideOverview").slideDown(),$("#overview span").css("transform","rotate(270deg)")):($("#hideOverview").slideUp(),$("#overview span").css("transform","rotate(90deg)"))}),$(".dvWhatToExpect").click(function(){$(".hidedvWhatToExpect").is(":visible")===!1?($(".hidedvWhatToExpect").slideDown(),$(".dvWhatToExpect span").css("transform","rotate(270deg)")):($(".hidedvWhatToExpect").slideUp(),$(".dvWhatToExpect span").css("transform","rotate(90deg)"))}),$(".dvTitlecities").click(function(){$(".hidedvTitlecities").is(":visible")===!1?$(".hidedvTitlecities").slideDown():$(".hidedvTitlecities").slideUp()}),$(".dvCombine").click(function(){$(".hidedvCombine").is(":visible")===!1?$(".hidedvCombine").slideDown():$(".hidedvCombine").slideUp()}),viewUsed=="GP3_Area"||viewUsed=="GP3_City"){const n=document.querySelector(".browseBuild"),t=new IntersectionObserver((n,t)=>{n.forEach(n=>{n.isIntersecting&&(getNoOfPacksFeaturedItin(),t.unobserve(n.target))})},{root:null,rootMargin:"0px",threshold:.1});t.observe(n)}});var objPOI,map,ctylocLat=0,ctylocLong=0,infoPOIWindows=[];