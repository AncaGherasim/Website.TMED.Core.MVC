function winlocation(n){window.location=n}function showList(n,t){$("#divInfo"+n).is(":visible")?$("#divInfo"+n).hide():$("#divInfo"+n).show();t===1?relPackCallt4(n):""}function wait(n){for(var t=(new Date).getTime(),i=t;i<t+n;)i=(new Date).getTime()}function toggleClassMoreDetails(n){$("body").toggleClass("modal-pack-info-open");$("#fti-"+n+"-modal").toggleClass("is-hidden")}function otherMoreDetails(n,t){switch(t){case 2:goTo=-1}if(goTo==-1)return!1;$(".secPackInfo").each(function(){var i=$(this).attr("id"),t=i.match(isNumber);t==n?$(this).is(":visible")?($(this).slideUp(),$('p[id="down'+t+'"]').slideUp(),$('p[id="p'+t+'"]').find("span").css({transform:"rotate(45deg)",margin:"5px 10px"})):($(this).slideDown(),$('p[id="down'+t+'"]').slideDown(),$('p[id="p'+t+'"]').find("span").css({transform:"rotate(-135deg)",margin:"7px 10px"})):($(this).slideUp(),$('p[id="down'+t+'"]').slideUp(),$('p[id="p'+t+'"]').find("span").css({transform:"rotate(45deg)",margin:"5px 10px"}))});t===1?relPackCallt4(n):""}function relPackCallt4(n){var t="",r="",u="dvCom"+n,f="dvpkInf"+n,e="dvRel"+n;$.ajax({type:"GET",url:SiteName+"/Api/Packages/getDataRelPacks/"+n,contentType:"application/json; charset=utf-8",dataType:"text",success:function(o){if(msg=o,msg!==""){for(t='<div class="txt_grayLight11" style="padding:5px 3px;">Related Package<\/div><div style="padding:2px 2px;" align="left">',r='<div class="txt_11" style="padding:3px 3px 5px 3px;"><b>For more choices, combine cities found in this itinerary:<\/b><\/div><div style="padding:2px 2px;" align="left">',strPrts=msg.split("@"),i=0;i<=strPrts.length-1;i++)echP=strPrts[i].split("|"),t=t+'<span style="float:left; margin-right:5px; margin-bottom:3px;">',t=t+'<a href="'+SiteName+"/"+echP[0].replace(/\s/g,"_").toLowerCase()+'/vacations" style="margin-right:10px">',t=t+'<span class="txt_grayLight11">',t=t+"<u>"+echP[0]+"<\/u>",t=t+"<\/span><\/a><\/span>",echP[2]!=5&&(r=r+'<span style="float:left; margin-right:5px; margin-bottom:3px;"><a style="cursor:pointer;" class="falsecheckdop" id="falsedop'+echP[3]+'" >'+echP[0]+"<\/a>",r=r+'<input type="checkbox" name="dop'+echP[3]+'" id="dop'+echP[3]+'" style="display:none" value="'+echP[3]+"|"+echP[0]+'"/>',r=r+"<\/span>");t=t+'<br style="clear:both"/><\/div>';r=r+'<br style="clear:both"/><\/div>';$("#"+e+"").html(t);$("#"+u+"").html(r);$("#dvWait"+n+"").hide();$("#dvWait"+n+"").html("");$("#"+f+"").slideDown();activeCckBx("frm"+n)}},error:function(t){$("#dvWait"+n+"").html(t.responseText)}})}function activeCckBx(n){$("#"+n+" input:checkbox").each(function(){this.checked?$("#false"+this.id+"").addClass("falsecheckeddop"):$("#false"+this.id+"").removeClass("falsecheckeddop")});var t;$("#"+n+" .falsecheckdop").click(function(){return this.id.indexOf("falsedot")>-1?t=this.id.replace("falsedot",""):this.id.indexOf("false")>-1?t=this.id.replace("false",""):"",$(this).hasClass("falsecheckeddop")?($(this).removeClass("falsecheckeddop"),$("#"+t+"").removeAttr("checked")):($(this).addClass("falsecheckeddop"),$("#"+t+"").attr("checked",!0)),$(this.hash).trigger("click"),!1})}function imageSize(n,t){return n.match(img500)!=null||t=="M0"?(picW="290px",picMtp="0px",$(".selM").css("width","399px"),$("#dvallTHU").attr("style","width:258px;")):(picW="200px",picMtp="45px",$(".selM").css("width","399px"),$("#dvallTHU").attr("style","width:258px;")),[picW,picMtp]}function CarrouPicsBuild(n){for(CoPic=0,CoMap=0,i=0;i<n;i++)picClass=i===0?"picSel":"picNSel",objPics[i].imG_ImageType==="P0"?(CoPic++,TthumPic=TthumPic+'<span style="float:left;" class="Text_11" ><img id="Oipic'+CoPic+'" class="'+picClass+'" src="https://pictures.tripmasters.com'+objPics[i].imG_Path_URL.toLowerCase()+'" width="30" height="30" alt="'+objPics[i].imG_500Path_URL.toLowerCase()+'" title="'+objPics[i].imG_Title+'"/><br/><\/span>'):objPics[i].imG_ImageType==="M0"&&(CoMap++,TthumPic=TthumPic+'<span style="float:left;" class="Text_11"><img src="https://pictures.tripmasters.com'+objPics[i].imG_Path_URL.toLowerCase()+'" id="OipicMap'+CoMap+'"  class="'+picClass+'" width="30" height="30" alt="'+objPics[i].imG_500Path_URL.toLowerCase()+'" title="'+objPics[i].imG_Title+'"/><br/>map<\/span>',hvBigMap=1),ini=0,fin=i;if(picTotal<6)var t=18*(6-picTotal);else t=0;$("#dvallTHU #prev").css({"padding-left":""+t+"px","background-position":""+t+"px 0"});$("#thumbs").html(TthumPic);$("img.picSel").click(function(){changePic(this.id,this.src,this.title,this.alt)});$("img.picNSel").click(function(){changePic(this.id,this.src,this.title,this.alt)})}function sliceThumb(n,t,r){var e,u,f;if(TthumPic="",r==="prev"){if(t===picTotal-1?(e=Number(t-n),n=n-6,t=Number(t-e)-1):(n=n-6,t=t-6),n<0)return alert("No more images"),!1;for(u=n,f=n,i=n;i<=t;i++)picClass="picNSel",objPics[i].imG_ImageType=="P0"?(u++,TthumPic=TthumPic+'<span style="float:left;" class="Text_11" ><img id="Oipic'+u+'" class="'+picClass+'" src="https://pictures.tripmasters.com'+objPics[i].imG_Path_URL.toLowerCase()+'" width="30" height="30" alt="'+objPics[i].imG_500Path_URL.toLowerCase()+'" title="'+objPics[i].imG_Title+'"/><br/><\/span>'):objPics[i].imG_ImageType=="M0"&&(f++,TthumPic=TthumPic+'<span style="float:left;" class="Text_11"><img src="https://pictures.tripmasters.com'+objPics[i].imG_Path_URL.toLowerCase()+'" id="OipicMap'+f+'" class="'+picClass+'" width="30" height="30" alt="'+objPics[i].imG_500Path_URL.toLowerCase()+'" title="'+objPics[i].imG_Title+'"/><br/>map<\/span>'),ini=n,fin=i;$("#thumbs").hide("slide",{direction:"right"},200);$("#thumbs").html(TthumPic);$("#thumbs").show("slide",{direction:"left"},500);$("img.picSel").click(function(){changePic(this.id,this.src,this.title,this.alt)});$("img.picNSel").click(function(){changePic(this.id,this.src,this.title,this.alt)})}if(r=="next")if(t>picTotal-1&&(t=picTotal-1),n>=picTotal-1)alert("No more images");else{for(u=n-1,f=n-1,i=n;i<=t;i++)picClass="picNSel",objPics[i].imG_ImageType==="P0"?(u++,TthumPic=TthumPic+'<span style="float:left;" class="Text_11" ><img id="Oipic'+u+'" class="'+picClass+'" src="https://pictures.tripmasters.com'+objPics[i].imG_Path_URL.toLowerCase()+'" width="30" height="30" alt="'+objPics[i].imG_500Path_URL.toLowerCase()+'" title="'+objPics[i].imG_Title+'"/><br/><\/span>'):objPics[i].imG_ImageType==="M0"&&(f++,TthumPic=TthumPic+'<span style="float:left;" class="Text_11"><img src="https://pictures.tripmasters.com'+objPics[i].imG_Path_URL.toLowerCase()+'" id="OipicMap'+f+'" class="'+picClass+'" width="30" height="30" alt="'+objPics[i].imG_500Path_URL.toLowerCase()+'" title="'+objPics[i].imG_Title+'"/><br/>map<\/span>'),ini=n,fin=i;$("#thumbs").hide("slide",{direction:"left"},200);$("#thumbs").html(TthumPic);$("#thumbs").show("slide",{direction:"right"},500);$("img.picSel").click(function(){changePic(this.id,this.src,this.title,this.alt)});$("img.picNSel").click(function(){changePic(this.id,this.src,this.title,this.alt)})}}function changePic(n,t,i,r){var u="https://pictures.tripmasters.com"+r,f,e,o;r==="none"&&(u=t);n.indexOf("O")===-1?(f=$("#dvImgContOv").position(),$("#dvbk").hide(),$("#dvfr").hide(),$("#dvmediaPopUp").attr("style","position:absolute; z-index:9998; width:1010px; left:50%; margin-left:-505px; top:"+Number(f.top+610)+"px; height:auto; background-color:#FFF;"),$("#dvmediaPopUp").show(),$('img.picSel[id*="Kipic"]').attr("class","picNSel"),$('img.picSel[id*="Mipic"]').attr("class","picNSel"),$("#"+n+"").attr("class","picSel"),$("#dvFstPic").html('<img src="'+u.toLowerCase()+'" id="'+n.replace("O","B")+'"  alt="'+r+'" title="'+i+'" />'),n.indexOf("M")>-1?($("#dvMV").hide(),e=/[0-9]+/,o=n.match(e),$("#Mipic"+o+"").attr("class","picSel")):($("#dvMV").show(),$("#dvPicNa").html(i))):($('img[id*="Oipic"]').attr("class","picNSel"),$("#"+n+"").attr("class","picSel"),n.indexOf("Map")>-1||u.match(img500)!=null?($("#dvshowPIC").html('<img src="'+u.toLowerCase()+'" id="'+n.replace("O","B")+'" alt="'+r+'" title="'+i+'" width="290" height="290" onclick="moreMediaB(this.id, this.src, this.title, this.alt); " class="clsCursor"/>'),$(".selM").css("width","399px"),$("#dvallTHU").attr("style","width:258px;")):($("#dvshowPIC").html('<img src="'+u.toLowerCase()+'" id="'+n.replace("O","B")+'"  alt="'+r+'" title="'+i+'" style="margin-top:45px;" onclick="moreMediaB(this.id, this.src, this.title, this.alt);" class="clsCursor"/>'),$(".selM").css("width","399px"),$("#dvallTHU").attr("style","width:258px;")))}function popUpImagesNav(){thumPic="";thumMap="";hvMap=0;var n=0,r=0,t="picNSel";for(i=0;i<Number(picTotal);i++)t=i===0?"picSel":"picNSel",objPics[i].imG_ImageType==="P0"?(n++,thumPic=thumPic+'<img id="Kipic'+n+'" class="'+t+'" src="https://pictures.tripmasters.com'+objPics[i].imG_Path_URL.toLowerCase()+'" width="30" height="30" alt="'+objPics[i].imG_500Path_URL.toLowerCase()+'" title="'+objPics[i].imG_Title+'"/>'):(objPics[i].imG_ImageType==="M0"||objPics[i].imG_ImageType=="M1")&&(r++,thumMap=thumMap+'<img src="https://pictures.tripmasters.com'+objPics[i].imG_Path_URL.toLowerCase()+'" id="Mipic'+r+'" class="'+t+'" width="30" height="30" alt="'+objPics[i].imG_500Path_URL+'" title="'+objPics[i].imG_Title+'"/>',hvMap=1);newPicTot=n;$("#dvThuPic").html("Photos<br/>"+thumPic);hvMap==1?($("#dvThMp").show(),$("#dvThuMap").html("Map<br/>"+thumMap)):($("#dvThMp").hide(),$("#dvTabMap").hide());$("img.picSel").click(function(){changePic(this.id,this.src,this.title,this.alt)});$("img.picNSel").click(function(){changePic(this.id,this.src,this.title,this.alt)})}function swichImg(n){var e,f,t,u,i,r;e=newPicTot;f=$('img.picSel[id*="K"]');t=f.attr("id");t=t.replace("ipic","");t.indexOf("O")>-1&&(t=t.replace("O",""));t.indexOf("K")>-1&&(t=t.replace("K",""));n==="F"&&(t===e?alert("No more photos"):(u=Number(t)+1,r=objImgs[t].imG_500Path_URL,r==""&&(r=objImgs[u].imG_Path_URL),i=$("#Kipic"+u+""),$("#dvFstPic").html('<img src="https://pictures.tripmasters.com'+r.toLowerCase()+'" alt="'+i.attr("alt")+'" title="'+i.attr("title")+'"/>'),$("#dvPicNa").html(i.attr("title")),i.attr("class","picSel"),f.attr("class","picNSel")));n==="B"&&(t===1?alert("No more photos"):(u=Number(t)-1,r=objImgs[u-1].imG_500Path_URL,r===""&&(r=objImgs[u-1].imG_Path_URL),i=$("#Kipic"+u+""),$("#dvFstPic").html('<img src="https://pictures.tripmasters.com'+r.toLowerCase()+'" alt="'+i.attr("alt")+'" title="'+i.attr("title")+'"/>'),$("#dvPicNa").html(i.attr("title")),i.attr("class","picSel"),f.attr("class","picNSel")))}function buildPics(){var u=0,n,t="Bipic",r=3,f=$("#imgItemID").val();$.ajax({type:"GET",url:SiteName+"/Api/Packages/PicsForPacks/"+f,contentType:"application/json; charset=utf-8",dataType:"json",success:function(f){for(objPics=f,objImgs=$.grep(objPics,function(n){return n.imG_ImageType=="P0"}),picTotal=objPics.length,i=0;i<3;i++)aPic=aPic+'<img src="https://pictures.tripmasters.com'+objPics[i].imG_Path_URL.toLowerCase()+'" width="140" height="140" id="Bipic'+Number(i+1)+'" alt="'+objPics[i].imG_500Path_URL.toLowerCase()+'" title="'+objPics[i].imG_Title+'" onclick="moreMediaB(this.id, this.src, this.title, this.alt);" class="clsCursor"/>';$("#dvImgT26").html(aPic);var e=0;for(objPics.length<=3&&(e=objPics.length-1),objPics[e]&&(n=imageSize(objPics[e].imG_500Path_URL,objPics[e].imG_ImageType),objPics[e].imG_ImageType==="M0"&&(t="KipicMap",r=1),$("#dvshowPIC").html('<img src="https://pictures.tripmasters.com'+objPics[e].imG_500Path_URL.toLowerCase()+'" id="'+t+r+'" alt="'+objPics[e].imG_500Path_URL.toLowerCase()+'" title="'+objPics[e].imG_Title+'" width="'+n[0]+'" height="'+n[0]+'" style="margin-top:'+n[1]+'" onclick="moreMediaB(this.id, this.src, this.title, this.alt);" class="clsCursor"/>'),$("#dvshowPIC").show()),picTotal===3?CarrouPicsBuild(3):picTotal===4?CarrouPicsBuild(4):picTotal===5?CarrouPicsBuild(5):CarrouPicsBuild(6),m=0;m<Number(picTotal-1);m++)objPics[m].imG_ImageType==="M0"?($("#dvsmalMAP").html('<image src="https://pictures.tripmasters.com'+objPics[m].imG_500Path_URL+'" width="325" height="325" alt="'+objPics[m].imG_500Path_URL.toLowerCase()+'" title="'+objPics[m].imG_Title+'"/>'),$("#dvsmalMAP").show(),shwMaps=shwMaps+'<div align="center"><span class="Text_Arial12_LightBold">'+objPics[m].imG_Title+'<\/span><br/><br/><image src="https://pictures.tripmasters.com'+objPics[m].imG_500Path_URL+'" alt="'+objPics[m].imG_500Path_URL.toLowerCase()+'" title="'+objPics[m].imG_Title+'"/><\/div>',$("#dvShwMap").html(shwMaps),m=Number(picTotal-1)):u===1?$("#dvShwMap").html(shwMaps):$("#dvTabMap").hide()},error:function(n){$("#packPics").html(n.responseText)}});$('a[id*="prev"]').click(function(){return sliceThumb(Number(ini),Number(fin),this.id),!1});$('a[id*="next"]').click(function(){return sliceThumb(Number(ini+6),Number(fin+6),this.id),!1})}function moreMedia(){var n=objPics[0].imG_500Path_URL,t;n==undefined&&(n=objPics[0].imG_Path_URL);t=objPics[0].imG_Title;$("#dvFstPic").html('<img src="https://pictures.tripmasters.com'+n.toLowerCase()+'" title="'+t+'" alt="'+n.toLowerCase()+'"/>');$("#dvPicNa").html(t);popUpImagesNav();var i=$("#dvImgContOv").position();$("#dvMask").css({width:maskW,height:maskH});$("#dvMask").fadeTo("slow",.65);$("#dvmediaPopUp").attr("style","position:absolute; z-index:9999; width:1010px; left:50%; margin-left:-505px; top:"+Number(i.top+610)+"px; height:auto; background-color:#FFF;");$("#dvmediaPopUp").show();window.scrollTo(0,Number(i.top+600))}function moreMediaB(n,t,i,r){popUpImagesNav();var u=$("#dvImgContOv").position();$("#dvMask").css({width:maskW,height:maskH});$("#dvMask").fadeTo("slow",.8);$("#dvmediaPopUp").attr("style","position:absolute; z-index:9999; width:1010px; left:50%; margin-left:-505px; top:"+Number(u.top+610)+"px; height:auto; background-color:#FFF;");$("#dvmediaPopUp").show();window.scrollTo(0,Number(u.top+600));changePic(n.replace("B","K"),t,i,r)}function moreMediaCLS(){$("#dvMask").hide();$("#dvmediaPopUp").hide()}function scrollToTop(){$("body,html").animate({scrollTop:0},800)}function findPackst4(n){var h,t,o,s,r,c,u,f,e;for($("#"+n+" #allID").val()!=""&&$("#"+n+" #allID").val(""),$("#"+n+" #allNA").val()!=""&&$("#"+n+" #allNA").val(""),h=n,t=$("#"+h+"").serialize(),t=t.substring(0,t.indexOf("&__RequestVerificationToken")),c="",e=0,t=t.replace(/\+/g," "),t=t.replace(/\%7C/g,"|"),o=t.split("&"),i=0;i<o.length;i++)s=o[i].split("="),s[1]!=""&&(e=e+1,r=s[1].split("|"),e>1?(u=u+","+r[0],f=f+"_-_"+r[1].replace(/\s/g,"-")):(u=r[0],f=r[1].replace(/\s/g,"-")));if(u==undefined){alert("Please check at least one box. Thanks!");return}$("#allID").val(u);$("#allNA").val(f);window.location.href=SiteName+"/"+f.toLowerCase()+"/find-packages"}function openWinCMS(n,t){return centerWindow(t),!1}var pics="",aPic="",thumPic="",OthumPic="",TthumPic="",thumMap="",OthumMap="",picSize=200,shwMaps="",maskH,maskW,isNumber=/[0-9]+/g,userid,SiteName,goTo;$(document).ready(function(){var n=$("#placeNA").val(),t=$("#placeID").val();maskH=$(document).height();maskW=$(window).width();switch(userid){case 243:SiteName="https://www.tripmasters.com/europe/"}$(".browseButton, .buildButton, .eachHigh, .dvCustomIt, .dvSuggCustomIt").click(function(){winlocation(this.lang)});$(".moreButton").click(function(){$(".dvEachHide").is(":visible")===!1?($(this).html("Close More Highlights & Attractions <span>&rsaquo;<\/span>"),$(".dvEachHide").slideDown(),$("div.moreButton span").css("transform","rotate(270deg)")):($(this).html("More Highlights & Attractions <span>&rsaquo;<\/span>"),$(".dvEachHide").slideUp(),$("div.moreButton span").css("transform","rotate(90deg)"))});$(".buttonViewMore").click(function(){var n=this.id,t=n=="HalfPackImages"?"template-HalfPackImages":n=="SmallPackImages"?"template-SmallPackImages":"";$("."+t+" .li-Hide").length>0?($("."+t+" .li-Hide").slideDown().toggleClass("li-Hide li-Show").removeAttr("style"),$("#"+n+"").text($("#"+n+"").text().replace("View","Close"))):($("."+t+" .li-Show").slideUp().toggleClass("li-Show li-Hide").removeAttr("style"),$("#"+n+"").text($("#"+n+"").text().replace("Close","View")))});$(".moreTours").click(function(){var n=$(this).attr("id");showList(n,1)});$(".dveachOtherMore").click(function(){var n=this.lang;otherMoreDetails(n,1)});$(".dvotherClose span").click(function(){var n=this.id;otherMoreDetails(n,0)});$(".dvSuggestTitle a, .dveachSuggest2ndCol").click(function(){var n=this.id,t=$("#divInfo"+n+"");return t.is(":visible")===!1?(t.slideDown(),$('.dveachSuggest2ndCol[id="'+n+'"]').css("transform","rotate(270deg)"),otherMoreDetails(n,1)):(t.slideUp(),$('.dveachSuggest2ndCol[id="'+n+'"]').css("transform","rotate(90deg)","color","black")),!1});$("#imgForw").click(function(){swichImg("F")});$("#imgBack").click(function(){swichImg("B")});replaceSeoNoOfItems(t);$.ajax({type:"POST",url:SiteName+"/Api/TopSellersPackFeedback",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(t),success:function(t){var r,e,f,u;for(objListReviews=t,r='<ul class="ul-Flex">',e=0,i=0;i<=objListReviews.length-1;i++)r=r+'<li class="liBkg"><div class="div-ContainerFlex"><a href="'+SiteName+"/"+n.replace(/ /g,"_").toLowerCase()+"/"+objListReviews[i].PDL_Title.replace(/ /g,"_").toLowerCase()+"/package-"+objListReviews[i].PDLID+'"><p class="review_title">'+objListReviews[i].PDL_Title+"<\/p><\/a>",r=r+'<div class="review-times review_date"><span>Sold '+objListReviews[i].NoOfSales.toLocaleString("en-US")+" times <\/span><\/div>",f=new Date(objListReviews[i].BookingDate),r=r+'<div class="review-purchase"><span>Last purchase '+f.toLocaleDateString("en-US")+"<\/span><\/div>",r=r+'<div class="review-custrev review_date"><span>'+objListReviews[i].NoOfFeeds.toLocaleString("en-US")+" customer reviews<\/span><\/div>",r=r+'<div class="review-custrev"><a href="'+SiteName+"/"+n.replace(/ /g,"_").toLowerCase()+"/"+objListReviews[i].PDL_Title.replace(/ /g,"_").toLowerCase()+"/feedback-"+objListReviews[i].PDLID+'">See travelers itineraries and read feedback<\/a><br/><\/div>',u="",u=objListReviews[i].STP_NumOfNights==0?objListReviews[i].PDL_Duration==1?"1 night":objListReviews[i].PDL_Duration.toLocaleString("en-US")+" nights":objListReviews[i].STP_NumOfNights==1?"1 night":objListReviews[i].STP_NumOfNights.toLocaleString("en-US")+" nights",r=r+'<div class="review-nights review_date"><span>'+u+' from <span style="color:#f60;">'+objListReviews[i].STP_Save.toLocaleString("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0})+"*<\/span><\/span><\/div>",r=r+"<\/div><\/li>";r=r+"<\/ul>";$("#dReview").append(r)},error:function(n){console.log("Call TopSellersPackFeedback error: "+n.responseText)}})});goTo=0;