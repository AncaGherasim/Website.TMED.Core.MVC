function openArrow(n){$(".BGDown"+n).is(":visible")===!1?$(".BGDown"+n).slideDown():$(".BGDown"+n).slideUp()}function featureItin(n){$(".dvEachFeatDesc").each(function(){var i=$(this).attr("id"),t=i.match(/[0-9]+/g);n==t?$("#"+i+"").is(":visible")==!1?($("#"+i+"").slideDown(),$("#BGDown"+t).slideDown(),$("#spArrow"+t+"").css({transform:"rotate(270deg)","padding-right":"10px",top:"-10px"})):($("#"+i+"").slideUp(),$("#BGDown"+t).slideUp(),$("#spArrow"+t+"").removeAttr("style")):($("#"+i+"").slideUp(),$("#BGDown"+t).slideUp(),$("#spArrow"+t+"").removeAttr("style"))})}function openpoimap(n){ctylocLat=0;ctylocLong=0;$.ajax({type:"POST",url:"/europe/WS_Library.asmx/getPoiToMap",contentType:"application/json; charset=utf-8",dataType:"json",data:'{plcID:"'+n+'"}',success:function(n){var t,i,r;objPOI=eval("("+n.d+")");t=0;delete allLatLong;jQuery.each(objPOI,function(){allLatLong.push(this.POI_Longitude+"|"+this.POI_Latitude);allLong.push(this.POI_Longitude);ctylocLat=Number(ctylocLat)+Number(this.POI_Latitude);ctylocLong=Number(ctylocLong)+Number(this.POI_Longitude);t++});delete ctyLatLong;delete dynZoon;ctyLatLong=Number(ctylocLat/t)+"|"+Number(ctylocLong/t);i=Math.max.apply(Math,allLong);r=Math.min.apply(Math,allLong);jQuery.each(allLatLong,function(n,t){bPrt=t.split("|");(bPrt[0]=r)&&(lat1=bPrt[1],long1=bPrt[0]);(bPrt[0]=i)&&(lat2=bPrt[1],long2=bPrt[0]);delete bPrt});dynZoom=getDistanceFromLatLonInKm(lat1,long1,lat2,long2);preBuildMap(n)},error:function(n){$("#dvGoogleMap").html(n.responseText)}})}function getDistanceFromLatLonInKm(n,t,i,r){var u=deg2rad(i-n),f=deg2rad(r-t),e=Math.sin(u/2)*Math.sin(u/2)+Math.cos(deg2rad(n))*Math.cos(deg2rad(i))*Math.sin(f/2)*Math.sin(f/2),o=2*Math.atan2(Math.sqrt(e),Math.sqrt(1-e));return 6371*o}function deg2rad(n){return n*(Math.PI/180)}function preBuildMap(){var n,t;$("#dvContent").show();n=ctyLatLong.split("|");t=n[0];lon=n[1];var r={center:new google.maps.LatLng(t,lon),zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!0},i=new google.maps.Map(document.getElementById("dvContent"),r),u=0;jQuery.each(objPOI,function(){var t;u++;var f=this.POI_Latitude,e=this.POI_Longitude,o=new google.maps.Point(-10,12),r=new google.maps.Marker({icon:"https://pictures.tripmasters.com/siteassets/d/orange_ball.gif",position:new google.maps.LatLng(f,e),map:i,draggable:!1,raiseOnDrag:!0,labelContent:'<div class="bubbletitle">'+this.POI_Title+"<\/div>",labelAnchor:o,labelInBackground:!1,labelStyle:{opacity:1},title:this.POI_Title,zIndex:8998}),n='<div class="dvBublleStyle">';this.POI_PictureURL!="none"&&(n=n+'<img src="'+this.POI_PictureURL+'" align="left"/>');n=n+'<div style="font-weight:600; color:navy">'+this.POI_Title+"<\/div>";this.POI_Description!="none"&&(n=n+this.POI_Description);n=n+"<\/div>";t=new google.maps.InfoWindow({content:n,size:new google.maps.Size(40,40)});google.maps.event.addListener(r,"click",function(){closePoiInfoW(i,r,t)});infoPOIWindows.push(t)})}function closePoiInfoW(n,t,i){for(var r=0;r<infoPOIWindows.length;r++)infoPOIWindows[r].close();i.open(n,t)}var nameCountry,area,interests,attractions;$(document).ready(function(){var n=0,t="";nameCountry=$("#jplcCo").val();moreExplore=$("#moreExplore").val();area=$("#area").val();interests=$("#interests").val();attractions=$("#atractions").val();$(".dvFeatViewItTravel").on("click",function(){window.location=$(this).attr("data-go-to")});$(".dvMobCustomIt").on("click",function(){window.location=$(this).attr("data-url")});$(".dvMoreDetail").click(function(){var n=this.getAttribute("data-go-to");featureItin(n)});$(".dvMoreFeatBtn").click(function(){n=$(".dvFeatItin").offset().top;$(".dvEachFeatItinHide").is(":visible")===!1?($(this).html("Close See all Featured Itineraries <span>›<\/span>"),$(".dvEachFeatItinHide").slideDown(),$(".dvMoreFeatBtn span").css("transform","rotate(270deg)")):($(this).html("See all Featured Itineraries <span>›<\/span>"),$(".dvEachFeatItinHide").slideUp(),$(".dvMoreFeatBtn span").css("transform","rotate(90deg)"),window.scrollTo(0,n))});$(".dvEachCityMore").click(function(){n=$(".dvEachCity:nth-child(1)").offset().top;$(".dvEachCityHide").is(":visible")===!1?($(".dvEachCityHide").slideDown(),$(this).html("Close More Cities>>")):($(".dvEachCityHide").slideUp(),$(this).html("More Cities>>"),window.scrollTo(0,n-60))});$(".dvEachCity").click(function(){var n=this.getAttribute("data-go-to");$("#dvCtInf"+n+"").is(":visible")===!1?($("#dvCtInf"+n+"").slideDown(),$(".spCity").addClass("spCityUp")):($("#dvCtInf"+n+"").slideUp(),$(".spCity").removeClass("spCityUp"))});$(".dvViewDest, .spCombCou, .dvEachBoxTabMore, .dvEachBoxTabReg").click(function(){window.location=this.getAttribute("data-go-to")});$(".dvBoxMapLink").click(function(){n=$(this).offset().top;$(".dvMbGPContainer").hide("slide",{direction:"right"},"slow");window.scrollTo(0,0);$(".dvSlideContainer").show("slide",{direction:"right"},"slow");$("#dvContent").css({height:""+$(window).height()-150+"px"});openpoimap($("#plcID").val())});$(".dvMbBack").click(function(){t!=""?($("#dvContent").html(""),$("#dvContent").html(t),t=""):($("#dvContent").html(""),$(".dvMbBack").removeAttr("style"),$(".dvSlideContainer").hide("slide",{direction:"right"},"slow"),$(".dvMbGPContainer").show("slide",{direction:"right"},"slow"),window.scrollTo(0,n-100))});$(window).scroll(function(){if($(".dvSlideContainer").is(":visible")){var n=document.body.getBoundingClientRect();n.top<-100?$(".dvMbBack").css({position:"fixed",top:"0",left:"0"}):n.top>-100&&$(".dvMbBack").css({position:"static"})}});$(".dvCMSThreeImages").parent().css("display","none");$(".moreButton").click(function(){$(".dvEachHide").is(":visible")===!1?($(this).html("Close All "+area+" <span>&rsaquo;<\/span>"),$(".dvEachHide").slideDown(),$("div.moreButton span").css("transform","rotate(270deg)")):($(this).html("See All "+area+" <span>&rsaquo;<\/span>"),$(".dvEachHide").slideUp(),$("div.moreButton span").css("transform","rotate(90deg)"))});$(".moreButtonExpl").click(function(){$(".dvEachHideExpl").is(":visible")===!1?($(this).html("Close All "+moreExplore+"  <span>&rsaquo;<\/span>"),$(".dvEachHideExpl").slideDown(),$("div.moreButtonExpl span").css("transform","rotate(270deg)","top","-6px")):($(this).html("See All "+moreExplore+"  <span>&rsaquo;<\/span>"),$(".dvEachHideExpl").slideUp(),$("div.moreButtonExpl span").css("transform","rotate(90deg)"))});$(".moreButtonInt").click(function(){$(".dvEachHideInt").is(":visible")===!1?($(this).html("Close All "+interests+"  <span>&rsaquo;<\/span>"),$(".dvEachHideInt").slideDown(),$("div.moreButtonInt span").css("transform","rotate(270deg)")):($(this).html("See All "+interests+"  <span>&rsaquo;<\/span>"),$(".dvEachHideInt").slideUp(),$("div.moreButtonInt span").css("transform","rotate(90deg)"))});$(".moreButtonAt").click(function(){$(".dvEachHideAt").is(":visible")===!1?($(this).html("Close All "+attractions+"  <span>&rsaquo;<\/span>"),$(".dvEachHideAt").slideDown(),$("div.moreButtonAt span").css("transform","rotate(270deg)")):($(this).html("See All "+attractions+"  <span>&rsaquo;<\/span>"),$(".dvEachHideAt").slideUp(),$("div.moreButtonAt span").css("transform","rotate(90deg)"))});$("#overview").click(function(){$("#hideOverview").is(":visible")===!1?($("#hideOverview").slideDown(),$("#overview span").css("transform","rotate(270deg)")):($("#hideOverview").slideUp(),$("#overview span").css("transform","rotate(90deg)"))});$(".dvWhatToExpect").click(function(){$(".hidedvWhatToExpect").is(":visible")===!1?($(".hidedvWhatToExpect").slideDown(),$(".dvWhatToExpect span").css("transform","rotate(270deg)")):($(".hidedvWhatToExpect").slideUp(),$(".dvWhatToExpect span").css("transform","rotate(90deg)"))});$(".dvPackages").click(function(){$(".hidedvPackages").is(":visible")===!1?$(".hidedvPackages").slideDown():$(".hidedvPackages").slideUp()});$(".Countries").click(function(){$(".hidedvCountry").is(":visible")===!1?$(".hidedvCountry").slideDown():$(".hidedvCountry").slideUp()});$(".Cities").click(function(){$(".hidedvCities").is(":visible")===!1?$(".hidedvCities").slideDown():$(".hidedvCities").slideUp()});$(".dvCombine").click(function(){$(".hidedvCombine").is(":visible")===!1?$(".hidedvCombine").slideDown():$(".hidedvCombine").slideUp()});$(".dvBoxCombCounInfo").click(function(){var n=$(this).attr("lang");document.location.href=n})});var objPOI,ctylocLat=0,ctylocLong=0,allLat=[],allLong=[],allLatLong=[],lat1,lat2,long1,long2,dynZoom,bPrt,infoPOIWindows=[];