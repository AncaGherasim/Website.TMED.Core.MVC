function toggleClassMoreDetails(n){$("body").toggleClass("modal-pack-info-open");$("#fti-"+n+"-modal").toggleClass("is-hidden")}function otherMoreDetails(n,t){switch(t){case 2:goTo=-1}if(goTo==-1)return!1;$(".secPackInfo").each(function(){var i=$(this).attr("id"),t=i.match(isNumber);t==n?$(this).is(":visible")?($(this).slideUp(),$('p[id="down'+t+'"]').slideUp(),$('p[id="p'+t+'"]').find("span").css({transform:"rotate(45deg)",margin:"5px 10px"})):($(this).slideDown(),$('p[id="down'+t+'"]').slideDown(),$('p[id="p'+t+'"]').find("span").css({transform:"rotate(-135deg)",margin:"7px 10px"})):($(this).slideUp(),$('p[id="down'+t+'"]').slideUp(),$('p[id="p'+t+'"]').find("span").css({transform:"rotate(45deg)",margin:"5px 10px"}))});t===1?relPackCall(n):""}function relPackCall(n){var t="",r="",u="dvCom"+n,f="dvpkInf"+n,e="dvRel"+n;$.ajax({type:"GET",url:SiteName+"/Api/Packages/getDataRelPacks/"+n,contentType:"application/json; charset=utf-8",dataType:"text",success:function(o){if(msg=o,msg!=""){for(t='<div class="txt_grayLight11" style="padding:5px 3px;">Related Package<\/div><div style="padding:2px 2px;" align="left">',r='<div class="txt_11" style="padding:3px 3px 5px 3px;"><b>For more choices, combine cities found in this itinerary:<\/b><\/div><div style="padding:2px 2px;" align="left">',strPrts=msg.split("@"),i=0;i<=strPrts.length-1;i++)echP=strPrts[i].split("|"),t=t+'<span style="float:left; margin-right:5px; margin-bottom:3px;">',t=t+'<a href="'+SiteName+"/"+echP[0].replace(/\s/g,"_").toLowerCase()+'/vacations" style="margin-right:10px">',t=t+'<span class="txt_grayLight11">',t=t+"<u>"+echP[0]+" ("+echP[1]+")<\/u>",t=t+"<\/span><\/a><\/span>",echP[2]!=5&&(r=r+'<span style="float:left; margin-right:5px; margin-bottom:3px;"><a style="cursor:pointer;" class="falsecheckdop" id="falsedop'+echP[3]+'" >'+echP[0]+"<\/a>",r=r+'<input type="checkbox" name="dop'+echP[3]+'" id="dop'+echP[3]+'" style="display:none" value="'+echP[3]+"|"+echP[0]+'"/>',r=r+"<\/span>");t=t+'<br style="clear:both"/><\/div>';r=r+'<br style="clear:both"/><\/div>';$("#"+e+"").html(t);$("#"+u+"").html(r);$("#dvWait"+n+"").hide();$("#dvWait"+n+"").html("");$("#"+f+"").slideDown();activeCckBx("frm"+n)}},error:function(t){alert(t.responseText+" = error");$("#dvWait"+n+"").html(t.responseText)}})}function activeCckBx(n){$("#"+n+" input:checkbox").each(function(){this.checked?$("#false"+this.id+"").addClass("falsecheckeddop"):$("#false"+this.id+"").removeClass("falsecheckeddop")});var t;$("#"+n+" .falsecheckdop").click(function(){return this.id.indexOf("falsedot")>-1?t=this.id.replace("falsedot",""):this.id.indexOf("false")>-1?t=this.id.replace("false",""):"",$(this).hasClass("falsecheckeddop")?($(this).removeClass("falsecheckeddop"),$("#"+t+"").removeAttr("checked")):($(this).addClass("falsecheckeddop"),$("#"+t+"").attr("checked",!0)),$(this.hash).trigger("click"),!1})}function findPacks(n){var h,t,o,s,r,c,u,f,e;for($("#"+n+" #allID").val()!=""&&$("#"+n+" #allID").val(""),$("#"+n+" #allNA").val()!=""&&$("#"+n+" #allNA").val(""),h=n,t=$("#"+h+"").serialize(),t=t.substring(0,t.indexOf("&__RequestVerificationToken")),c="",e=0,t=t.replace(/\+/g," "),t=t.replace(/\%7C/g,"|"),o=t.split("&"),i=0;i<o.length;i++)s=o[i].split("="),s[1]!=""&&(e=e+1,r=s[1].split("|"),e>1?(u=u+","+r[0],f=f+"_-_"+r[1].replace(/\s/g,"-")):(u=r[0],f=r[1].replace(/\s/g,"-")));if(u==undefined){alert("Please check at least one box. Thanks!");return}$("#allID").val(u);$("#allNA").val(f);window.location.href=SiteName+"/"+f.toLowerCase()+"/find-packages"}function getMapPoiData(n){ctylocLat=0;ctylocLong=0;var t=[],i=[],r={Id:n};$.ajax({type:"POST",url:SiteName+"/Api/Hotels/POIHotels/",contentType:"application/json; charset=UTF-8",data:JSON.stringify(r),success:function(n){var r,u,f;objPOI=n;objPOI.length?(r=0,jQuery.each(objPOI,function(){t.push(Number(this.poI_Latitude));i.push(Number(this.poI_Longitude));r++}),u=(Math.max.apply(Math,t)-Math.min.apply(Math,t))/2+Math.min.apply(Math,t),f=(Math.max.apply(Math,i)-Math.min.apply(Math,i))/2+Math.min.apply(Math,i),delete distLats,distLats=getDistanceFromLatLonInKm(Math.max.apply(Math,t),Math.max.apply(Math,i),Math.min.apply(Math,t),Math.min.apply(Math,i)),delete ctyLatLong,ctyLatLong=Number(u)+"|"+Number(f),preBuildMap(n)):$(".map__button").attr("style","cursor: default")},error:function(n){$("#dvGoogleMap").html(n.responseText)}})}function getDistanceFromLatLonInKm(n,t,i,r){var u=deg2rad(i-n),f=deg2rad(r-t),e=Math.sin(u/2)*Math.sin(u/2)+Math.cos(deg2rad(n))*Math.cos(deg2rad(i))*Math.sin(f/2)*Math.sin(f/2),o=2*Math.atan2(Math.sqrt(e),Math.sqrt(1-e));return 6371*o}function deg2rad(n){return n*(Math.PI/180)}function buildMapPoi(){var i,r;map=null;var t=ctyLatLong.split("|"),u=t[0],f=t[1],e=new google.maps.LatLng(u,f),n=10;switch(!0){case distLats<50:n=11;break;case distLats>50&&distLats<150:n=10;break;case distLats>150:n=9}i={zoom:n,center:e,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},panControl:!0,zoomControl:!0,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("dvGoogleMap"),i);r=0;jQuery.each(objPOI,function(){var i,f,u;r++;var e=this.poI_Latitude,o=this.poI_Longitude,s=new google.maps.Point(4,25),t=new google.maps.Marker({position:new google.maps.LatLng(e,o),map:map,draggable:!1,raiseOnDrag:!0,icon:"https://pictures.tripmasters.com/siteassets/d/MapMarker_Ball__Orange_40.gif",labelAnchor:s,labelInBackground:!1,labelStyle:{opacity:1},title:this.poI_Title,zIndex:8998}),n='<div class="dvBublleStyle">';this.poI_PictureURL!="none"&&(n=n+'<img src="'+this.poI_PictureURL+'" align="left"/>');n=n+"<div>"+this.poI_Title+"<\/div>";this.poI_Description!="none"&&(n=n+this.poI_Description);n=n+"<\/div>";i=new google.maps.InfoWindow({content:n,size:new google.maps.Size(40,40)});google.maps.event.addListener(t,"click",function(){closePoiInfoW(map,t,i)});infoPOIWindows.push(i);f=this.poI_Title;u=new google.maps.InfoWindow({content:f,size:new google.maps.Size(20,20)});google.maps.event.addListener(t,"mouseover",function(){u.open(map,t)});google.maps.event.addListener(t,"mouseout",function(){u.close(map,t)})})}function preBuildMap(n){$("body").addClass("modal-pack-info-open");$("#modal").removeClass("is-hidden");buildMapPoi(n)}function closePoiInfoW(n,t,i){for(var r=0;r<infoPOIWindows.length;r++)infoPOIWindows[r].close();i.open(n,t)}function openWinCMS(n,t){return centerWindow(t),!1}var goTo,objPOI,map,ctylocLat,ctylocLong;let ctyID;const infoPOIWindows=[];$(document).ready(function(){ctyID=$("#plcID").val();$("#dvPoiMap").length>0&&($("#dvPoiMap").click(function(){getMapPoiData(ctyID)}),$(".modal__close").click(function(){$("body").removeClass("modal-pack-info-open");$("#modal").addClass("is-hidden")}));$("#moreButtonExpl").click(function(){$("#dvEachHideExpl").is(":visible")===!1?($("#moreButtonExpl span").html("Close All "),$("#dvEachHideExpl").slideDown()):($("#moreButtonExpl span").html("See All "),$("#dvEachHideExpl").slideUp())});$("#moreButtonReg").click(function(){$("#dvEachHideReg").is(":visible")===!1?($("#moreButtonReg span").html("Close All "),$("#dvEachHideReg").slideDown()):($("#moreButtonReg span").html("See All "),$("#dvEachHideReg").slideUp())});$("#moreButtonMr").click(function(){$("#dvEachHideMr").is(":visible")===!1?($("#moreButtonMr span").html("Close All "),$("#dvEachHideMr").slideDown()):($("#moreButtonMr span").html("See All "),$("#dvEachHideMr").slideUp())});$("#moreCities").click(function(){$("#dvmoreCities").removeClass("is-hidden")});$("#closeMoreCity").click(function(){$("#dvmoreCities").addClass("is-hidden")})});goTo=0;ctylocLat=0;ctylocLong=0;