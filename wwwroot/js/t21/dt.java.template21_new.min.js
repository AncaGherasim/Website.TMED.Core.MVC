function buildPics(){objPics==undefined?$.ajax({type:"GET",url:SiteName+"/Api/Packages/PicsForPacks/"+packID,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){objPics=n;objImgs=$.grep(objPics,function(n){return n.imG_ImageType==="P0"});picTotal=objPics.length;seeAllImages("picture-1",objPics[0].imG_500Path_URL.toLowerCase(),objPics[0].imG_Title,objPics[0].imG_500Path_URL)},error:function(n){console.error(n.responseText)}}):seeAllImages("picture-1",objPics[0].imG_500Path_URL.toLowerCase(),objPics[0].imG_Title,objPics[0].imG_500Path_URL)}function scrollToFeedbackSection(){$("html, body").animate({scrollTop:$("#dvTabFeed").offset().top},2e3)}function opentabSection(n){var t=n.replace("dvTab","");$('li[id*="dvTab"]').removeClass("selected");$('section[id*="dvShw"]').removeClass("selected");$("#dvTab"+t).addClass("selected");$("#dvShw"+t).addClass("selected");newdvCnt="dvCont"+t;switch(t){case"Itin":$("#cmsIti").val()==0?($(".hotels-section__list").children().length==0&&GetPackageHotels(),$(".tours-section__list").children().length==0&&GetPackageActivities()):$("#loadingItin").length!=0&&callCMS($("#cmsIti").val(),newdvCnt);break;case"Acco":$(".hotels-section__list").children().length==0&&GetPackageHotels();break;case"Acti":$(".tours-section__list").children().length==0&&GetPackageActivities();break;case"Tran":$("#cmsTra").val()==0||$("#loadingTran").length!=0&&callCMS($("#cmsTra").val(),newdvCnt);break;case"Cou":$('[id^="cmsLink-"]').length==0&&$('[id^="coun-cms-"]').children().length==0&&GetPackageCMSs();break;case"FAQ":$("#cmsFaq").val()==0||$("#loadingFAQ").length!=0&&callCMS($("#cmsFaq").val(),newdvCnt);break;case"Feed":$(".feedbacks-section__button-city").children().length==0&&GetPackageFeedbacks();break;case"Price":calreload()}}function openFeedbacksSection(){selectMobTab("mbTabFeed");const n=document.querySelector("#dvShwFeed .feedbacks-section__wrapper");n.scrollIntoView()}function changePic(n,t,i,r){let u="https://pictures.tripmasters.com"+r.toLowerCase();r==="none"&&(u=t);$(".img-modal__list li img").removeClass();$("#"+n).addClass("selected");currentPic=n;$("#dvFstPic").html(`<img src="${u}" id="${n.replace("O","B")}" alt="${r}" title=${i}" />`);$("#dvPicNa").html(i);const f=$('.img-modal__list img[id*="picture"]');for(let t=0;t<f.length;t++)if(f[t].id===n){$("#totalCurrent").html(`${t+1}`);break}}function moreMediaClose(){$("#dvmediaPopUp").addClass("is-hidden");$("body").removeClass("modal-open")}function nextPicture(){const n=$('.img-modal__list img[id*="picture"]');for(let t=0;t<n.length;t++)if(n[t].id===currentPic){const i=t+1<n.length?t+1:0;changePic(n[i].id,n[i].src,n[i].title,n[i].alt);break}}function prevPicture(){const n=$('.img-modal__list img[id*="picture"]');for(let t=0;t<n.length;t++)if(n[t].id===currentPic){const i=t-1<0?n.length-1:t-1;changePic(n[i].id,n[i].src,n[i].title,n[i].alt);break}}function priceBubble(n,t){$("#"+n+"").tooltip({position:{my:"center bottom-20",at:"center top",using:function(n,t){$(this).css(n);$("<div>").addClass("arrowgrey").addClass(t.vertical).addClass(t.horizontal).appendTo(this)}},content:function(){var n=t.split("|");return'<div class="Text_Arial12" style="margin:10px">This packages is recommended for '+n[0]+".<br/><br/><b>Customize it <\/b> "+n[1]+"<\/div>"}})}function nextPriceHistory(){const t=$(".history-section__item"),n=Math.ceil(t.length/7);pagePriceHistory<n&&($(".history-section__list").animate({top:-259*pagePriceHistory+"px"}),pagePriceHistory++,$("#prevPriceHistory").removeClass("disabled"),pagePriceHistory===n&&($("#prevPriceHistory").removeClass("disabled"),$("#nextPriceHistory").addClass("disabled")))}function prevPriceHistory(){pagePriceHistory>1&&($(".history-section__list").animate({top:-259*(pagePriceHistory-1)+259+"px"}),pagePriceHistory--,$("#nextPriceHistory").removeClass("disabled"),pagePriceHistory===1&&($("#prevPriceHistory").addClass("disabled"),$("#nextPriceHistory").removeClass("disabled")))}function seeMorePriceHistory(){const n=$(".history-section__item");n.removeClass("visually-hidden");$("#seeMorePriceHistory").addClass("is-hidden");$("#closeMorePriceHistory").removeClass("is-hidden")}function closeMorePriceHistory(){const n=$(".history-section__item");n.addClass("visually-hidden");n.slice(0,7).removeClass("visually-hidden");$("#seeMorePriceHistory").removeClass("is-hidden");$("#closeMorePriceHistory").addClass("is-hidden")}function openModal(){$(".modal__container").html('<div style="padding:15px 15px;text-align:center;"><img src="https://pictures.tripmasters.com/siteassets/d/wait.gif"><\/div>');$("#modal").removeClass("is-hidden");$("body").addClass("modal-open")}function closeModal(){$("#modal").addClass("is-hidden");$("body").removeClass("modal-open")}function popUpImagesNav(){let n="",t=0;for(let i=0;i<picTotal;i++)objPics[i].imG_ImageType==="P0"?(t++,n=n+`<li>
                                 <img id="picture-${t}" src="https://pictures.tripmasters.com${objPics[i].imG_Path_URL.toLowerCase()}" alt="${objPics[i].imG_500Path_URL}" title="${objPics[i].imG_Title}" onerror="this.src = 'https://pictures.tripmasters.com/siteassets/d/no-image.jpg'"/>
                               </li>`):(objPics[i].imG_ImageType==="M0"||objPics[i].imG_ImageType==="M1")&&(t++,n=`<li>
                        <img id="picture-${t}" src="https://pictures.tripmasters.com${objPics[i].imG_Path_URL.toLowerCase()}" alt="${objPics[i].imG_500Path_URL}" title="${objPics[i].imG_Title}" onerror="this.src = 'https://pictures.tripmasters.com/siteassets/d/no-image.jpg'"/>
                      </li>`+n);$("#dvThuPic").html(n);$("#total").html(`/${picTotal}`);$(".img-modal__list li img").click(function(){changePic(this.id,this.src,this.title,this.alt)})}function moreMediaB(n,t,i,r){popUpImagesNav();changePic(n.slice(3,n.length),t,i,r);$("#dvmediaPopUp").removeClass("is-hidden");$("body").addClass("modal-open")}function seeAllImages(n,t,i,r){popUpImagesNav();changePic(n,t,i,r);$("#dvmediaPopUp").removeClass("is-hidden");$("body").addClass("modal-open")}function showRelatedItineraries(n){openModal();let t,i="";$.ajax({type:"POST",url:SiteName+"/Api/PackInfoXID/"+n,contentType:"application/json; charset=utf-8",dataType:"text",success:function(n){t=n.split("|");const o=`${SiteName}/${plcNA.replace(/\s/g,"_").toLowerCase()}/${t[1].replace(/\s/g,"_").toLowerCase()}/package-${t[0].replace('"',"")}`,s=Number(t[6])+Math.ceil(t[6]/2),r=t[9].split("<\/br>").slice(0,-1);let u="";for(let n=0;n<r.length;n++)u+=`<li>${r[n]}</li>`;let f="";formatCurrency(t[4])!=="$0"&&(f+=`<p class="related-modal__price">${t[6]} ${t[3]==1?"to"+s:""} nights from <span>${formatCurrency(t[4])}</span></p>`);let e="";t[7]>0&&(e+=`<a class="related-modal__review-link" href="${feedLink}">Customer feedback (${t[7]})</a>`);i=`<div class="related-modal">
                          <h2>${t[1]}</h2>
                          <p class="related-modal__description">
                              <img src="https://pictures.tripmasters.com${t[7].toLowerCase()}" align="left" />
                              ${t[2]}
                          </p>
                          <div class="related-modal__wrapper">
			                  <div class="related-modal__includes">
                                  <p>This ${t[6]} night sample itinerary includes:</p>
                                  <ul>${u}</ul>
                              </div>
                              <div class="related-modal__customize">
                                  ${f}
                                  <a class="related-modal__customize-link" href="${o}">Customize It</a>
                                  ${e}
                              </div>
                         </div>
                     </div>`;$(".modal__container").html(i)},error:function(n){$(".modal__container").html(n.responseText)}})}function selectMobTab(n){if($("#"+n).hasClass("selected"))$("#"+n).removeClass("selected"),$("#"+n+"~ .first-container").hide("slow");else{$("#"+n).addClass("selected");$("#"+n+"~ .first-container").show("slow");var t=n.replace("mbTab","");newdvCnt="dvCont"+t;switch(t){case"Itin":$("#cmsIti").val()==0?($(".tours-section__list").children().length==0&&GetPackageActivities(),$(".hotels-section__list").children().length==0&&GetPackageHotels()):$("#loadingItin").length!=0&&callCMS($("#cmsIti").val(),newdvCnt);break;case"Acco":$(".hotels-section__list").children().length==0&&GetPackageHotels();break;case"Acti":$(".tours-section__list").children().length==0&&GetPackageActivities();break;case"Tran":$("#cmsTra").val()==0||$("#loadingTran").length!=0&&callCMS($("#cmsTra").val(),newdvCnt);break;case"Cou":$('[id^="cmsLink-"]').length==0&&$('[id^="coun-cms-"]').children().length==0&&GetPackageCMSs();break;case"FAQ":$("#cmsFaq").val()==0||$("#loadingFAQ").length!=0&&callCMS($("#cmsFaq").val(),newdvCnt);break;case"Feed":$(".feedbacks-section__button-city").children().length==0&&GetPackageFeedbacks()}}}function showThisItineraries(n){openModal();$.ajax({type:"GET",url:SiteName+"/Api/Packages/SamplePrices/"+n,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){const i=n;let t="";jQuery.each(i,function(){let n=new Date(this.samDTE);t+='<div class="history-modal"><p class="history-modal__title"> '+this.samNTS+" nights. from $"+dollarUSLocale.format(this.samPRC)+' w/air, hotel and air taxes *<\/p><p class="history-modal__description"><b>This sample price includes ALL air taxes & fuel surcharges:<\/b> priced within the past 7 days for arrival on '+n.toLocaleDateString("en-US")+", departure from "+this.samAIP+'. Choose your own departure city and dates.<\/div><p class="history-modal__subtitle">This '+this.samNTS+' night sample itinerary includes:<\/p><ul class="history-modal__list">'+this.samITIN+"<\/ul><\/div>"});$(".modal__container").html(t)},error:function(n){$(".modal__container").html(n.responseText)}})}function showStaggerPaymentsInfo(){openModal();const n=`<div class="modal-stagger-payment">
                       <h2>Stagger your Payments:</h2>
                       <p>If you are traveling more than 60 days from now and your package is more than $2,000, you will be able to stagger your payments in several installments!</p>
                   </div>`;$(".modal__container").html(n)}function showMoreRelatedItineraries(){openModal();const i=$("#inpRelItin").val(),r=i.split("@");let t="",n="";$.each(r,function(){const t=this.split("|");if(t[0]!==packID)if(n+=`<li><a href="${SiteName}/${plcNA.replace(/\s/g,"_").toLowerCase()}/${t[1].replace(/\s/g,"_").toLowerCase()}/package-${t[0]}"><span class="more-relared-modal__name">${t[1]}</span>`,t[2]!==9999&&t[2]!==""){const i=Number(t[3])+Math.ceil(t[3]/2);n+=`<span class="more-relared-modal__night">${t[3]} ${t[4]===1?"to "+i:""} + nights from <span>${formatCurrency(t[2])}</span></span></a></li>`}else n+="<\/a><\/li>"});t+=`<div class="more-relared-modal">
               <h2 class="more-relared-modal__title">Related Itineraries:</h2>
               <ul class="more-relared-modal__list">
               ${n}  
               </ul>
               </div>`;$(".modal__container").html(t)}function relIntForm(n,t){window.location=n+"?relItin="+t}function setCookie(n,t,i){var r=new Date;r.setTime(r.getTime()+i*864e5);document.cookie=n+"="+escape(t)+(i==null?"":";expires="+r.toGMTString())}function getCookie(n){return document.cookie.length>0&&(c_start=document.cookie.indexOf(n+"="),c_start!=-1)?(c_start=c_start+n.length+1,c_end=document.cookie.indexOf(";",c_start),c_end==-1&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):null}function formatCurrency(n){var i,t;for(n=n.toString().replace(/\$|\,/g,""),isNaN(n)&&(n="0"),sign=n==(n=Math.abs(n)),n=Math.floor(n*100+.50000000001),cents=n%100,n=Math.floor(n/100).toString(),cents<10&&(cents="0"+cents),i=Math.floor(n.length),i=Number(i)-1,t=0;t<Math.floor(Number(i+t)/3);t++)n=n.substring(0,Number(n.length)-(4*t+3))+","+n.substring(Number(n.length)-(4*t+3));return(sign?"":"-")+"$"+n}function divToShow(n){$("#dv"+n+"").show()}function divToHide(n){$("#dv"+n+"").hide()}function scrollToTop(){$("body,html").animate({scrollTop:0},800)}function callCMS(n,t){$.ajax({type:"GET",url:SiteName+"/Api/Packages/getDataThisCMS/"+n,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){msg=n;msg!=""&&($("#"+t+"").html(n[0].cmS_Content),cmsoptimizeLinks(t))},error:function(n){$("#"+t+"").html(n.responseText);alert(n.responseText+" = error")}})}function cmsoptimizeLinks(n){$("#"+n+"").find("a").each(function(){var n=$(this).attr("href"),t,r,i;this.className!="aCMStxtLink"?(/javascript:/.test(n)?(t=n.indexOf("("),r=n.indexOf(")"),i=n.lastIndexOf("'"),n=i==-1?n.substring(Number(t+2),Number(r-1)):n.substring(Number(t+2),Number(i))):"",/\/latin\/|\/asia\//.test(n)||(/tripmasters.com/.test(n)?(n=n.replace("https://",""),n=n.replace(/tripmasters.com\/|www.tripmasters.com\//,"")):"",/europeandestinations.com/.test(n)?(n=n.replace("https://",""),n=n.replace("http://",""),n=n.replace(/europeandestinations.com\/|www.europeandestinations.com\//,"")):"",/\?/.test(n)?"":n=n+"?cms&wh=0&wf=0",this.href=/\/europe\//.test(n)?"/"+n:"/"+n,this.className!="aCMStxtLink"?$(this).addClass("aCMStxtLink").attr("rel","700,500").popupCMSNewWindow({centerBrowser:1,heigh:500,width:700}):"")):(/\?/.test(n)?"":n=n+"?cms&wh=0&wf=0",/\/europe\//.test(n)?"":/https:\/\/www.tripmasters.com\//?"":n="/europe"+n,$(this).attr("href",""+n+"").popupCMSNewWindow({centerBrowser:1,heigh:500,width:700}))})}function aboutBUT(){var n;arrCitiesInfo.forEach(function(t){i=t[0];$('[id^="aboutPL'+i+'"]').click(function(t){t.preventDefault();$('[id^="cmsLink-"]').length==0&&$('[id^="coun-cms-"]').children().length==0&&GetPackageCMSs();n=$(this).attr("id").replace("aboutPL","aboutDIV");$(".backdrop-about").removeClass("is-hidden");$("#"+n+"").show()});$('[id^="aboutCls'+i+'"]').click(function(){$(".backdrop-about").addClass("is-hidden");$("#"+n+"").hide()});$('[id^="aboutCAL'+i+'"]').length>0&&$('[id^="aboutCAL'+i+'"]').click(function(t){t.preventDefault();$('[id^="cmsLink-"]').length==0&&$('[id^="coun-cms-"]').children().length==0&&GetPackageCMSs();n=$(this).attr("id").replace("aboutCAL","aboutDIV");$(".backdrop-about").removeClass("is-hidden");$("#"+n+"").show()});$('[id^="aboutOVR'+i+'"]').length>0&&($('[id^="aboutOVR'+i+'"]').attr("style","border-bottom:1px dotted #4E73AB;"),$('[id^="aboutOVR'+i+'"]').click(function(){$('[id^="cmsLink-"]').length==0&&$('[id^="coun-cms-"]').children().length==0&&GetPackageCMSs();n=$(this).attr("id").replace("aboutOVR","aboutDIV");$(".backdrop-about").removeClass("is-hidden");$("#"+n+"").show()}))})}function winOpenCMS(n){return centerWindow(n),!1}function ObjectPosition(n){var t=0,i=0;if(n.offsetParent)do t+=n.offsetLeft,i+=n.offsetTop;while(n=n.offsetParent);return[t,i]}function recommendedHotels(n,t){openModal();$.ajax({type:"POST",url:SiteName+"/Api/recommHotels/"+n,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){var i,r;hotRec=n;i='<div style="text-align:left; padding: 10px 10px 1px 10px;"><span class="Blue-Arial14">'+hotRec.length+" hotels offered in "+t+"<\/span><\/div>";i=i+'<div class="Orange-Arial12NB" align="left" style="padding:10px 10px;">You will be able to select your hotel in the next step<\/div>';r="auto";hotRec.length>4&&(r="270px",$("#divContent").attr("style","height:370px; width:auto; padding:15px 40px;"));i=i+'<div style="overflow:auto; height:'+r+'; padding:1px 5px 1px 20px">';jQuery.each(hotRec,function(){i=i+'<div align="left" class="Text_12_Bold" style="padding:15px 10px 3px 10px;">'+this.pdL_Title+"<\/div>";i=i+'<div align="left" class="Text-Light_Med" style="padding:5px 10px 3px 20px;">';i=this.gipH_TNTournetRating.indexOf("Stars")>-1?i+'<img src="https://pictures.tripmasters.com/siteassets/d/Stars_'+this.gipH_TNTournetRating.replace(/\s/g,"_").replace("+","_Plus")+'.gif" align="absmiddle" />&nbsp;&nbsp;'+this.gipH_TNTournetRating+" rating<\/span>":i+'<img src="https://pictures.tripmasters.com/siteassets/d/'+this.gipH_TNTournetRating.replace(/\s/g,"_").toLowerCase()+'.gif" align="absmiddle" />&nbsp;&nbsp;'+this.gipH_TNTournetRating+" rating<\/span>";this.sorting<10&&(i=i+'&nbsp;&nbsp;<img src="https://pictures.tripmasters.com/siteassets/d/favorite.gif" align="absmiddle">');i=i+"<\/div>";var t=this.spD_Features,n="";t.indexOf("400")>-1&&(n=n+"Honeymoon and Romance");n!=""&&(i=i+'<div style="padding:2px 10px 10px 20px; margin-bottom:3px;" align="left"><b>Ideal for:<\/b> '+n+" <\/div>");this.ptY_Description!="none"&&(i=i+'<div style="padding:2px 10px 10px 20px; border-bottom:1px solid #CCCCCC; margin-bottom:5px;" align="left">'+this.ptY_Description+"<\/div>")});i=i+"<\/div>";$(".modal__container").html(i)},error:function(n){alert(n.responseText+" = error");$(".modal__container").html(n.responseText)}})}function recommendedSS(n,t,i){objPOS=0;objPOS=$("#"+i+"").offset();openModal();$.ajax({type:"POST",url:SiteName+"/Api/RecommSS/"+n,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){var i,r;hotRec=n;i='<div style="text-align:left; padding: 10px 10px 1px 10px;"><span class="Blue-Arial14" >'+hotRec.length+" Things to do in "+t+"<\/span><\/div>";i=i+'<div class="Orange-Arial12NB" align="left" style="padding:10px 10px;">You will be able to select your activities during the booking process<\/div>';r="auto";hotRec.length>4&&(r="270px",$("#divContent").attr("style","height:auto; width:auto; padding:15px 40px;"));i=i+'<div style="overflow:auto; height:'+r+'; padding:1px 5px 1px 20px">';jQuery.each(hotRec,function(){i=i+'<div align="left" class="Text_12_Bold" style="padding:15px 10px 3px 10px;"><span onmouseover="divToShow('+this.pdlid+')" style="cursor:pointer">'+this.pdL_Title+"<\/span><\/div>";i=i+'<div id="dv'+this.pdlid+'" style="padding:10px 10px; display:none; overflow: auto; height:auto; width: 400px; border:1px solid #CCCCCC;" align="left"><div align="right" style="padding:2px 2px;" class="Text_12"><span onclick="divToHide('+this.pdlid+')" style="cursor:pointer;" class="Editor_Package_DaysNts">close [X]<\/span><\/div>'+this.spD_Description+"<\/div>"});i=i+"<\/div>";$(".modal__container").html(i)},error:function(n){alert(n.responseText+" = error");$(".modal__container").html(n.responseText)}})}function openFeedsContainer(n,t){$(".feedbacks-section__button").removeClass("selected");$(".feedbacks-section__button-city").removeClass("selected");let r;if(n=="P"){$(".feedbacks-section__button").addClass("selected");var i=$("#PVal"+t).val().split("|");i[1]==0?$("#OverAllFeeds").hide():$("#OverAllFeeds").show();$("#dvNoOfFeeds").text(i[0]+" Reviews");$("#dvStarsOverAll").css("width",i[2]+"px");$("#dvStarsOverAllStr").text(i[1]+" out of 5 stars");r=i[0]}if(n=="C"){$(".feedbacks-section__button-city").addClass("selected");let n=allcouFeedNo.filter(n=>n[0]==t);n[0][2]==0?$("#OverAllFeeds").hide():$("#OverAllFeeds").show();$("#dvNoOfFeeds").text(n[0][1]+" Reviews");$("#dvStarsOverAll").css("width",n[0][3]+"px");$("#dvStarsOverAllStr").text(n[0][2]+" out of 5 stars");r=n[0][1]}createPagination(n,t,1,r);OpenPage(1,n,t)}function createPagination(n,t,i,r){$(".dvPaginas").pagination("destroy");var u=r;$(".dvPaginas").pagination({pages:Math.ceil(u/10),itemsOnPage:10,cssStyle:"light-theme",onPageClick:function(i){return OpenPage(i,n,t),!1}})}function OpenPage(n,t,i){$("#dvFeeds").animate({opacity:".0"},100);$("#dvFeeds").html('<div id="imgWait" style="padding:100px; text-align:center"><img id="imgWait" src="https://pictures.tripmasters.com/siteassets/d/ajax-loader.gif"/><\/div>');$("#dvFeeds").animate({opacity:"1"},0);$("#dvWaitFeeds").show();$.ajax({type:"GET",url:SiteName+"/Package/GetCustFeed/"+t+"/"+n+"/"+i,success:function(n){$("#dvFeeds").html(n).show()},error:function(n){$("#dvFeeds").html(n.responseText)}})}function calreload(n){startDate="";histFilter=[];priceFilter=[];deflt=$(".spdepair").text();n===undefined?($(".spdepair").html(deflt),priceFilter=$.grep(priceGuide,function(n){return n.plC_Title===deflt})):priceFilter=$.grep(priceGuide,function(t){return t.plC_Title===n});var t=0;jQuery.each(priceFilter,function(){var i,n,r;t===0?(i=new Date,i=i.setDate(i.getDate()+45),startDate=i):"";n="$"+Math.round(this.reD_PackagePrice)+"*";n=n+"    - ";n=this.reD_Nights.toString().length===1?n+"    "+this.reD_Nights+" nights":n+"  "+this.reD_Nights+" nights";r={title:n,start:""+this.reD_StartDate+"",className:"gui"+this.redid+""};histFilter.push(r);t++});$("#PriceGuideCalendar").guideCalendar("destroy");$("#PriceGuideCalendar").html('<div style="text-align:center; padding:50px;"><img src="https://pictures.tripmasters.com/siteassets/d/ajax-loader.gif"/><br/>loading ...<br/><\/div>');setTimeout(guideCal,1e3)}function guideCal(){$("#PriceGuideCalendar").html("");$("#PriceGuideCalendar").guideCalendar({header:{left:"prev",center:"title",right:"next"},defaultDate:startDate,weekMode:"liquid",editable:!1,eventLimit:!0,events:histFilter});clickAnchor();$(".fc-more").click(function(){clickAnchor()})}function clickAnchor(){$(".dvPopUpOrangeTopL").hide();$(".dvPopUpOrangeTopR").hide();$(".aprice").click(function(){var i=this.id,n,t;$(".dvPopUpOrangeTopR").is(":visible")==!0?$(".dvPopUpOrangeTopR").hide():"";$(".dvPopUpOrangeTopL").is(":visible")==!0?$(".dvPopUpOrangeTopL").hide():"";n=$("#inpFromNA").val();t=$("#inpFromID").val();$("#BsDepCity").val(n);$("#sDepCity").val(n);$("#iDepCity").val(t);$("#BiDepCity").val(t);$("#InDate1").val(i);$("#BInDate1").val(i);$(window).resize(function(){$("#dvPopCal").center()});$('[id^="gToday"]').css("position","fixed");scrollToTop()});$("[class*='gui']").click(function(){var i=$(this).attr("class").match(isNumber),r=[],t=$(this).offset(),u=$(this).position(),n="";r=$.grep(priceGuide,function(n){return n.redid==Number(i)});$.each(r,function(){var f=new Date(this.reD_TXMLTime),r=new Date(this.reD_StartDate),e="'"+this.plC_Title+"',"+this.plcid+",'"+dateFormat(r.setDate(r.getDate()+1),"mm/dd/yyyy")+"'";n="<p><span><b>"+this.reD_Nights+" Nights <\/b><\/span><b>from $"+Math.round(this.reD_PackagePrice)+" w/air,  hotel &amp; air taxes*<\/b><\/p><p> <b>This sample price includes ALL air taxes &amp; fuel surcharges:<\/b> Priced on "+dateFormat(f.setDate(f.getDate()+1),"dddd, mmm dd, yyyy")+" for arrival on "+dateFormat(r.setDate(r.getDate()),"dddd, mmm dd, yyyy")+", departure from "+this.plC_Title+".<\/p><p>This sample itinerary includes:<\/p>";u.left>600?($(".dvPopUpOrangeTopL").is(":visible")==!0?$(".dvPopUpOrangeTopL").hide():"",$("#dvPopUpGR").show(),$("#dvPopContentR").html(n),$("#dvPopUpGR").offset({left:t.left-245,top:t.top+34})):($(".dvPopUpOrangeTopR").is(":visible")==!0?$(".dvPopUpOrangeTopR").hide():"",$("#dvPopUpGL").show(),$("#dvPopContentL").html(n),$("#dvPopUpGL").offset({left:t.left+5,top:t.top+34}));$.ajax({type:"Get",url:SiteName+"/Api/Packages/ItineraryContentFromPriceId/"+i,contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){if(msg=t,msg!=""){var i=$.map(msg,function(n){return{id:n.id,name:n.name}});n=n+"<ul>"+i[0].name+"<\/ul>";n=n+'<div class="dvPopPriceIt" onclick="priceThinCal('+e+');"><span>Price It<font> &rsaquo;<\/font><\/span><\/div>';u.left>600?$("#dvPopContentR").html(n):$("#dvPopContentL").html(n)}},error:function(n){$("#dvPopContentR").html(n.responseText)}})})})}function scrollToTop(){$("body,html").animate({scrollTop:0},800)}function priceThinCal(n,t,i){$(".dvPopUpOrangeTopR").is(":visible")==!0?$(".dvPopUpOrangeTopR").hide():"";$(".dvPopUpOrangeTopL").is(":visible")==!0?$(".dvPopUpOrangeTopL").hide():"";$("#BsDepCity").val(n);$("#sDepCity").val(n);$("#iDepCity").val(t);$("#BiDepCity").val(t);$("#InDate1").val(i);$("#BInDate1").val(i);$(window).resize(function(){$("#dvPopCal").center()});$('[id^="gToday"]').css("position","fixed");scrollToTop()}function hidePopUpInfo(n){return $("#"+n+"").hide(),n=="dvPopCal"?($("#overviewCal").appendTo(".overview-section__calendar"),$("#BsDepCity").val("type here"),$("#sDepCity").val("type here"),$("#iDepCity").val(-1),$("#BiDepCity").val(-1),$("#InDate1").val("mm/dd/yyyy"),$("#BInDate1").val("mm/dd/yyyy"),$('[id^="gToday"]').css("position","absolute"),$("#dvPopCalContent").text().includes("Stagger")?$("#dvPopCalContent").text(""):""):"",!1}function DropDown(n){this.dep=n;this.placeholder=this.dep.children("span");this.opts=this.dep.find("ul.dropdownList > li");this.val="";this.index=-1;this.initEvents()}function GetPackageSamplePrice(n){$.ajax({type:"POST",url:SiteName+"/Api/PackageSamplePrice",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(n),success:function(n){var t,i;objListPrices=n;objListPrices.length>0&&(t='<h2 class="history-section__title">Price history for this itinerary (past 7 days):<\/h2>',t+='<div class="history-section__list-wrapper">',t+="<div>",t+='<ul class="history-section__list">',i=0,objListPrices.forEach(function(n){t+='<li class="history-section__item '+(i>=7?"visually-hidden":"")+'">';t+='<button type="button" onclick="showThisItineraries('+n[0].REAID+')">';t+="<span>From "+n[0].PLC_Title+" for "+n[0].REA_Nights+" nights<\/span>";t+="<span> $"+dollarUSLocale.format(n[0].REA_TotalPrice)+" * incl.tax<\/span>";t+="<\/button>";t+="<\/li>";i++}),t+="<\/ul>",t+="<\/div>",t+='<div class="history-section__mob-button">',t+='<button id="seeMorePriceHistory" type="button">see more<span>&#129095;<\/span><\/button>',t+='<button id="closeMorePriceHistory" class="is-hidden" type="button">close more<span>&#129093;<\/span><\/button>',t+="<\/div>",t+='<div class="history-section__wrapper-buttons">',t+='<button id="prevPriceHistory" class="history-section__desk-button disabled" type="button" aria-label="Previous price history">&#129093;<\/button>',t+='<button id="nextPriceHistory" class="history-section__desk-button" type="button" aria-label="Next price history">&#129095;<\/button>',t+="<\/div>",t+="<\/div>",$("#history-section__prices").append(t),$("#prevPriceHistory").click(prevPriceHistory),$("#nextPriceHistory").click(nextPriceHistory),$("#seeMorePriceHistory").click(seeMorePriceHistory),$("#closeMorePriceHistory").click(closeMorePriceHistory),$(".history-section__list").children().length<=7&&($(".history-section__wrapper-buttons, .history-section__mob-button").hide(),$(".history-section__list-wrapper > div:nth-child(1)").attr("style","height: auto")))},error:function(n){console.log("Call GetPackageSamplePrice error: "+n.responseText)}})}function GetPackageCMSs(){$.ajax({type:"Get",url:SiteName+"/Api/Packages/PackageCMSs/"+packID,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){citiesInfo=n;let r=[];citiesInfo.filter(n=>n.str_PlaceTypeId==1||n.str_PlaceTypeId==25).forEach(function(n){let t=r.find(t=>t.placeId==n.placeId);t==undefined&&(t={placeId:n.placeId,str_PlaceTitle:n.str_PlaceTitle,stR_UserID:n.stR_UserID},r.push(t))});let u,f,e;var i;let t,o;citiesInfo.filter(n=>n.str_PlaceTypeId==5&&n.n==1).forEach(function(n){citiesInfo.filter(t=>t.placeId==n.placeId&&t.cmsW_RelatedCmsID!=undefined&&t.cmsW_RelatedCmsID!=null&&t.cmsW_Title!="").sort((n,t)=>n.cmsW_Order>t.cmsW_Order?1:t.cmsW_Order>n.cmsW_Order?-1:0).forEach(function(r){i=r.cmS_Description=="none"?r.cmsW_Title.replaceAll(" ","_").toLowerCase():r.cmS_Description.replaceAll(" ","_").toLowerCase();t='<a id="ajxTrick" class="jxCoInf" href="/'+i+"/cms?cms="+r.cmsW_RelatedCmsID+'">'+r.cmsW_Title+"<\/a>";$("#coun-cms-"+n.placeId).append(t)})});r.forEach(function(n){o=0;t='<div style="height:5px;border-bottom:1px solid #390;"><\/div>';t+='<div align="center">';citiesInfo.filter(t=>t.placeId==n.placeId&&t.cmsW_RelatedCmsID!=undefined&&t.cmsW_RelatedCmsID!=null&&t.cmsW_Title!="").sort((n,t)=>n.cmsW_Order>t.cmsW_Order?1:t.cmsW_Order>n.cmsW_Order?-1:0).forEach(function(r){o+=1;i=r.cmS_Description=="none"?r.cmsW_Title.replaceAll(" ","_").toLowerCase():r.cmS_Description.replaceAll(" ","_").toLowerCase();t+='<span style="padding:0px 2px;margin-top:10px;cursor:pointer;"><span style="margin:0px 2px;"><span id="cmsLink-'+n.placeId+"-"+r.cmsW_RelatedCmsID+'" lang="/'+i+"/cms?cms="+r.cmsW_RelatedCmsID+'"><img class="lazyload" src="https://pictures.tripmasters.com/siteassets/d/spacer.gif" data-src="https://pictures.tripmasters.com/siteassets/d/lupita.png" width="28px" height="27px" border="0" align="absmiddle"/><u>'+r.cmsW_Title+"<\/u><\/span><\/span><\/span>"});t+="<\/div>";$('[id^="aboutDIV'+n.placeId+'"]').append(t)});$("[id^='cmsLink']").click(function(){u=$(this).attr("lang");f=window.screenX+(window.outerWidth/2-550);e=window.screenY+(window.outerHeight/2-325);window.open(u,"new","height=650,width=1100,left="+f+",top="+e+",scrollbars=yes").focus()});$(".jxCoInf").click(function(){var n=$(this).attr("href");return winOpenCMS(n),!1})},error:function(n){alert(n.responseText+" = error")}})}function GetPackageHotels(){isPackageHotelsLoading||($("#dvShwAcco").append('<div id="loadingAcco" style="text-align:center; padding:50px;"><img src="https://pictures.tripmasters.com/siteassets/d/ajax-loader.gif"/><br/>loading ...<br/><\/div>'),isPackageHotelsLoading=!0,$.ajax({type:"Get",url:SiteName+"/Api/Packages/PackageHotels/"+packID,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){citiesInfo=n;let i=[];citiesInfo.filter(n=>n.str_PlaceTypeId==1||n.str_PlaceTypeId==25).forEach(function(n){let t=i.find(t=>t.placeId==n.placeId);t==undefined&&(t={placeId:n.placeId,str_PlaceTitle:n.str_PlaceTitle,noOfSS:n.noOfSS,noOfHotels:n.noOfHotels,stR_UserID:n.stR_UserID},i.push(t))});let r=0;var t;let u,f,e;i.filter(n=>n.noOfHotels>0).forEach(function(n){r++;noHotelsInfo='&nbsp;&nbsp;<a id="hotOff-'+n.placeId+"-"+r+'" onclick="recommendedHotels('+n.placeId+",'"+n.str_PlaceTitle+"',this.id); return false;\" style='cursor: pointer'>"+n.noOfHotels+" hotels offered<\/a>";$("div[id^='overn-"+n.placeId+"'] .HotelsInfo").length>0?$("div[id^='overn-"+n.placeId+"'] .HotelsInfo").append(noHotelsInfo):$("div[id^='overn-"+n.placeId+"']").append(noHotelsInfo);t=arrCitiesInfo.filter(t=>t[0]==n.placeId);t.length>0&&(hotelInfo='<li class="dveachHotinTab" lang=\'/'+t[0][1]+"/"+t[0][2].replaceAll(" ","_").toLowerCase()+"/"+n.str_PlaceTitle.replaceAll(" ","_").toLowerCase()+"/hotels'>",hotelInfo+="<div class='hotels-section__image' id='imgHO"+r+"'>",hotelInfo+="<img class='lazyload' src='https://pictures.tripmasters.com/siteassets/d/spacer.gif' data-src='https://pictures.tripmasters.com/images/destination_icons/ed/cities/"+n.placeId+"_cityimage.jpg' onerror='this.onerror=null;this.src =\"https://pictures.tripmasters.com/images/destination_icons/ed/cities/"+n.placeId+"_placephoto.jpg\"'/>",hotelInfo+="<\/div>",hotelInfo+="<div class='hotels-section__button'>",hotelInfo+="<button class='dvButtPrim'>"+n.str_PlaceTitle+" Hotels ("+n.noOfHotels+" total)<span>&#155;<\/span><\/button><\/div>",$(".hotels-section__list").append(hotelInfo))});$(".dveachHotinTab").click(function(){u=$(this).attr("lang");f=window.screenX+(window.outerWidth/2-550);e=window.screenY+(window.outerHeight/2-325);window.open(u,"new","height=650,width=1100,left="+f+",top="+e+",scrollbars=yes").focus()});$("#loadingAcco").remove();isPackageHotelsLoading=!1},error:function(n){alert(n.responseText+" = error")}}))}function GetPackageActivities(){isPackageActivitiesLoading||($("#dvShwActi").append('<div id="loadingActi" style="text-align:center; padding:50px;"><img src="https://pictures.tripmasters.com/siteassets/d/ajax-loader.gif"/><br/>loading ...<br/><\/div>'),isPackageActivitiesLoading=!0,$.ajax({type:"Get",url:SiteName+"/Api/Packages/PackageActivities/"+packID,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){citiesInfo=n;let i=[];citiesInfo.filter(n=>n.str_PlaceTypeId==1||n.str_PlaceTypeId==25).forEach(function(n){let t=i.find(t=>t.placeId==n.placeId);t==undefined&&(t={placeId:n.placeId,str_PlaceTitle:n.str_PlaceTitle,noOfSS:n.noOfSS,noOfHotels:n.noOfHotels,stR_UserID:n.stR_UserID},i.push(t))});let r=0;var t;let u,f,e;i.filter(n=>n.noOfSS>0).forEach(function(n){r++;noHotelsInfo='<br/>Optional&nbsp;&nbsp;<a id="hotOff-'+n.placeId+"-"+r+'" onclick="recommendedSS('+n.placeId+",'"+n.str_PlaceTitle+"',this.id); return false;\" style='cursor: pointer'>"+n.noOfSS+" Things to do<\/a>";$("div[id^='overn-"+n.placeId+"'] .ActivitiesInfo").length>0?$("div[id^='overn-"+n.placeId+"'] .ActivitiesInfo").append(noHotelsInfo):$("div[id^='overn-"+n.placeId+"']").append(noHotelsInfo);t=arrCitiesInfo.filter(t=>t[0]==n.placeId);t.length>0&&(ssInfo='<li class="dveachHotinTab" lang=\'/'+t[0][1]+"/"+t[0][2].replaceAll(" ","_").toLowerCase()+"/"+n.str_PlaceTitle.replaceAll(" ","_").toLowerCase()+"/activities'>",ssInfo+="<div class='tours-section__image' id='imgSS"+r+"'>",ssInfo+="<img class='lazyload' src='https://pictures.tripmasters.com/siteassets/d/spacer.gif' data-src='https://pictures.tripmasters.com/images/destination_icons/ed/cities/"+n.placeId+"_cityimage.jpg' onerror='this.onerror=null;this.src =\"https://pictures.tripmasters.com/images/destination_icons/ed/cities/"+n.placeId+"_placephoto.jpg\"'/>",ssInfo+="<\/div>",ssInfo+="<div class='tours-section__button'>",ssInfo+="<button class='dvButtPrim'>Tours in "+n.str_PlaceTitle+" ("+n.noOfSS+" total)<span>&#155;<\/span><\/button><\/div>",$(".tours-section__list").append(ssInfo))});$(".dveachHotinTab").click(function(){u=$(this).attr("lang");f=window.screenX+(window.outerWidth/2-550);e=window.screenY+(window.outerHeight/2-325);window.open(u,"new","height=650,width=1100,left="+f+",top="+e+",scrollbars=yes").focus()});$("#loadingActi").remove();isPackageActivitiesLoading=!1},error:function(n){alert(n.responseText+" = error")}}))}function GetPackageFeedbacks(){isPackageFeedbacksLoading||($("#dvShwFeed").append('<div id="dvShwFeedLoading" style="text-align:center; padding:50px;"><img src="https://pictures.tripmasters.com/siteassets/d/ajax-loader.gif"/><br/>loading ...<br/><\/div>'),isPackageFeedbacksLoading=!0,$.ajax({type:"Get",url:SiteName+"/Api/Packages/PackageFeedbacks/"+packID,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){citiesInfo=n;let i,f=!1,r,e,t=[];if(citiesInfo.filter(n=>n.str_PlaceTypeId==5&&n.noOfFeeds>0).sort((n,t)=>n.str_PlaceTitle>t.str_PlaceTitle?1:t.str_PlaceTitle>n.str_PlaceTitle?-1:0).forEach(function(n){t=[];i='<button class="feedbacks-section__button-city" onclick="openFeedsContainer(\'C\','+n.placeId+')">';i+="<span>"+n.str_PlaceTitle+"<\/span>";i+="<span>"+n.noOfFeeds+" Customer Feedbacks<\/span>";i+="<\/button>";i+='<input id="CoutryFeedIds'+n.placeId+'" type="hidden" value='+n.noOfFeeds+"/>";$(".feedbacks-section__buttons").append(i);f=!0;r=n.overAll.toFixed(2);e=(r*24).toFixed(1);t.push(n.placeId);t.push(n.noOfFeeds);t.push(r);t.push(e);allcouFeedNo.push(t);t=[]}),$("#dvShwFeedLoading").remove(),$("#packFeedCount").val()!=0||f){$(".history-section, .pay-section, .trip-section").hide();var u=$("#PackCustFeedIds");u.length>0?openFeedsContainer("P",$("#Pkgid").val()):$("input[id^='CoutryFeedIds']").each(function(){if(u=$(this).val(),u.length>0){var n=$(this).attr("id").replace("CoutryFeedIds","");return openFeedsContainer("C",n),!1}})}else $("#dvShwFeed").css("display","none"),$("#dvTabFeed").css("display","none");isPackageFeedbacksLoading=!1},error:function(n){alert(n.responseText+" = error")}}))}function clkshowItin(n){var t=$("#dvFDinclu"+n+"");t.is(":visible")?(t.hide(),$("#dvItinDetail"+n).html("Itinerary details &#709;")):(t.show(),$("#dvItinDetail"+n).html("Itinerary details &#708;"))}var packID,plcNA,pakNTS,popID,totCities,msg="",newdvCnt,objPics,picTotal,priceFilter=[],priceGuide=[],histFilter=[],startDate,isNumber=/[0-9]+/g,deflt,num,cookVal,setTop,topSet;let currentPic=0,pagePriceHistory=1;var dollarUSLocale=Intl.NumberFormat("en-US"),allcouFeedNo=[],arrCitiesInfo=[],isPackageHotelsLoading=!1,isPackageActivitiesLoading=!1,isPackageFeedbacksLoading=!1;$(document).ready(function(){packID=$("#pakID").val();plcNA=$("#plcNA").val();pakNTS=$("#pakNTS").val();citiesInfo=$("#citiesInfo").val();citiesInfo=citiesInfo.substring(0,citiesInfo.length-1);let i=citiesInfo.split("@").map(function(n){return n.split("|")});arrCitiesInfo=[...new Map(i.map(n=>[JSON.stringify(n),n])).values()];$('span[id^="#ntsBubble"]').each(function(){$(this).tooltip()});$("#ntsBubble").length>0&&priceBubble("ntsBubble",pakNTS);totCities=$("#hwMnyCty").val();var t=getCookie("utmcampaign"),n;t!=null&&(n=t.split("="),$("#utm_campaign").length!=0&&($("#utm_campaign").val(jQuery.trim(n[1])),$("#valCook").html(n[1])),$("#utm_campaignMob").length!=0&&($("#utm_campaignMob").val(jQuery.trim(n[1])),$("#valCook").html(n[1])));$("#ovrCms").length>0&&callCMS($("#ovrCms").val(),"dvContOver");$('li[id*="dvTab"]').click(function(){opentabSection(this.id)});$('span[id^="bubble"]').each(function(){$(this).tooltip()});$(".img-modal__close, .img-modal__title").click(moreMediaClose);$("#imgForw").click(nextPicture);$("#imgBack").click(prevPicture);$(".modal__close").click(closeModal);$("#moreRelatedItineraries").click(showMoreRelatedItineraries);$("#staggerPaymentsInfo").click(showStaggerPaymentsInfo);$(".mob-tab").click(function(){selectMobTab(this.id)});aboutBUT();$("#seeAllImg, #bigMap, .images-section__item img").on("click",function(){buildPics()})});deflt="New York City (all Airports),  NY";DropDown.prototype={initEvents:function(){var n=this;n.dep.on("click",function(){return $(this).toggleClass("active"),!1});n.opts.on("click",function(){var t=$(this);n.val=t.text();n.index=t.index();$("#inpFromNA").val(n.val);$("#inpFromID").val(t.find("a").attr("lang"));n.placeholder.text(n.val);calreload(n.val)})},getValue:function(){return this.val},getIndex:function(){return this.index}};$(function(){var n=new DropDown($("#dep"));$(document).click(function(){$(".dropdownContainer").removeClass("active")});$(".dveachHotinTab, #cmsLink").click(function(){var n=$(this).attr("lang"),t=window.screenX+(window.outerWidth/2-550),i=window.screenY+(window.outerHeight/2-325);window.open(n,"new","height=650,width=1100,left="+t+",top="+i+",scrollbars=yes").focus()})});