function UpdateHotelList(){$("#updateContenedor").html("");$("#showMoreHotels").hide();page=1;loadHotelList(1)}async function BuildFiltersList(){try{$("#selZone").change(function(){$("#hotContain").val("Type word");$("input[name=rad][value='1']").prop("checked",!0);clickPG=0;UpdateHotelList()});$("#hotContain").click(function(){this.select();$("#selZone").val(-1);$(".rat:checkbox").prop("checked",!1);$(".fav:checkbox").prop("checked",!1);$(".rev:checkbox").prop("checked",!1);$(".rad:radio[value=1]").prop("checked",!0)}).keypress(function(n){if(n.keyCode==13)return UpdateHotelList(),n.stopPropagation(),n.preventDefault(),!1});$(".rev:checkbox").click(function(){$("#hotContain").val("Type word");$("input[name=rad][value='1']").prop("checked",!0);clickPG=0;UpdateHotelList()});$("#favorite").click(function(){$("#hotContain").val("Type word");clickPG=0;UpdateHotelList()});$(".rat:checkbox").click(function(){$("#hotContain").val("Type word");$("input[name=rad][value='1']").prop("checked",!0);clickPG=0;UpdateHotelList()});$("#resetButton").click(function(){$("#selZone").val(-1);$("#hotContain").val("Type word");$(".rat:checkbox").prop("checked",!0);$(".fav:checkbox").prop("checked",!1);$(".rev:checkbox").prop("checked",!0);$(".rad:radio[value=1]").prop("checked",!0);scroll(0,0);clickPG=0;UpdateHotelList()});$('label[id*="sortBy"]').click(function(){$('label[id*="sortBy"]').removeClass("active");$("#"+this.id).addClass("active")});$(".aOnly").click(function(){$("#selZone").val(-1);$("#hotContain").val("Type word");this.id.indexOf("chkRevw")>-1?$(".rat:checkbox").prop("checked",!0):$(".rat:checkbox").prop("checked",!1);$(".fav:checkbox").prop("checked",!1);$(".rev:checkbox").prop("checked",!1);$(".rad:radio[value=1]").prop("checked",!0);var n=this.id.split("|");return $("#"+n[1].replace(" ","")+"").prop("checked",!0),scroll(0,0),clickPG=0,UpdateHotelList(),!1});$(".dvboxCloseImg").click(function(){$(".pgwSlideshow").remove();$(".dvHotImages").toggle();openMask()});$(".dvboxCloseMapOne").click(function(){$(".dvBigMap").html("");$(".dvBigMapCanvas").toggle();openMask()});$(".dvRevClose").click(function(){$(".dvReviewInfoLeft").html("");$(".dvReviewInfoRight").html("");$(".dvReviewTitle").html("");$("#dvRevContainer").toggle();openMask()});$(".dvBoxClose").click(function(){closeMapBubble()});$(".rad").click(function(){UpdateHotelList()});$("#showMoreHotels").click(function(){showMoreHotels()});$(".modal__close, #applyButton").click(function(){closeModal()});$("#modalMap").click(function(){openModalMap()});$("#modalFilter").click(function(){openModalFilter()})}catch(n){console.error("BuildFiltersList error:",n)}}function StyleMapControl(n,t){var i=document.createElement("div"),r;i.style.backgroundColor="#fff";i.style.border="1px solid #fff";i.style.borderRadius="5px";i.style.boxShadow="0 2px 6px rgba(0,0,0,.3)";i.style.cursor="pointer";i.style.marginBottom="10px";i.style.marginRight="5px";i.style.textAlign="center";i.title=""+t+"";i.style.width="110px";n.appendChild(i);r=document.createElement("div");r.style.color="#333";r.style.fontFamily="Roboto,Arial,sans-serif";r.style.fontSize="12px";r.style.lineHeight="22px";r.style.paddingLeft="5px";r.style.paddingRight="5px";r.innerHTML=t;i.appendChild(r)}function getReview(n,t){openModal();typeModal="default";$.ajax({type:"POST",url:SiteName+"/Api/getDataExpediaReviewHotel",data:JSON.stringify({Id:n}),dataType:"json",crossDomain:!0,contentType:"application/json; charset=utf-8",success:function(n){var i=n,i=n,r,u,f;if($(".modal__container").html(`<h2 class="modal__title"></h2>
                                         <div class="modal__flex">
                                             <div class="modal__left"></div>
                                             <div class="modal__right"></div>
                                         </div>`),i.propertyRatings==null)r='<img src = "https://pictures.tripmasters.com/siteassets/d/no-review-icon.png" alt = "NoReview"><\/div>',$(".modal__title").html(r);else{$(".modal__title").html(t);u=i.propertyRatings.guestReviews.overall>=4.5?"Excellent":i.propertyRatings.guestReviews.overall>=4?"Very good":i.propertyRatings.guestReviews.overall>=3.5?"Good":"Okay";f=$('<div style="display: inline-flex;"><div class="GuestRevOverAllMark">'+i.propertyRatings.guestReviews.overall+'<\/div><div style="margin-left:5px;"><div class="GuestRevOverAllText">'+u+'<\/div><div class="GuestRevOverAllNo">'+i.propertyRatings.guestReviews.count+" reviews<\/div><\/div><\/div>");$(".modal__left").append(f);const{cleanliness:n,service:r,comfort:e,condition:o,location:s,neighborhood:h,amenities:c}=i.propertyRatings.guestReviews,l=[{value:n,name:"Cleanliness"},{value:r,name:"Service"},{value:e,name:"Comfort"},{value:o,name:"Condition"},{value:s,name:"Location"},{value:h,name:"Neighborhood"},{value:c,name:"Amenities"}],a=l.map(function({value:t,name:n}){if(t){const i=Math.round(t*20);return`<div>
                                    <div style="display: flex;justify-content: space-between;">
                                        <div>${n}</div>
                                        <div>${t}/5</div>
                                    </div>
                                    <div class="meter"><span style="width:${i}%;"></span></div>
                               </div>`}}).join("");$(".modal__left").append(a);ExpediaFeedbacks=i.guestReviews;GetExpediaFeedbacks(1)}openMask()},fail:function(n,t,i){console.log("something wrong: "+n+" | "+t+" | "+i)},error:function(n,t,i){console.log("something wrong: "+n.responseJSON+" | "+t+" | "+i)}})}function GetExpediaFeedbacks(n){var o,s,h;const u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var t=ExpediaFeedbacks,i=(n-1)*10,r=i+9,f=n+1,e=ExpediaFeedbacks.length;r>t.length?r=t.length:"";o=Math.ceil(t.length/10);t=t.slice(i,r+1);s="";h="";t.length>0&&jQuery.each(t,function(){var o=this.rating==undefined?"":parseInt(this.rating)==5?"Excellent":parseInt(this.rating)==4?"Good":parseInt(this.rating)==3?"Okay":parseInt(this.rating)==2?"Poor":"Terrible",t=this.verification_source==undefined?"":this.verification_source.indexOf("Hotels.com")>=0?"https://pictures.tripmasters.com/siteassets/d/Hotels_Logo_Horizontal_RED_RGB_TM.png":this.verification_source.indexOf("Expedia")>=0?"https://pictures.tripmasters.com/siteassets/d/ExpediaLogo_Color.png":"https://pictures.tripmasters.com/siteassets/d/VRBO_Logo_Blue.png",s=this.verification_source==undefined?"":this.verification_source.indexOf("Hotels.com")>=0?"70":this.verification_source.indexOf("Expedia")>=0?"49":"49",h=this.reviewer_name=="Verified traveler"?'style="display: none;">':">",c=this.trip_reason==undefined?'style="display: none;">':">",l=this.travel_companion==undefined?'style = "display: none;" > ':">",a=this.title==undefined?'style = "display: none;" > ':">",n=new Date(this.date_submitted),v=n.getMonth(),y=n.getDate(),p=n.getFullYear(),w=this.rating==undefined?"0":this.rating,b=this.text==undefined?"No review available":this.text,k=this.trip_reason==undefined?"":this.trip_reason.replace("_"," "),d=$('<div class="review__comment fontSize12 displaynone" style="display: block;"><div class="displayFlex justifySpaceBetween mb-10"><div class="review__comment-header displayFlex textBlue16 font-weight-bold"><span class="review__comment-rating">'+parseInt(w)+'/5<\/span><span class="review__comment-rating_lable ml-5">'+o+'<\/span><\/div><div class="verification__source displayFlex"><div class="verification__source-pic"><img src="'+t+'" alt="'+t+'" width="'+s+'" height="14"><\/div><span class="displaynone"><\/span><\/div><\/div><div class="review__comment-reviewer_name textBlue14 font-weight-bold mb-10" '+h+this.reviewer_name+'<\/div><div class="review__comment-title textBlue14 font-weight-bold mb-10" '+a+'"'+this.title+'"<\/div><p class="review__comment-date_submitted textGrey">'+u[v]+" "+y+", "+p+'<\/p><p class="review__comment-trip_reason textGrey font-weight-bold" '+c+k+'<\/p><div class="review__comment-travel_companion textGrey mb-10" '+l+"Travel with: "+this.travel_companion+'<\/div><div class="review__comment-text textGrey mb-20">'+b+'<\/div><hr class="hrRating"/><\/div>'),r;$("#dshowmore").remove();$(".modal__right").append(d);i+9<e-1&&(r=$('<div id="dshowmore" class="review__comments-button mt-10 mb-10"><button type = "button" id = "show__more-comments" onclick="GetExpediaFeedbacks('+f+');" class= "show__more-button textBlue14 font-weight-bold">Show more reviews<\/button ><\/div>'),$(".modal__right").append(r))})}function openModalMap(){openModal();typeModal="map";$(".modal__container").html("");$(".hotels__map > div").appendTo(".modal__container")}function openModalFilter(){openModal();typeModal="sort";$(".modal__container").html("");$(".desk-nav__sort-wrapper").appendTo(".modal__container");$(".hotels__filter > div").appendTo(".modal__container")}function openModal(){$(".modal__container").html('<div style="padding:15px 15px;text-align:center;"><img src="https://pictures.tripmasters.com/siteassets/d/wait.gif"><\/div>');$("#modal").removeClass("is-hidden");$("body").addClass("modal-open")}function closeModal(){$("#modal").addClass("is-hidden");$("body").removeClass("modal-open");switch(typeModal){case"map":$(".modal__container > div").appendTo(".hotels__map");break;case"sort":$(".modal__container > div:first-child").appendTo(".desk-nav__sort");$(".modal__container > div:first-child").appendTo(".hotels__filter");break;case"default":$(".modal__container").html("")}}function openMask(){var n=$(document).height(),t=$(window).width();mskdisplay==!1?($(".dvMask").css({width:t,height:n}),$(".dvMask").fadeIn(100),$(".dvMask").fadeTo("fast",.7),mskdisplay=!0):($(".dvMask").css({width:0,height:0}),$(".dvMask").fadeOut(100),$(".dvMask").fadeTo("fast",0),mskdisplay=!1)}async function loadHotelList(n){var c="",l=!1,u,f,p,k,s,g,h,t,d;$("#hotContain").val()!="Type word"&&(c=$("#hotContain").val(),l=!0);u=0;f=!1;$("#selZone").val()!=-1&&(u=$("#selZone").val(),f=!0);var a=[],r="",e=0,v=0,y=!1;$(".rat:checkbox").each(function(){this.checked?r=e==0?this.value:r+","+this.value:"";this.checked?e++:"";v++});r!=""&&e!=v&&(y=!0,p=r.split(","),p.forEach(function(n){a.push(n.replace(/_/g," ").replace(/plus/g,"+"))}));var w=[],i="",o=0,b=0;$(".rev:checkbox").each(function(){this.checked?i=i=o==0?this.value.replace(/chkRevw/i,""):i+","+this.value.replace(/chkRevw/i,""):"";this.checked?o++:"";b++});i!=""&&o!=b&&(k=i.split(","),k.forEach(function(n){w.push(n)}));s=!1;g="";$(".fav:checkbox").each(function(){this.checked?s=!0:!1});$("#hotelList").append('<div id="loadingAcco" style="text-align:center; padding:50px;"><img src="https://pictures.tripmasters.com/siteassets/d/ajax-loader.gif"/><br/>loading ...<br/><\/div>');h=1;$(".rad").each(function(){$(this).prop("checked")==!0&&(h=$(this).prop("value"))});t={};d={PlaceId:IDplc,PageNo:n,RatingsList:a,HotelName:c,isHotelName:l,isFavorite:s,isRatings:y,isCityZone:f,ReviewsList:w,CityZone:u,Sort:h};try{t.traditional=!0;t.url=SiteName+"/Api/Hotels/HotelsOnPagePgs";t.type="GET";t.data=d;t.dataType="json";t.cache=!1;t.success=function(t){hotelsObj=t;BuildHotelList(n);$("#loadingAcco").remove()};t.error=function(n){console.log("Call HotelsOnPagePgs error: "+n.responseText)};$.ajax(t)}catch(nt){console.error("HotelsOnPagePgs error:",nt)}}function BuildHotelList(n){let t="";const i=hotelsObj;i.length>0?($(".desk-nav__num span").html(hotelsObj[0].totalCount),$(".mobile-nav__num span").html(hotelsObj[0].totalCount),jQuery.each(i,function(){let r=this.pdl_title;r.substr(-1)==="."?r=r.replace(/.([^.]*)$/,""):"";const u=`${SiteName}/${NAcou.replace(/\s/g,"_").toLowerCase()}/${NAplc.replace(/\s/g,"_").toLowerCase()}/${r.replace(/\s/g,"_").replace("&","and").toLowerCase()}/hotel-${this.pdlid}`,e=this.giph_tnsequence>49&&this.giph_tnsequence<60?'<img src="https://pictures.tripmasters.com/siteassets/d/favorite.gif" align="absmiddle" />':"",o=/Stars/g.test(this.giph_tntournetrating)?this.giph_tntournetrating:"";let n="";switch(!0){case/Stars|Lodge|Cruise/g.test(this.giph_tntournetrating):n="Stars_"+this.giph_tntournetrating.replace(/\s/g,"_");n.includes("+")&&(n=n.replace("+","_Plus"));break;case!/Stars|Lodge|Cruise/g.test(this.giph_tntournetrating):n=this.giph_tntournetrating.replace(/\s/g,"_").toLowerCase()}const s=expediaNoRange(this.ghs_finalscore),h=this.ghs_expediareviewcount>0?`(<button type="button" onclick="getReview(${this.pdlid},'${this.pdl_title}',this)">${this.ghs_expediareviewcount} reviews</button>)`:"";let i="";switch(s){case"EX":i="Excellent";break;case"VG":i="Very Good";break;case"GD":i="Good";break;case"FR":i="Fair";break;case"PO":i="Poor"}var c=this.img_500path_url||this.img_path_url||"",f=this.cityzone;f==null&&(f="----");t+=`<li class="hotels__item">
                           <div class="hotels__mobile-title">
                               <h2><a href="${u}"><span>${this.pdl_title}</span>${e}</a></h2>
                               <p>${this.cityzone}</p>
                           </div>
                           <div class="hotels__wrapper">
                               <div class="hotels__image">
                                   <img src="https://pictures.tripmasters.com${c.toLowerCase()}?growid=${this.giphid}"/>
                                   <a href="${u}">Details, photos, map<span>&#8250;</span></a>
                               </div>
                               <div class="hotels__info">
                                   <div class="hotels__desk-title">
                                       <h2><a href="${u.toLowerCase()}"><span>${this.pdl_title}</span>${e}</a></h2>
                                       <p>${f}</p>
                                   </div>
                                   <div class="hotels__review">
                                       <div>
                                           <img src="https://pictures.tripmasters.com/siteassets/d/${n}.gif" />
                                           <span>${o}</span>
                                       </div>
                                       <p>
                                           <span>${this.ghs_finalscore}</span> ${i} ${h}                         
                                       </p>
                                   </div>
                                   ${this.tnhighlights!==""?`<p class="hotels__text"><span>&#9751;</span>${this.tnhighlights}</p>`:""}
                               </div>
                           </div>
                       </li>`})):($(".desk-nav__num span").html(0),$(".mobile-nav__num span").html(0),t+=`<div>
                       <p class="hotels__no-results">No hotels match filter criteria,<br/> please select another combination and try again.<br/> Thank you!</p>
                  </div>`);i.length>0&&(n*12<hotelsObj[0].totalCount?$("#showMoreHotels").show():$("#showMoreHotels").hide());$("#imgWait").remove();$("#updateContenedor").append(t);$("#updateContenedor").animate({opacity:"1"},100)}function showMoreHotels(){page++;loadHotelList(page)}function buildThumbMap(){var n=ctyLatLong.split("|"),t=n[0],i=n[1],r='<iframe style="border:0;position:relative;margin-left:-40px;margin-top:-40px;"src = "https://www.google.com/maps/embed/v1/view?key=AIzaSyAd8S1lOSNhEy2FUzkGT34S1KCvadNLkz8&center='+t+","+i+'&zoom=10" width="300" height="300" frameborder="0"><\/iframe>';$("#dvMapCanvas").html(r)}function getDistanceFromLatLonInKm(n,t,i,r){var u=deg2rad(i-n),f=deg2rad(r-t),e=Math.sin(u/2)*Math.sin(u/2)+Math.cos(deg2rad(n))*Math.cos(deg2rad(i))*Math.sin(f/2)*Math.sin(f/2),o=2*Math.atan2(Math.sqrt(e),Math.sqrt(1-e));return 6371*o}function deg2rad(n){return n*(Math.PI/180)}function expediaNoRange(n){return n.between(4.5,5)?"EX":n.between(4,4.49)?"VG":n.between(3.5,3.99)?"GD":n.between(3,3.49)?"FR":n.between(0,2.99)?"PO":void 0}function openHotelPage(n){window.location=n}function compareCityZone(n,t){return n.cityZone<t.cityZone?-1:n.cityZone>t.cityZone?1:0}function comparegipH_TNTournetRating(n,t){return n.GIPH_TNTournetRating<t.GIPH_TNTournetRating?1:n.GIPH_TNTournetRating>t.GIPH_TNTournetRating?-1:0}function compareGHS_FinalScore(n,t){return n.ghS_FinalScore<t.ghS_FinalScore?1:n.ghS_FinalScore>t.ghS_FinalScore?-1:0}function getHotelPlacePackagesIdeas(n){var t={},i={Id:parseInt(n)};try{t.traditional=!0;t.url=SiteName+"/Api/Hotels/HotelPlacePackagesIdeas";t.type="GET";t.data=i;t.dataType="json";t.cache=!1;t.success=function(n){if(objListPrices=n,objListPrices.length>0){var t="";objListPrices.slice(0,4).forEach(n=>{t+="<li>",t+='<a href="'+SiteName+"/"+n.CountryName.replace(/ /g,"_").toLowerCase()+"/"+n.PDL_Title.replace(/ /g,"_").toLowerCase()+"/package-"+n.PDLID+'">'+n.PDL_Title,t+="<\/a>",t+="<p>"+n.PDL_Duration+" nights from <span>"+formatCurrency(n.STP_Save,0)+"*<\/span><\/p>",t+="<\/li>"});t+="<\/ul>";$(".hotels__packages-list").append(t)}};t.error=function(n){console.log("Call getHotelPlacePackagesIdeas error: "+n.responseText)};$.ajax(t)}catch(r){console.error("getHotelPlacePackagesIdeas error:",r)}}function formatCurrency(n){var i,t;for(n=n.toString().replace(/\$|\,/g,""),isNaN(n)&&(n="0"),sign=n==(n=Math.abs(n)),n=Math.floor(n*100+.50000000001),cents=n%100,n=Math.floor(n/100).toString(),cents<10&&(cents="0"+cents),i=Math.floor(n.length),i=Number(i)-1,t=0;t<Math.floor(Number(i+t)/3);t++)n=n.substring(0,Number(n.length)-(4*t+3))+","+n.substring(Number(n.length)-(4*t+3));return(sign?"":"-")+"$"+n}var map=null,rlatlng,objHOT=[],NAplc,IDplc,NAcou,IDcou,isNumber=/[0-9]+/g,infoPOIWindows=[],markerHotels=[],PGfilter,PGtotal,PGfiltertxt,clickPG=0,mapid=0,thisBrowser=0,distLats,hotelsOn=[],hotelsObj,mskdisplay;let page=1,typeModal="default";window.navigator.userAgent.indexOf("Firefox")>-1?thisBrowser=1:"";$(document).ready(function(){NAplc=$("#placeNA").val();IDplc=$("#placeID").val();NAcou=$("#countryNA").val();IDcou=$("#countryID").val();var n=new google.maps.Geocoder;BuildFiltersList();getHotelPlacePackagesIdeas(IDplc);buildThumbMap();$("#dvMapLegend").popupWindow({windowURL:SiteName+"/"+NAcou.replace(/\s/g,"_").toLowerCase()+"/"+NAplc.replace(/\s/g,"_").toLowerCase()+"/HotelsMap",windowName:"mapPop",centerBrowser:1,height:920,width:1020,resizable:1,scrollbars:1});$("#dvMapCanvas").popupWindow({windowURL:SiteName+"/"+NAcou.replace(/\s/g,"_").toLowerCase()+"/"+NAplc.replace(/\s/g,"_").toLowerCase()+"/HotelsMap",windowName:"mapPop",centerBrowser:1,height:920,width:1020,resizable:1,scrollbars:1})});mskdisplay=!1;Number.prototype.between=function(n,t){return n<t?this>=n&&this<=t:this>=t&&this<=n};compareAccent=function(){var n=/[¹²³áàâãäåaaaÀÁÂÃÄÅAAAÆccç©CCÇÐÐèéê?ëeeeeeÈÊË?EEEEE€gGiìíîïìiiiÌÍÎÏ?ÌIIIlLnnñNNÑòóôõöoooøÒÓÔÕÖOOOØŒr®Ršs?ßŠS?ùúûüuuuuÙÚÛÜUUUUýÿÝŸžzzŽZZ]/g,t={"¹":"1","²":"2","³":"3","á":"a","à":"a","â":"a","ã":"a","ä":"a","å":"a",a:"a",a:"a",a:"a","À":"a","Á":"a","Â":"a","Ã":"a","Ä":"a","Å":"a",A:"a",A:"a",A:"a","Æ":"a",c:"c",c:"c","ç":"c","©":"c",C:"c",C:"c","Ç":"c","Ð":"d","Ð":"d","è":"e","é":"e","ê":"e","?":"e","ë":"e",e:"e",e:"e",e:"e",e:"e",e:"e","È":"e","Ê":"e","Ë":"e","?":"e",E:"e",E:"e",E:"e",E:"e",E:"e","€":"e",g:"g",G:"g",i:"i","ì":"i","í":"i","î":"i","ï":"i","ì":"i",i:"i",i:"i",i:"i","Ì":"i","Í":"i","Î":"i","Ï":"i","?":"i","Ì":"i",I:"i",I:"i",I:"i",l:"l",L:"l",n:"n",n:"n","ñ":"n",N:"n",N:"n","Ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o",o:"o",o:"o",o:"o","ø":"o","Ò":"o","Ó":"o","Ô":"o","Õ":"o","Ö":"o",O:"o",O:"o",O:"o","Ø":"o","Œ":"o",r:"r","®":"r",R:"r","š":"s",s:"s","?":"s","ß":"s","Š":"s",S:"s","?":"s","ù":"u","ú":"u","û":"u","ü":"u",u:"u",u:"u",u:"u",u:"u","Ù":"u","Ú":"u","Û":"u","Ü":"u",U:"u",U:"u",U:"u",U:"u","ý":"y","ÿ":"y","Ý":"y","Ÿ":"y","ž":"z",z:"z",z:"z","Ž":"z",Z:"z",Z:"z"};return function(i){return i.replace(n,function(n){return t[n]})}}();