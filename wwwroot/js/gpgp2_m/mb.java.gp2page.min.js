function callCMS(n){$.ajax({ype:"Get",url:SiteName+"/Api/Packages/getDataThisCMS/"+n,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){var t=JSON.stringify(n);if(n[0].cmS_Content!="")if(n[0].cmS_Content=n[0].cmS_Content.replace(/http:/g,"https:"),RegExp(/\b(dvCMS\w*)\b/).test(n[0].cmS_Content)==!0)$(".modal-body").html(n[0].cmS_Content);else return!1},error:function(n){$(".modal-body").html(n.responseText)}})}function openpoimap(n){ctylocLat=0;ctylocLong=0;$.ajax({type:"POST",url:SiteName+"/Api/Hotels/POIHotels/",contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"html",data:"placeId="+n,success:function(n){var t,i,r;objPOI=eval("("+n.d+")");t=0;delete allLatLong;jQuery.each(objPOI,function(){allLatLong.push(this.POI_Longitude+"|"+this.POI_Latitude);allLong.push(this.POI_Longitude);ctylocLat=Number(ctylocLat)+Number(this.POI_Latitude);ctylocLong=Number(ctylocLong)+Number(this.POI_Longitude);t++});delete ctyLatLong;delete dynZoon;ctyLatLong=Number(ctylocLat/t)+"|"+Number(ctylocLong/t);i=Math.max.apply(Math,allLong);r=Math.min.apply(Math,allLong);jQuery.each(allLatLong,function(n,t){bPrt=t.split("|");(bPrt[0]=r)&&(lat1=bPrt[1],long1=bPrt[0]);(bPrt[0]=i)&&(lat2=bPrt[1],long2=bPrt[0]);delete bPrt});dynZoom=getDistanceFromLatLonInKm(lat1,long1,lat2,long2);preBuildMap(n)},error:function(n){$("#dvGoogleMap").html(n.responseText)}})}function getDistanceFromLatLonInKm(n,t,i,r){var u=deg2rad(i-n),f=deg2rad(r-t),e=Math.sin(u/2)*Math.sin(u/2)+Math.cos(deg2rad(n))*Math.cos(deg2rad(i))*Math.sin(f/2)*Math.sin(f/2),o=2*Math.atan2(Math.sqrt(e),Math.sqrt(1-e));return 6371*o}function deg2rad(n){return n*(Math.PI/180)}function preBuildMap(){var n,t;$("#dvContent").show();n=ctyLatLong.split("|");t=n[0];lon=n[1];var r={center:new google.maps.LatLng(t,lon),zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!0},i=new google.maps.Map(document.getElementById("dvContent"),r),u=0;jQuery.each(objPOI,function(){var t;u++;var f=this.POI_Latitude,e=this.POI_Longitude,o=new google.maps.Point(-10,12),r=new google.maps.Marker({icon:"https://pictures.tripmasters.com/siteassets/d/orange_ball.gif",position:new google.maps.LatLng(f,e),map:i,draggable:!1,raiseOnDrag:!0,labelContent:'<div class="bubbletitle">'+this.POI_Title+"<\/div>",labelAnchor:o,labelInBackground:!1,labelStyle:{opacity:1},title:this.POI_Title,zIndex:8998}),n='<div class="dvBublleStyle">';this.POI_PictureURL!="none"&&(n=n+'<img src="'+this.POI_PictureURL+'" align="left"/>');n=n+'<div style="font-weight:600; color:navy">'+this.POI_Title+"<\/div>";this.POI_Description!="none"&&(n=n+this.POI_Description);n=n+"<\/div>";t=new google.maps.InfoWindow({content:n,size:new google.maps.Size(40,40)});google.maps.event.addListener(r,"click",function(){closePoiInfoW(i,r,t)});infoPOIWindows.push(t)})}function closePoiInfoW(n,t,i){for(var r=0;r<infoPOIWindows.length;r++)infoPOIWindows[r].close();i.open(n,t)}var isNumber=/[0-9]+/g,cmsData,prevCont="";$(document).ready(function(){$("#btnMore").click(function(){$(this).hide()});$('button[id^="btnCty"]').click(function(){var n=this.id.match(isNumber);$("#dvCtyInfo"+n+"").is(":visible")==!1?$(this).addClass("btnCtyShow"):$(this).removeClass("btnCtyShow");$(".dvBoxMapLink, .mapOfInterest").click(function(){thisPos=$(this).offset().top;$(".dvMbGPContainer").hide("slide",{direction:"right"},"slow");$(".Mob, .dvCombine, .sectionDescription, .reghighlights").hide("slide",{direction:"right"},"slow");window.scrollTo(0,0);$(".dvSlideContainer").show("slide",{direction:"right"},"slow");$("#dvContent").css({height:""+$(window).height()-150+"px"});openpoimap($("#plcID").val())});$(".dvMbBack").click(function(){prvCt!=""?($("#dvContent").html(""),$("#dvContent").html(prvCt),prvCt=""):($("#dvContent").html(""),$(".dvMbBack").removeAttr("style"),$(".dvSlideContainer").hide("slide",{direction:"right"},"slow"),$(".dvMbGPContainer").show("slide",{direction:"right"},"slow"),$(".Mob, .dvCombine, .sectionDescription, .reghighlights").show("slide",{direction:"right"},"slow"),window.scrollTo(0,thisPos-100))})});$("#btnClsMore").click(function(){$("#btnMore").collapse("hide")});$("#modalCMS").on("show.bs.modal",function(n){var t=n.relatedTarget.id.match(isNumber);callCMS(t)});$(document).on("click",".aCMStxtLink, .modal-body a",function(n){n.preventDefault();prevCont=$(".modal-body").html();var t=$(this).attr("href").match(/\d+/);callCMS(t[0])});$("#backCms").click(function(){prevCont!=""?($(".modal-body").html(""),$(".modal-body").html(prevCont),prevCont=""):($(".modal-body").html(""),$("#modalCMS").modal("hide"))})});var objPOI,ctylocLat=0,ctylocLong=0,allLat=[],allLong=[],allLatLong=[],lat1,lat2,long1,long2,dynZoom,bPrt,infoPOIWindows=[];